"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/admin/courses/new/page",{

/***/ "(app-pages-browser)/./src/lib/courseService.ts":
/*!**********************************!*\
  !*** ./src/lib/courseService.ts ***!
  \**********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CourseService: function() { return /* binding */ CourseService; }\n/* harmony export */ });\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/firestore */ \"(app-pages-browser)/./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var firebase_storage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/storage */ \"(app-pages-browser)/./node_modules/firebase/storage/dist/esm/index.esm.js\");\n/* harmony import */ var _firebase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./firebase */ \"(app-pages-browser)/./src/lib/firebase.ts\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! uuid */ \"(app-pages-browser)/./node_modules/uuid/dist/esm-browser/v4.js\");\n\n\n\n\nconst COLLECTION_NAME = \"courses\";\n// Helper function to clean data before sending to Firestore\nconst cleanCourseData = (data)=>{\n    const cleaned = {};\n    for (const [key, value] of Object.entries(data)){\n        // Skip undefined values and functions\n        if (value !== undefined && typeof value !== \"function\") {\n            // Handle different data types appropriately\n            if (value === null) {\n                // Convert null to appropriate default values\n                if ([\n                    \"paymentLink\",\n                    \"backgroundImage\",\n                    \"certificateImage\",\n                    \"globalStatus\",\n                    \"startDate\"\n                ].includes(key)) {\n                    cleaned[key] = \"\";\n                } else if ([\n                    \"learningOutcomes\",\n                    \"features\",\n                    \"skills\",\n                    \"requirements\",\n                    \"module\",\n                    \"highlights\",\n                    \"project\",\n                    \"programFor\"\n                ].includes(key)) {\n                    cleaned[key] = [];\n                } else if ([\n                    \"rating\",\n                    \"totalRatings\",\n                    \"enrolledStudents\",\n                    \"price\",\n                    \"originalPrice\"\n                ].includes(key)) {\n                    cleaned[key] = 0;\n                } else {\n                    cleaned[key] = \"\";\n                }\n            } else if (Array.isArray(value)) {\n                // Ensure arrays are properly formatted\n                cleaned[key] = value.filter((item)=>item !== null && item !== undefined);\n            } else if (typeof value === \"string\") {\n                // Trim strings and handle empty values\n                cleaned[key] = value.trim();\n            } else if (typeof value === \"object\" && value.constructor === Object) {\n                // Recursively clean nested objects\n                cleaned[key] = cleanCourseData(value);\n            } else {\n                cleaned[key] = value;\n            }\n        }\n    }\n    return cleaned;\n};\n// Helper function to validate course data\nconst validateCourseData = (courseData)=>{\n    const errors = [];\n    if (!courseData.title || courseData.title.trim().length === 0) {\n        errors.push(\"Title is required\");\n    }\n    if (!courseData.shortDescription || courseData.shortDescription.trim().length === 0) {\n        errors.push(\"Short description is required\");\n    }\n    if (!courseData.category || courseData.category.trim().length === 0) {\n        errors.push(\"Category is required\");\n    }\n    if (!courseData.level || ![\n        \"beginner\",\n        \"intermediate\",\n        \"advanced\"\n    ].includes(courseData.level)) {\n        errors.push(\"Valid level is required (beginner, intermediate, or advanced)\");\n    }\n    if (!courseData.language || courseData.language.trim().length === 0) {\n        errors.push(\"Language is required\");\n    }\n    if (!courseData.duration || courseData.duration.trim().length === 0) {\n        errors.push(\"Duration is required\");\n    }\n    if (!courseData.hours || courseData.hours.trim().length === 0) {\n        errors.push(\"Hours is required\");\n    }\n    if (courseData.price < 0 || isNaN(courseData.price)) {\n        errors.push(\"Price must be a valid number (0 or greater)\");\n    }\n    if (courseData.originalPrice < 0 || isNaN(courseData.originalPrice)) {\n        errors.push(\"Original price must be a valid number (0 or greater)\");\n    }\n    if (courseData.originalPrice > 0 && courseData.price > courseData.originalPrice) {\n        errors.push(\"Price cannot be greater than original price\");\n    }\n    return {\n        isValid: errors.length === 0,\n        errors\n    };\n};\nclass CourseService {\n    // Create a new course\n    static async createCourse(courseData) {\n        try {\n            var _courseData_title, _courseData_slug, _courseData_title1, _courseData_shortDescription, _courseData_category, _courseData_language, _courseData_duration, _courseData_hours, _courseData_programBy, _courseData_paymentLink, _courseData_backgroundImage, _courseData_certificateImage, _courseData_globalStatus, _courseData_startDate;\n            // Validate course data\n            const validation = validateCourseData(courseData);\n            if (!validation.isValid) {\n                return {\n                    success: false,\n                    error: \"Validation failed: \".concat(validation.errors.join(\", \"))\n                };\n            }\n            const courseId = (0,uuid__WEBPACK_IMPORTED_MODULE_3__[\"default\"])();\n            const courseWithMetadata = {\n                ...courseData,\n                _id: courseId,\n                createdAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)(),\n                updatedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)(),\n                status: courseData.status || \"draft\",\n                // Ensure these fields are numbers\n                rating: Number(courseData.rating) || 0,\n                totalRatings: Number(courseData.totalRatings) || 0,\n                enrolledStudents: Number(courseData.enrolledStudents) || 0,\n                price: Number(courseData.price) || 0,\n                originalPrice: Number(courseData.originalPrice) || 0,\n                // Ensure arrays are properly initialized\n                learningOutcomes: Array.isArray(courseData.learningOutcomes) ? courseData.learningOutcomes.filter((item)=>item && item.trim()) : [],\n                features: Array.isArray(courseData.features) ? courseData.features.filter((item)=>item && item.trim()) : [],\n                skills: Array.isArray(courseData.skills) ? courseData.skills.filter((item)=>item && item.trim()) : [],\n                requirements: Array.isArray(courseData.requirements) ? courseData.requirements.filter((item)=>item && item.trim()) : [],\n                module: Array.isArray(courseData.module) ? courseData.module : [],\n                highlights: Array.isArray(courseData.highlights) ? courseData.highlights : [],\n                project: Array.isArray(courseData.project) ? courseData.project : [],\n                programFor: Array.isArray(courseData.programFor) ? courseData.programFor : [],\n                // Ensure strings are not undefined\n                title: ((_courseData_title = courseData.title) === null || _courseData_title === void 0 ? void 0 : _courseData_title.trim()) || \"\",\n                slug: ((_courseData_slug = courseData.slug) === null || _courseData_slug === void 0 ? void 0 : _courseData_slug.trim()) || ((_courseData_title1 = courseData.title) === null || _courseData_title1 === void 0 ? void 0 : _courseData_title1.toLowerCase().replace(/\\s+/g, \"-\").replace(/[^a-z0-9-]/g, \"\")) || \"\",\n                shortDescription: ((_courseData_shortDescription = courseData.shortDescription) === null || _courseData_shortDescription === void 0 ? void 0 : _courseData_shortDescription.trim()) || \"\",\n                category: ((_courseData_category = courseData.category) === null || _courseData_category === void 0 ? void 0 : _courseData_category.trim()) || \"\",\n                level: courseData.level || \"beginner\",\n                language: ((_courseData_language = courseData.language) === null || _courseData_language === void 0 ? void 0 : _courseData_language.trim()) || \"\",\n                duration: ((_courseData_duration = courseData.duration) === null || _courseData_duration === void 0 ? void 0 : _courseData_duration.trim()) || \"\",\n                hours: ((_courseData_hours = courseData.hours) === null || _courseData_hours === void 0 ? void 0 : _courseData_hours.trim()) || \"\",\n                programBy: ((_courseData_programBy = courseData.programBy) === null || _courseData_programBy === void 0 ? void 0 : _courseData_programBy.trim()) || \"Admin\",\n                lastUpdated: courseData.lastUpdated || new Date().toISOString(),\n                paymentLink: ((_courseData_paymentLink = courseData.paymentLink) === null || _courseData_paymentLink === void 0 ? void 0 : _courseData_paymentLink.trim()) || \"\",\n                backgroundImage: ((_courseData_backgroundImage = courseData.backgroundImage) === null || _courseData_backgroundImage === void 0 ? void 0 : _courseData_backgroundImage.trim()) || \"\",\n                certificateImage: ((_courseData_certificateImage = courseData.certificateImage) === null || _courseData_certificateImage === void 0 ? void 0 : _courseData_certificateImage.trim()) || \"\",\n                globalStatus: ((_courseData_globalStatus = courseData.globalStatus) === null || _courseData_globalStatus === void 0 ? void 0 : _courseData_globalStatus.trim()) || \"\",\n                startDate: ((_courseData_startDate = courseData.startDate) === null || _courseData_startDate === void 0 ? void 0 : _courseData_startDate.trim()) || \"\",\n                // Ensure toolsData has proper structure\n                toolsData: courseData.toolsData || {\n                    sectionTitle: \"\",\n                    category: \"\",\n                    toolsCount: \"0\",\n                    displayImage: \"\",\n                    tools: []\n                }\n            };\n            // Clean the data before sending\n            const cleanedData = cleanCourseData(courseWithMetadata);\n            console.log(\"Creating course with cleaned data:\", {\n                title: cleanedData.title,\n                status: cleanedData.status,\n                price: cleanedData.price\n            });\n            const docRef = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_2__.db, COLLECTION_NAME), cleanedData);\n            const createdCourse = {\n                ...cleanedData,\n                createdAt: new Date(),\n                updatedAt: new Date()\n            };\n            return {\n                success: true,\n                data: createdCourse\n            };\n        } catch (error) {\n            console.error(\"Error creating course:\", error);\n            const errorMessage = (0,_firebase__WEBPACK_IMPORTED_MODULE_2__.handleFirestoreError)(error);\n            return {\n                success: false,\n                error: errorMessage\n            };\n        }\n    }\n    // Get all courses with optional pagination and filtering\n    static async getAllCourses(options) {\n        try {\n            let q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_2__.db, COLLECTION_NAME));\n            // Add filters\n            if (options === null || options === void 0 ? void 0 : options.status) {\n                q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(q, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"status\", \"==\", options.status));\n            }\n            if (options === null || options === void 0 ? void 0 : options.category) {\n                q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(q, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"category\", \"==\", options.category));\n            }\n            // Add ordering\n            q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(q, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"createdAt\", \"desc\"));\n            // Add pagination\n            if (options === null || options === void 0 ? void 0 : options.pageSize) {\n                q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(q, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.limit)(options.pageSize));\n            }\n            if (options === null || options === void 0 ? void 0 : options.lastDoc) {\n                q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(q, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.startAfter)(options.lastDoc));\n            }\n            const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n            const courses = [];\n            querySnapshot.forEach((doc)=>{\n                var _data_createdAt, _data_updatedAt;\n                const data = doc.data();\n                const course = {\n                    ...data,\n                    createdAt: ((_data_createdAt = data.createdAt) === null || _data_createdAt === void 0 ? void 0 : _data_createdAt.toDate()) || new Date(),\n                    updatedAt: ((_data_updatedAt = data.updatedAt) === null || _data_updatedAt === void 0 ? void 0 : _data_updatedAt.toDate()) || new Date(),\n                    // Ensure required fields have default values\n                    rating: Number(data.rating) || 0,\n                    totalRatings: Number(data.totalRatings) || 0,\n                    enrolledStudents: Number(data.enrolledStudents) || 0,\n                    price: Number(data.price) || 0,\n                    originalPrice: Number(data.originalPrice) || 0,\n                    learningOutcomes: Array.isArray(data.learningOutcomes) ? data.learningOutcomes : [],\n                    features: Array.isArray(data.features) ? data.features : [],\n                    skills: Array.isArray(data.skills) ? data.skills : [],\n                    requirements: Array.isArray(data.requirements) ? data.requirements : [],\n                    module: Array.isArray(data.module) ? data.module : [],\n                    highlights: Array.isArray(data.highlights) ? data.highlights : [],\n                    project: Array.isArray(data.project) ? data.project : [],\n                    programFor: Array.isArray(data.programFor) ? data.programFor : [],\n                    toolsData: data.toolsData || {\n                        sectionTitle: \"\",\n                        category: \"\",\n                        toolsCount: \"0\",\n                        displayImage: \"\",\n                        tools: []\n                    }\n                };\n                // Apply search filter on client side (for simplicity)\n                if (options === null || options === void 0 ? void 0 : options.searchTerm) {\n                    const searchLower = options.searchTerm.toLowerCase();\n                    const matchesSearch = course.title.toLowerCase().includes(searchLower) || course.category.toLowerCase().includes(searchLower) || course.shortDescription.toLowerCase().includes(searchLower) || course.programBy.toLowerCase().includes(searchLower);\n                    if (matchesSearch) {\n                        courses.push(course);\n                    }\n                } else {\n                    courses.push(course);\n                }\n            });\n            return {\n                success: true,\n                data: courses,\n                pagination: {\n                    total: courses.length,\n                    page: 1,\n                    pages: 1\n                }\n            };\n        } catch (error) {\n            console.error(\"Error fetching courses:\", error);\n            const errorMessage = (0,_firebase__WEBPACK_IMPORTED_MODULE_2__.handleFirestoreError)(error);\n            return {\n                success: false,\n                error: errorMessage\n            };\n        }\n    }\n    // Get course by ID\n    static async getCourseById(courseId) {\n        try {\n            var _data_createdAt, _data_updatedAt;\n            if (!courseId || courseId.trim() === \"\") {\n                return {\n                    success: false,\n                    error: \"Course ID is required\"\n                };\n            }\n            const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_2__.db, COLLECTION_NAME), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"_id\", \"==\", courseId));\n            const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n            if (querySnapshot.empty) {\n                return {\n                    success: false,\n                    error: \"Course not found\"\n                };\n            }\n            const doc = querySnapshot.docs[0];\n            const data = doc.data();\n            const course = {\n                ...data,\n                createdAt: ((_data_createdAt = data.createdAt) === null || _data_createdAt === void 0 ? void 0 : _data_createdAt.toDate()) || new Date(),\n                updatedAt: ((_data_updatedAt = data.updatedAt) === null || _data_updatedAt === void 0 ? void 0 : _data_updatedAt.toDate()) || new Date(),\n                // Ensure required fields have default values\n                rating: Number(data.rating) || 0,\n                totalRatings: Number(data.totalRatings) || 0,\n                enrolledStudents: Number(data.enrolledStudents) || 0,\n                price: Number(data.price) || 0,\n                originalPrice: Number(data.originalPrice) || 0,\n                learningOutcomes: Array.isArray(data.learningOutcomes) ? data.learningOutcomes : [],\n                features: Array.isArray(data.features) ? data.features : [],\n                skills: Array.isArray(data.skills) ? data.skills : [],\n                requirements: Array.isArray(data.requirements) ? data.requirements : [],\n                module: Array.isArray(data.module) ? data.module : [],\n                highlights: Array.isArray(data.highlights) ? data.highlights : [],\n                project: Array.isArray(data.project) ? data.project : [],\n                programFor: Array.isArray(data.programFor) ? data.programFor : [],\n                toolsData: data.toolsData || {\n                    sectionTitle: \"\",\n                    category: \"\",\n                    toolsCount: \"0\",\n                    displayImage: \"\",\n                    tools: []\n                }\n            };\n            return {\n                success: true,\n                data: course\n            };\n        } catch (error) {\n            console.error(\"Error fetching course:\", error);\n            const errorMessage = (0,_firebase__WEBPACK_IMPORTED_MODULE_2__.handleFirestoreError)(error);\n            return {\n                success: false,\n                error: errorMessage\n            };\n        }\n    }\n    // Get course by slug\n    static async getCourseBySlug(slug) {\n        try {\n            var _data_createdAt, _data_updatedAt;\n            if (!slug || slug.trim() === \"\") {\n                return {\n                    success: false,\n                    error: \"Course slug is required\"\n                };\n            }\n            const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_2__.db, COLLECTION_NAME), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"slug\", \"==\", slug));\n            const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n            if (querySnapshot.empty) {\n                return {\n                    success: false,\n                    error: \"Course not found\"\n                };\n            }\n            const doc = querySnapshot.docs[0];\n            const data = doc.data();\n            const course = {\n                ...data,\n                createdAt: ((_data_createdAt = data.createdAt) === null || _data_createdAt === void 0 ? void 0 : _data_createdAt.toDate()) || new Date(),\n                updatedAt: ((_data_updatedAt = data.updatedAt) === null || _data_updatedAt === void 0 ? void 0 : _data_updatedAt.toDate()) || new Date()\n            };\n            return {\n                success: true,\n                data: course\n            };\n        } catch (error) {\n            console.error(\"Error fetching course by slug:\", error);\n            const errorMessage = (0,_firebase__WEBPACK_IMPORTED_MODULE_2__.handleFirestoreError)(error);\n            return {\n                success: false,\n                error: errorMessage\n            };\n        }\n    }\n    // Update course\n    static async updateCourse(courseId, courseData) {\n        try {\n            if (!courseId || courseId.trim() === \"\") {\n                return {\n                    success: false,\n                    error: \"Course ID is required\"\n                };\n            }\n            // Validate updated data if it contains required fields\n            if (courseData.title || courseData.shortDescription || courseData.category) {\n                const validation = validateCourseData({\n                    title: courseData.title || \"temp\",\n                    shortDescription: courseData.shortDescription || \"temp\",\n                    category: courseData.category || \"temp\",\n                    level: courseData.level || \"beginner\",\n                    language: courseData.language || \"temp\",\n                    duration: courseData.duration || \"temp\",\n                    hours: courseData.hours || \"temp\",\n                    price: courseData.price || 0,\n                    originalPrice: courseData.originalPrice || 0\n                });\n                if (!validation.isValid) {\n                    return {\n                        success: false,\n                        error: \"Validation failed: \".concat(validation.errors.join(\", \"))\n                    };\n                }\n            }\n            const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_2__.db, COLLECTION_NAME), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"_id\", \"==\", courseId));\n            const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n            if (querySnapshot.empty) {\n                return {\n                    success: false,\n                    error: \"Course not found\"\n                };\n            }\n            const docRef = querySnapshot.docs[0].ref;\n            const updateData = {\n                ...courseData,\n                updatedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)(),\n                lastUpdated: new Date().toISOString(),\n                // Ensure numeric fields are properly typed\n                ...courseData.rating !== undefined && {\n                    rating: Number(courseData.rating)\n                },\n                ...courseData.totalRatings !== undefined && {\n                    totalRatings: Number(courseData.totalRatings)\n                },\n                ...courseData.enrolledStudents !== undefined && {\n                    enrolledStudents: Number(courseData.enrolledStudents)\n                },\n                ...courseData.price !== undefined && {\n                    price: Number(courseData.price)\n                },\n                ...courseData.originalPrice !== undefined && {\n                    originalPrice: Number(courseData.originalPrice)\n                },\n                // Ensure arrays are properly filtered\n                ...courseData.learningOutcomes && {\n                    learningOutcomes: Array.isArray(courseData.learningOutcomes) ? courseData.learningOutcomes.filter((item)=>item && item.trim()) : []\n                },\n                ...courseData.features && {\n                    features: Array.isArray(courseData.features) ? courseData.features.filter((item)=>item && item.trim()) : []\n                },\n                ...courseData.skills && {\n                    skills: Array.isArray(courseData.skills) ? courseData.skills.filter((item)=>item && item.trim()) : []\n                },\n                ...courseData.requirements && {\n                    requirements: Array.isArray(courseData.requirements) ? courseData.requirements.filter((item)=>item && item.trim()) : []\n                },\n                // Update slug if title changed\n                ...courseData.title && {\n                    slug: courseData.title.toLowerCase().replace(/\\s+/g, \"-\").replace(/[^a-z0-9-]/g, \"\")\n                }\n            };\n            // Clean the data before sending\n            const cleanedData = cleanCourseData(updateData);\n            console.log(\"Updating course with cleaned data:\", {\n                courseId,\n                fieldsUpdated: Object.keys(cleanedData)\n            });\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(docRef, cleanedData);\n            // Fetch the updated course\n            const updatedCourseResponse = await this.getCourseById(courseId);\n            if (updatedCourseResponse.success) {\n                return updatedCourseResponse;\n            } else {\n                return {\n                    success: true,\n                    data: {\n                        ...courseData,\n                        _id: courseId,\n                        updatedAt: new Date()\n                    }\n                };\n            }\n        } catch (error) {\n            console.error(\"Error updating course:\", error);\n            const errorMessage = (0,_firebase__WEBPACK_IMPORTED_MODULE_2__.handleFirestoreError)(error);\n            return {\n                success: false,\n                error: errorMessage\n            };\n        }\n    }\n    // Delete course\n    static async deleteCourse(courseId) {\n        try {\n            if (!courseId || courseId.trim() === \"\") {\n                return {\n                    success: false,\n                    error: \"Course ID is required\"\n                };\n            }\n            const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_2__.db, COLLECTION_NAME), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"_id\", \"==\", courseId));\n            const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n            if (querySnapshot.empty) {\n                return {\n                    success: false,\n                    error: \"Course not found\"\n                };\n            }\n            const docRef = querySnapshot.docs[0].ref;\n            const courseData = querySnapshot.docs[0].data();\n            // Delete associated images from storage\n            if (courseData.backgroundImage) {\n                try {\n                    await this.deleteImage(courseData.backgroundImage);\n                } catch (imageError) {\n                    console.warn(\"Failed to delete background image:\", imageError);\n                }\n            }\n            if (courseData.certificateImage) {\n                try {\n                    await this.deleteImage(courseData.certificateImage);\n                } catch (imageError) {\n                    console.warn(\"Failed to delete certificate image:\", imageError);\n                }\n            }\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.deleteDoc)(docRef);\n            console.log(\"Course deleted successfully:\", courseId);\n            return {\n                success: true\n            };\n        } catch (error) {\n            console.error(\"Error deleting course:\", error);\n            const errorMessage = (0,_firebase__WEBPACK_IMPORTED_MODULE_2__.handleFirestoreError)(error);\n            return {\n                success: false,\n                error: errorMessage\n            };\n        }\n    }\n    // Bulk delete courses\n    static async deleteCourses(courseIds) {\n        try {\n            if (!courseIds || courseIds.length === 0) {\n                return {\n                    success: false,\n                    error: \"Course IDs are required\"\n                };\n            }\n            const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.writeBatch)(_firebase__WEBPACK_IMPORTED_MODULE_2__.db);\n            let deletedCount = 0;\n            for (const courseId of courseIds){\n                const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_2__.db, COLLECTION_NAME), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"_id\", \"==\", courseId));\n                const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n                if (!querySnapshot.empty) {\n                    const docRef = querySnapshot.docs[0].ref;\n                    batch.delete(docRef);\n                    deletedCount++;\n                }\n            }\n            if (deletedCount === 0) {\n                return {\n                    success: false,\n                    error: \"No courses found to delete\"\n                };\n            }\n            await batch.commit();\n            return {\n                success: true,\n                deletedCount\n            };\n        } catch (error) {\n            console.error(\"Error bulk deleting courses:\", error);\n            const errorMessage = (0,_firebase__WEBPACK_IMPORTED_MODULE_2__.handleFirestoreError)(error);\n            return {\n                success: false,\n                error: errorMessage\n            };\n        }\n    }\n    // Upload image with better error handling and optimization\n    static async uploadImage(file, path) {\n        try {\n            var _file_name_split_pop;\n            // Validate file\n            if (!file) {\n                return {\n                    success: false,\n                    error: \"No file provided\"\n                };\n            }\n            if (file.size > 5 * 1024 * 1024) {\n                return {\n                    success: false,\n                    error: \"File size must be less than 5MB\"\n                };\n            }\n            const allowedTypes = [\n                \"image/jpeg\",\n                \"image/jpg\",\n                \"image/png\",\n                \"image/webp\",\n                \"image/gif\"\n            ];\n            if (!allowedTypes.includes(file.type)) {\n                return {\n                    success: false,\n                    error: \"Only JPEG, PNG, WebP, and GIF images are allowed\"\n                };\n            }\n            // Generate unique filename\n            const timestamp = Date.now();\n            const randomString = Math.random().toString(36).substring(2, 15);\n            const fileExtension = ((_file_name_split_pop = file.name.split(\".\").pop()) === null || _file_name_split_pop === void 0 ? void 0 : _file_name_split_pop.toLowerCase()) || \"jpg\";\n            const filename = \"\".concat(timestamp, \"_\").concat(randomString, \".\").concat(fileExtension);\n            const storageRef = (0,firebase_storage__WEBPACK_IMPORTED_MODULE_1__.ref)(_firebase__WEBPACK_IMPORTED_MODULE_2__.storage, \"\".concat(path, \"/\").concat(filename));\n            console.log(\"Uploading image:\", filename, \"Size:\", file.size);\n            // Upload with metadata\n            const metadata = {\n                contentType: file.type,\n                customMetadata: {\n                    uploadedAt: new Date().toISOString(),\n                    originalName: file.name\n                }\n            };\n            const snapshot = await (0,firebase_storage__WEBPACK_IMPORTED_MODULE_1__.uploadBytes)(storageRef, file, metadata);\n            const downloadURL = await (0,firebase_storage__WEBPACK_IMPORTED_MODULE_1__.getDownloadURL)(snapshot.ref);\n            console.log(\"Image uploaded successfully:\", downloadURL);\n            return {\n                success: true,\n                url: downloadURL\n            };\n        } catch (error) {\n            console.error(\"Error uploading image:\", error);\n            return {\n                success: false,\n                error: error.message || \"Failed to upload image\"\n            };\n        }\n    }\n    // Delete image from storage\n    static async deleteImage(imageUrl) {\n        try {\n            if (!imageUrl || !imageUrl.includes(\"firebase\")) {\n                return {\n                    success: false,\n                    error: \"Invalid image URL\"\n                };\n            }\n            const imageRef = (0,firebase_storage__WEBPACK_IMPORTED_MODULE_1__.ref)(_firebase__WEBPACK_IMPORTED_MODULE_2__.storage, imageUrl);\n            await (0,firebase_storage__WEBPACK_IMPORTED_MODULE_1__.deleteObject)(imageRef);\n            console.log(\"Image deleted successfully:\", imageUrl);\n            return {\n                success: true\n            };\n        } catch (error) {\n            console.error(\"Error deleting image:\", error);\n            return {\n                success: false,\n                error: error.message || \"Failed to delete image\"\n            };\n        }\n    }\n    // Get courses by category\n    static async getCoursesByCategory(category, pageSize) {\n        try {\n            if (!category || category.trim() === \"\") {\n                return {\n                    success: false,\n                    error: \"Category is required\"\n                };\n            }\n            let q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_2__.db, COLLECTION_NAME), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"category\", \"==\", category), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"status\", \"==\", \"published\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"createdAt\", \"desc\"));\n            if (pageSize) {\n                q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(q, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.limit)(pageSize));\n            }\n            const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n            const courses = [];\n            querySnapshot.forEach((doc)=>{\n                var _data_createdAt, _data_updatedAt;\n                const data = doc.data();\n                courses.push({\n                    ...data,\n                    createdAt: ((_data_createdAt = data.createdAt) === null || _data_createdAt === void 0 ? void 0 : _data_createdAt.toDate()) || new Date(),\n                    updatedAt: ((_data_updatedAt = data.updatedAt) === null || _data_updatedAt === void 0 ? void 0 : _data_updatedAt.toDate()) || new Date()\n                });\n            });\n            return {\n                success: true,\n                data: courses\n            };\n        } catch (error) {\n            console.error(\"Error fetching courses by category:\", error);\n            const errorMessage = (0,_firebase__WEBPACK_IMPORTED_MODULE_2__.handleFirestoreError)(error);\n            return {\n                success: false,\n                error: errorMessage\n            };\n        }\n    }\n    // Get published courses only\n    static async getPublishedCourses(pageSize) {\n        return this.getAllCourses({\n            status: \"published\",\n            pageSize: pageSize || 50\n        });\n    }\n    // Get draft courses only\n    static async getDraftCourses(pageSize) {\n        return this.getAllCourses({\n            status: \"draft\",\n            pageSize: pageSize || 50\n        });\n    }\n    // Search courses\n    static async searchCourses(searchTerm, options) {\n        try {\n            if (!searchTerm || searchTerm.trim() === \"\") {\n                return this.getAllCourses(options);\n            }\n            return this.getAllCourses({\n                ...options,\n                searchTerm: searchTerm.trim()\n            });\n        } catch (error) {\n            console.error(\"Error searching courses:\", error);\n            const errorMessage = (0,_firebase__WEBPACK_IMPORTED_MODULE_2__.handleFirestoreError)(error);\n            return {\n                success: false,\n                error: errorMessage\n            };\n        }\n    }\n    // Get course statistics\n    static async getCourseStats() {\n        try {\n            const response = await this.getAllCourses();\n            if (!response.success || !response.data) {\n                return {\n                    success: false,\n                    error: response.error || \"Failed to fetch courses for statistics\"\n                };\n            }\n            const courses = response.data;\n            const stats = {\n                totalCourses: courses.length,\n                publishedCourses: courses.filter((c)=>c.status === \"published\").length,\n                draftCourses: courses.filter((c)=>c.status === \"draft\").length,\n                totalStudents: courses.reduce((sum, c)=>sum + (c.enrolledStudents || 0), 0),\n                totalRevenue: courses.reduce((sum, c)=>sum + (c.price || 0) * (c.enrolledStudents || 0), 0),\n                categories: {},\n                levels: {}\n            };\n            // Calculate category distribution\n            courses.forEach((course)=>{\n                if (course.category) {\n                    stats.categories[course.category] = (stats.categories[course.category] || 0) + 1;\n                }\n            });\n            // Calculate level distribution\n            courses.forEach((course)=>{\n                if (course.level) {\n                    stats.levels[course.level] = (stats.levels[course.level] || 0) + 1;\n                }\n            });\n            return {\n                success: true,\n                data: stats\n            };\n        } catch (error) {\n            console.error(\"Error fetching course statistics:\", error);\n            const errorMessage = (0,_firebase__WEBPACK_IMPORTED_MODULE_2__.handleFirestoreError)(error);\n            return {\n                success: false,\n                error: errorMessage\n            };\n        }\n    }\n    // Update course status (publish/unpublish)\n    static async updateCourseStatus(courseId, status) {\n        try {\n            if (!courseId || courseId.trim() === \"\") {\n                return {\n                    success: false,\n                    error: \"Course ID is required\"\n                };\n            }\n            if (![\n                \"draft\",\n                \"published\"\n            ].includes(status)) {\n                return {\n                    success: false,\n                    error: 'Status must be either \"draft\" or \"published\"'\n                };\n            }\n            return this.updateCourse(courseId, {\n                status,\n                lastUpdated: new Date().toISOString()\n            });\n        } catch (error) {\n            console.error(\"Error updating course status:\", error);\n            const errorMessage = (0,_firebase__WEBPACK_IMPORTED_MODULE_2__.handleFirestoreError)(error);\n            return {\n                success: false,\n                error: errorMessage\n            };\n        }\n    }\n    // Duplicate course\n    static async duplicateCourse(courseId, newTitle) {\n        try {\n            const originalCourse = await this.getCourseById(courseId);\n            if (!originalCourse.success || !originalCourse.data) {\n                return {\n                    success: false,\n                    error: originalCourse.error || \"Original course not found\"\n                };\n            }\n            const course = originalCourse.data;\n            const duplicatedCourse = {\n                ...course,\n                title: newTitle || \"\".concat(course.title, \" (Copy)\"),\n                slug: (newTitle || \"\".concat(course.title, \" (Copy)\")).toLowerCase().replace(/\\s+/g, \"-\").replace(/[^a-z0-9-]/g, \"\"),\n                status: \"draft\",\n                enrolledStudents: 0,\n                rating: 0,\n                totalRatings: 0,\n                lastUpdated: new Date().toISOString()\n            };\n            // Remove fields that shouldn't be duplicated\n            delete duplicatedCourse._id;\n            delete duplicatedCourse.createdAt;\n            delete duplicatedCourse.updatedAt;\n            return this.createCourse(duplicatedCourse);\n        } catch (error) {\n            console.error(\"Error duplicating course:\", error);\n            const errorMessage = (0,_firebase__WEBPACK_IMPORTED_MODULE_2__.handleFirestoreError)(error);\n            return {\n                success: false,\n                error: errorMessage\n            };\n        }\n    }\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvY291cnNlU2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQWdCNEI7QUFDc0Q7QUFDbkI7QUFFM0I7QUFFcEMsTUFBTXNCLGtCQUFrQjtBQUV4Qiw0REFBNEQ7QUFDNUQsTUFBTUMsa0JBQWtCLENBQUNDO0lBQ3ZCLE1BQU1DLFVBQWUsQ0FBQztJQUV0QixLQUFLLE1BQU0sQ0FBQ0MsS0FBS0MsTUFBTSxJQUFJQyxPQUFPQyxPQUFPLENBQUNMLE1BQU87UUFDL0Msc0NBQXNDO1FBQ3RDLElBQUlHLFVBQVVHLGFBQWEsT0FBT0gsVUFBVSxZQUFZO1lBQ3RELDRDQUE0QztZQUM1QyxJQUFJQSxVQUFVLE1BQU07Z0JBQ2xCLDZDQUE2QztnQkFDN0MsSUFBSTtvQkFBQztvQkFBZTtvQkFBbUI7b0JBQW9CO29CQUFnQjtpQkFBWSxDQUFDSSxRQUFRLENBQUNMLE1BQU07b0JBQ3JHRCxPQUFPLENBQUNDLElBQUksR0FBRztnQkFDakIsT0FBTyxJQUFJO29CQUFDO29CQUFvQjtvQkFBWTtvQkFBVTtvQkFBZ0I7b0JBQVU7b0JBQWM7b0JBQVc7aUJBQWEsQ0FBQ0ssUUFBUSxDQUFDTCxNQUFNO29CQUNwSUQsT0FBTyxDQUFDQyxJQUFJLEdBQUcsRUFBRTtnQkFDbkIsT0FBTyxJQUFJO29CQUFDO29CQUFVO29CQUFnQjtvQkFBb0I7b0JBQVM7aUJBQWdCLENBQUNLLFFBQVEsQ0FBQ0wsTUFBTTtvQkFDakdELE9BQU8sQ0FBQ0MsSUFBSSxHQUFHO2dCQUNqQixPQUFPO29CQUNMRCxPQUFPLENBQUNDLElBQUksR0FBRztnQkFDakI7WUFDRixPQUFPLElBQUlNLE1BQU1DLE9BQU8sQ0FBQ04sUUFBUTtnQkFDL0IsdUNBQXVDO2dCQUN2Q0YsT0FBTyxDQUFDQyxJQUFJLEdBQUdDLE1BQU1PLE1BQU0sQ0FBQ0MsQ0FBQUEsT0FBUUEsU0FBUyxRQUFRQSxTQUFTTDtZQUNoRSxPQUFPLElBQUksT0FBT0gsVUFBVSxVQUFVO2dCQUNwQyx1Q0FBdUM7Z0JBQ3ZDRixPQUFPLENBQUNDLElBQUksR0FBR0MsTUFBTVMsSUFBSTtZQUMzQixPQUFPLElBQUksT0FBT1QsVUFBVSxZQUFZQSxNQUFNVSxXQUFXLEtBQUtULFFBQVE7Z0JBQ3BFLG1DQUFtQztnQkFDbkNILE9BQU8sQ0FBQ0MsSUFBSSxHQUFHSCxnQkFBZ0JJO1lBQ2pDLE9BQU87Z0JBQ0xGLE9BQU8sQ0FBQ0MsSUFBSSxHQUFHQztZQUNqQjtRQUNGO0lBQ0Y7SUFFQSxPQUFPRjtBQUNUO0FBRUEsMENBQTBDO0FBQzFDLE1BQU1hLHFCQUFxQixDQUFDQztJQUMxQixNQUFNQyxTQUFtQixFQUFFO0lBRTNCLElBQUksQ0FBQ0QsV0FBV0UsS0FBSyxJQUFJRixXQUFXRSxLQUFLLENBQUNMLElBQUksR0FBR00sTUFBTSxLQUFLLEdBQUc7UUFDN0RGLE9BQU9HLElBQUksQ0FBQztJQUNkO0lBRUEsSUFBSSxDQUFDSixXQUFXSyxnQkFBZ0IsSUFBSUwsV0FBV0ssZ0JBQWdCLENBQUNSLElBQUksR0FBR00sTUFBTSxLQUFLLEdBQUc7UUFDbkZGLE9BQU9HLElBQUksQ0FBQztJQUNkO0lBRUEsSUFBSSxDQUFDSixXQUFXTSxRQUFRLElBQUlOLFdBQVdNLFFBQVEsQ0FBQ1QsSUFBSSxHQUFHTSxNQUFNLEtBQUssR0FBRztRQUNuRUYsT0FBT0csSUFBSSxDQUFDO0lBQ2Q7SUFFQSxJQUFJLENBQUNKLFdBQVdPLEtBQUssSUFBSSxDQUFDO1FBQUM7UUFBWTtRQUFnQjtLQUFXLENBQUNmLFFBQVEsQ0FBQ1EsV0FBV08sS0FBSyxHQUFHO1FBQzdGTixPQUFPRyxJQUFJLENBQUM7SUFDZDtJQUVBLElBQUksQ0FBQ0osV0FBV1EsUUFBUSxJQUFJUixXQUFXUSxRQUFRLENBQUNYLElBQUksR0FBR00sTUFBTSxLQUFLLEdBQUc7UUFDbkVGLE9BQU9HLElBQUksQ0FBQztJQUNkO0lBRUEsSUFBSSxDQUFDSixXQUFXUyxRQUFRLElBQUlULFdBQVdTLFFBQVEsQ0FBQ1osSUFBSSxHQUFHTSxNQUFNLEtBQUssR0FBRztRQUNuRUYsT0FBT0csSUFBSSxDQUFDO0lBQ2Q7SUFFQSxJQUFJLENBQUNKLFdBQVdVLEtBQUssSUFBSVYsV0FBV1UsS0FBSyxDQUFDYixJQUFJLEdBQUdNLE1BQU0sS0FBSyxHQUFHO1FBQzdERixPQUFPRyxJQUFJLENBQUM7SUFDZDtJQUVBLElBQUlKLFdBQVdXLEtBQUssR0FBRyxLQUFLQyxNQUFNWixXQUFXVyxLQUFLLEdBQUc7UUFDbkRWLE9BQU9HLElBQUksQ0FBQztJQUNkO0lBRUEsSUFBSUosV0FBV2EsYUFBYSxHQUFHLEtBQUtELE1BQU1aLFdBQVdhLGFBQWEsR0FBRztRQUNuRVosT0FBT0csSUFBSSxDQUFDO0lBQ2Q7SUFFQSxJQUFJSixXQUFXYSxhQUFhLEdBQUcsS0FBS2IsV0FBV1csS0FBSyxHQUFHWCxXQUFXYSxhQUFhLEVBQUU7UUFDL0VaLE9BQU9HLElBQUksQ0FBQztJQUNkO0lBRUEsT0FBTztRQUNMVSxTQUFTYixPQUFPRSxNQUFNLEtBQUs7UUFDM0JGO0lBQ0Y7QUFDRjtBQUVPLE1BQU1jO0lBQ1gsc0JBQXNCO0lBQ3RCLGFBQWFDLGFBQWFoQixVQUFxQixFQUEyQjtRQUN4RSxJQUFJO2dCQWtDT0EsbUJBQ0RBLGtCQUEyQkEsb0JBQ2ZBLDhCQUNSQSxzQkFFQUEsc0JBQ0FBLHNCQUNIQSxtQkFDSUEsdUJBRUVBLHlCQUNJQSw2QkFDQ0EsOEJBQ0pBLDBCQUNIQTtZQS9DYix1QkFBdUI7WUFDdkIsTUFBTWlCLGFBQWFsQixtQkFBbUJDO1lBQ3RDLElBQUksQ0FBQ2lCLFdBQVdILE9BQU8sRUFBRTtnQkFDdkIsT0FBTztvQkFDTEksU0FBUztvQkFDVEMsT0FBTyxzQkFBbUQsT0FBN0JGLFdBQVdoQixNQUFNLENBQUNtQixJQUFJLENBQUM7Z0JBQ3REO1lBQ0Y7WUFFQSxNQUFNQyxXQUFXdkMsZ0RBQU1BO1lBRXZCLE1BQU13QyxxQkFBcUI7Z0JBQ3pCLEdBQUd0QixVQUFVO2dCQUNidUIsS0FBS0Y7Z0JBQ0xHLFdBQVd4RCxtRUFBZUE7Z0JBQzFCeUQsV0FBV3pELG1FQUFlQTtnQkFDMUIwRCxRQUFRMUIsV0FBVzBCLE1BQU0sSUFBSTtnQkFDN0Isa0NBQWtDO2dCQUNsQ0MsUUFBUUMsT0FBTzVCLFdBQVcyQixNQUFNLEtBQUs7Z0JBQ3JDRSxjQUFjRCxPQUFPNUIsV0FBVzZCLFlBQVksS0FBSztnQkFDakRDLGtCQUFrQkYsT0FBTzVCLFdBQVc4QixnQkFBZ0IsS0FBSztnQkFDekRuQixPQUFPaUIsT0FBTzVCLFdBQVdXLEtBQUssS0FBSztnQkFDbkNFLGVBQWVlLE9BQU81QixXQUFXYSxhQUFhLEtBQUs7Z0JBQ25ELHlDQUF5QztnQkFDekNrQixrQkFBa0J0QyxNQUFNQyxPQUFPLENBQUNNLFdBQVcrQixnQkFBZ0IsSUFBSS9CLFdBQVcrQixnQkFBZ0IsQ0FBQ3BDLE1BQU0sQ0FBQ0MsQ0FBQUEsT0FBUUEsUUFBUUEsS0FBS0MsSUFBSSxNQUFNLEVBQUU7Z0JBQ25JbUMsVUFBVXZDLE1BQU1DLE9BQU8sQ0FBQ00sV0FBV2dDLFFBQVEsSUFBSWhDLFdBQVdnQyxRQUFRLENBQUNyQyxNQUFNLENBQUNDLENBQUFBLE9BQVFBLFFBQVFBLEtBQUtDLElBQUksTUFBTSxFQUFFO2dCQUMzR29DLFFBQVF4QyxNQUFNQyxPQUFPLENBQUNNLFdBQVdpQyxNQUFNLElBQUlqQyxXQUFXaUMsTUFBTSxDQUFDdEMsTUFBTSxDQUFDQyxDQUFBQSxPQUFRQSxRQUFRQSxLQUFLQyxJQUFJLE1BQU0sRUFBRTtnQkFDckdxQyxjQUFjekMsTUFBTUMsT0FBTyxDQUFDTSxXQUFXa0MsWUFBWSxJQUFJbEMsV0FBV2tDLFlBQVksQ0FBQ3ZDLE1BQU0sQ0FBQ0MsQ0FBQUEsT0FBUUEsUUFBUUEsS0FBS0MsSUFBSSxNQUFNLEVBQUU7Z0JBQ3ZIc0MsUUFBUTFDLE1BQU1DLE9BQU8sQ0FBQ00sV0FBV21DLE1BQU0sSUFBSW5DLFdBQVdtQyxNQUFNLEdBQUcsRUFBRTtnQkFDakVDLFlBQVkzQyxNQUFNQyxPQUFPLENBQUNNLFdBQVdvQyxVQUFVLElBQUlwQyxXQUFXb0MsVUFBVSxHQUFHLEVBQUU7Z0JBQzdFQyxTQUFTNUMsTUFBTUMsT0FBTyxDQUFDTSxXQUFXcUMsT0FBTyxJQUFJckMsV0FBV3FDLE9BQU8sR0FBRyxFQUFFO2dCQUNwRUMsWUFBWTdDLE1BQU1DLE9BQU8sQ0FBQ00sV0FBV3NDLFVBQVUsSUFBSXRDLFdBQVdzQyxVQUFVLEdBQUcsRUFBRTtnQkFDN0UsbUNBQW1DO2dCQUNuQ3BDLE9BQU9GLEVBQUFBLG9CQUFBQSxXQUFXRSxLQUFLLGNBQWhCRix3Q0FBQUEsa0JBQWtCSCxJQUFJLE9BQU07Z0JBQ25DMEMsTUFBTXZDLEVBQUFBLG1CQUFBQSxXQUFXdUMsSUFBSSxjQUFmdkMsdUNBQUFBLGlCQUFpQkgsSUFBSSxTQUFNRyxxQkFBQUEsV0FBV0UsS0FBSyxjQUFoQkYseUNBQUFBLG1CQUFrQndDLFdBQVcsR0FBR0MsT0FBTyxDQUFDLFFBQVEsS0FBS0EsT0FBTyxDQUFDLGVBQWUsUUFBTztnQkFDcEhwQyxrQkFBa0JMLEVBQUFBLCtCQUFBQSxXQUFXSyxnQkFBZ0IsY0FBM0JMLG1EQUFBQSw2QkFBNkJILElBQUksT0FBTTtnQkFDekRTLFVBQVVOLEVBQUFBLHVCQUFBQSxXQUFXTSxRQUFRLGNBQW5CTiwyQ0FBQUEscUJBQXFCSCxJQUFJLE9BQU07Z0JBQ3pDVSxPQUFPUCxXQUFXTyxLQUFLLElBQUk7Z0JBQzNCQyxVQUFVUixFQUFBQSx1QkFBQUEsV0FBV1EsUUFBUSxjQUFuQlIsMkNBQUFBLHFCQUFxQkgsSUFBSSxPQUFNO2dCQUN6Q1ksVUFBVVQsRUFBQUEsdUJBQUFBLFdBQVdTLFFBQVEsY0FBbkJULDJDQUFBQSxxQkFBcUJILElBQUksT0FBTTtnQkFDekNhLE9BQU9WLEVBQUFBLG9CQUFBQSxXQUFXVSxLQUFLLGNBQWhCVix3Q0FBQUEsa0JBQWtCSCxJQUFJLE9BQU07Z0JBQ25DNkMsV0FBVzFDLEVBQUFBLHdCQUFBQSxXQUFXMEMsU0FBUyxjQUFwQjFDLDRDQUFBQSxzQkFBc0JILElBQUksT0FBTTtnQkFDM0M4QyxhQUFhM0MsV0FBVzJDLFdBQVcsSUFBSSxJQUFJQyxPQUFPQyxXQUFXO2dCQUM3REMsYUFBYTlDLEVBQUFBLDBCQUFBQSxXQUFXOEMsV0FBVyxjQUF0QjlDLDhDQUFBQSx3QkFBd0JILElBQUksT0FBTTtnQkFDL0NrRCxpQkFBaUIvQyxFQUFBQSw4QkFBQUEsV0FBVytDLGVBQWUsY0FBMUIvQyxrREFBQUEsNEJBQTRCSCxJQUFJLE9BQU07Z0JBQ3ZEbUQsa0JBQWtCaEQsRUFBQUEsK0JBQUFBLFdBQVdnRCxnQkFBZ0IsY0FBM0JoRCxtREFBQUEsNkJBQTZCSCxJQUFJLE9BQU07Z0JBQ3pEb0QsY0FBY2pELEVBQUFBLDJCQUFBQSxXQUFXaUQsWUFBWSxjQUF2QmpELCtDQUFBQSx5QkFBeUJILElBQUksT0FBTTtnQkFDakRxRCxXQUFXbEQsRUFBQUEsd0JBQUFBLFdBQVdrRCxTQUFTLGNBQXBCbEQsNENBQUFBLHNCQUFzQkgsSUFBSSxPQUFNO2dCQUMzQyx3Q0FBd0M7Z0JBQ3hDc0QsV0FBV25ELFdBQVdtRCxTQUFTLElBQUk7b0JBQ2pDQyxjQUFjO29CQUNkOUMsVUFBVTtvQkFDVitDLFlBQVk7b0JBQ1pDLGNBQWM7b0JBQ2RDLE9BQU8sRUFBRTtnQkFDWDtZQUNGO1lBRUEsZ0NBQWdDO1lBQ2hDLE1BQU1DLGNBQWN4RSxnQkFBZ0JzQztZQUVwQ21DLFFBQVFDLEdBQUcsQ0FBQyxzQ0FBc0M7Z0JBQ2hEeEQsT0FBT3NELFlBQVl0RCxLQUFLO2dCQUN4QndCLFFBQVE4QixZQUFZOUIsTUFBTTtnQkFDMUJmLE9BQU82QyxZQUFZN0MsS0FBSztZQUMxQjtZQUVBLE1BQU1nRCxTQUFTLE1BQU1qRywwREFBTUEsQ0FBQ0QsOERBQVVBLENBQUNpQix5Q0FBRUEsRUFBRUssa0JBQWtCeUU7WUFFN0QsTUFBTUksZ0JBQXdCO2dCQUM1QixHQUFHSixXQUFXO2dCQUNkaEMsV0FBVyxJQUFJb0I7Z0JBQ2ZuQixXQUFXLElBQUltQjtZQUNqQjtZQUVBLE9BQU87Z0JBQ0wxQixTQUFTO2dCQUNUakMsTUFBTTJFO1lBQ1I7UUFDRixFQUFFLE9BQU96QyxPQUFZO1lBQ25Cc0MsUUFBUXRDLEtBQUssQ0FBQywwQkFBMEJBO1lBQ3hDLE1BQU0wQyxlQUFlakYsK0RBQW9CQSxDQUFDdUM7WUFDMUMsT0FBTztnQkFDTEQsU0FBUztnQkFDVEMsT0FBTzBDO1lBQ1Q7UUFDRjtJQUNGO0lBRUEseURBQXlEO0lBQ3pELGFBQWFDLGNBQWNDLE9BTTFCLEVBQTRCO1FBQzNCLElBQUk7WUFDRixJQUFJQyxJQUFJbEcseURBQUtBLENBQUNMLDhEQUFVQSxDQUFDaUIseUNBQUVBLEVBQUVLO1lBRTdCLGNBQWM7WUFDZCxJQUFJZ0Ysb0JBQUFBLDhCQUFBQSxRQUFTckMsTUFBTSxFQUFFO2dCQUNuQnNDLElBQUlsRyx5REFBS0EsQ0FBQ2tHLEdBQUcvRix5REFBS0EsQ0FBQyxVQUFVLE1BQU04RixRQUFRckMsTUFBTTtZQUNuRDtZQUVBLElBQUlxQyxvQkFBQUEsOEJBQUFBLFFBQVN6RCxRQUFRLEVBQUU7Z0JBQ3JCMEQsSUFBSWxHLHlEQUFLQSxDQUFDa0csR0FBRy9GLHlEQUFLQSxDQUFDLFlBQVksTUFBTThGLFFBQVF6RCxRQUFRO1lBQ3ZEO1lBRUEsZUFBZTtZQUNmMEQsSUFBSWxHLHlEQUFLQSxDQUFDa0csR0FBR2pHLDJEQUFPQSxDQUFDLGFBQWE7WUFFbEMsaUJBQWlCO1lBQ2pCLElBQUlnRyxvQkFBQUEsOEJBQUFBLFFBQVNFLFFBQVEsRUFBRTtnQkFDckJELElBQUlsRyx5REFBS0EsQ0FBQ2tHLEdBQUc1Rix5REFBY0EsQ0FBQzJGLFFBQVFFLFFBQVE7WUFDOUM7WUFFQSxJQUFJRixvQkFBQUEsOEJBQUFBLFFBQVNHLE9BQU8sRUFBRTtnQkFDcEJGLElBQUlsRyx5REFBS0EsQ0FBQ2tHLEdBQUczRiw4REFBVUEsQ0FBQzBGLFFBQVFHLE9BQU87WUFDekM7WUFFQSxNQUFNQyxnQkFBZ0IsTUFBTXRHLDJEQUFPQSxDQUFDbUc7WUFFcEMsTUFBTUksVUFBb0IsRUFBRTtZQUM1QkQsY0FBY0UsT0FBTyxDQUFDLENBQUNDO29CQUlSckYsaUJBQ0FBO2dCQUpiLE1BQU1BLE9BQU9xRixJQUFJckYsSUFBSTtnQkFDckIsTUFBTXNGLFNBQWlCO29CQUNyQixHQUFHdEYsSUFBSTtvQkFDUHVDLFdBQVd2QyxFQUFBQSxrQkFBQUEsS0FBS3VDLFNBQVMsY0FBZHZDLHNDQUFBQSxnQkFBZ0J1RixNQUFNLE9BQU0sSUFBSTVCO29CQUMzQ25CLFdBQVd4QyxFQUFBQSxrQkFBQUEsS0FBS3dDLFNBQVMsY0FBZHhDLHNDQUFBQSxnQkFBZ0J1RixNQUFNLE9BQU0sSUFBSTVCO29CQUMzQyw2Q0FBNkM7b0JBQzdDakIsUUFBUUMsT0FBTzNDLEtBQUswQyxNQUFNLEtBQUs7b0JBQy9CRSxjQUFjRCxPQUFPM0MsS0FBSzRDLFlBQVksS0FBSztvQkFDM0NDLGtCQUFrQkYsT0FBTzNDLEtBQUs2QyxnQkFBZ0IsS0FBSztvQkFDbkRuQixPQUFPaUIsT0FBTzNDLEtBQUswQixLQUFLLEtBQUs7b0JBQzdCRSxlQUFlZSxPQUFPM0MsS0FBSzRCLGFBQWEsS0FBSztvQkFDN0NrQixrQkFBa0J0QyxNQUFNQyxPQUFPLENBQUNULEtBQUs4QyxnQkFBZ0IsSUFBSTlDLEtBQUs4QyxnQkFBZ0IsR0FBRyxFQUFFO29CQUNuRkMsVUFBVXZDLE1BQU1DLE9BQU8sQ0FBQ1QsS0FBSytDLFFBQVEsSUFBSS9DLEtBQUsrQyxRQUFRLEdBQUcsRUFBRTtvQkFDM0RDLFFBQVF4QyxNQUFNQyxPQUFPLENBQUNULEtBQUtnRCxNQUFNLElBQUloRCxLQUFLZ0QsTUFBTSxHQUFHLEVBQUU7b0JBQ3JEQyxjQUFjekMsTUFBTUMsT0FBTyxDQUFDVCxLQUFLaUQsWUFBWSxJQUFJakQsS0FBS2lELFlBQVksR0FBRyxFQUFFO29CQUN2RUMsUUFBUTFDLE1BQU1DLE9BQU8sQ0FBQ1QsS0FBS2tELE1BQU0sSUFBSWxELEtBQUtrRCxNQUFNLEdBQUcsRUFBRTtvQkFDckRDLFlBQVkzQyxNQUFNQyxPQUFPLENBQUNULEtBQUttRCxVQUFVLElBQUluRCxLQUFLbUQsVUFBVSxHQUFHLEVBQUU7b0JBQ2pFQyxTQUFTNUMsTUFBTUMsT0FBTyxDQUFDVCxLQUFLb0QsT0FBTyxJQUFJcEQsS0FBS29ELE9BQU8sR0FBRyxFQUFFO29CQUN4REMsWUFBWTdDLE1BQU1DLE9BQU8sQ0FBQ1QsS0FBS3FELFVBQVUsSUFBSXJELEtBQUtxRCxVQUFVLEdBQUcsRUFBRTtvQkFDakVhLFdBQVdsRSxLQUFLa0UsU0FBUyxJQUFJO3dCQUMzQkMsY0FBYzt3QkFDZDlDLFVBQVU7d0JBQ1YrQyxZQUFZO3dCQUNaQyxjQUFjO3dCQUNkQyxPQUFPLEVBQUU7b0JBQ1g7Z0JBQ0Y7Z0JBRUEsc0RBQXNEO2dCQUN0RCxJQUFJUSxvQkFBQUEsOEJBQUFBLFFBQVNVLFVBQVUsRUFBRTtvQkFDdkIsTUFBTUMsY0FBY1gsUUFBUVUsVUFBVSxDQUFDakMsV0FBVztvQkFDbEQsTUFBTW1DLGdCQUNKSixPQUFPckUsS0FBSyxDQUFDc0MsV0FBVyxHQUFHaEQsUUFBUSxDQUFDa0YsZ0JBQ3BDSCxPQUFPakUsUUFBUSxDQUFDa0MsV0FBVyxHQUFHaEQsUUFBUSxDQUFDa0YsZ0JBQ3ZDSCxPQUFPbEUsZ0JBQWdCLENBQUNtQyxXQUFXLEdBQUdoRCxRQUFRLENBQUNrRixnQkFDL0NILE9BQU83QixTQUFTLENBQUNGLFdBQVcsR0FBR2hELFFBQVEsQ0FBQ2tGO29CQUUxQyxJQUFJQyxlQUFlO3dCQUNqQlAsUUFBUWhFLElBQUksQ0FBQ21FO29CQUNmO2dCQUNGLE9BQU87b0JBQ0xILFFBQVFoRSxJQUFJLENBQUNtRTtnQkFDZjtZQUNGO1lBRUEsT0FBTztnQkFDTHJELFNBQVM7Z0JBQ1RqQyxNQUFNbUY7Z0JBQ05RLFlBQVk7b0JBQ1ZDLE9BQU9ULFFBQVFqRSxNQUFNO29CQUNyQjJFLE1BQU07b0JBQ05DLE9BQU87Z0JBQ1Q7WUFDRjtRQUNGLEVBQUUsT0FBTzVELE9BQVk7WUFDbkJzQyxRQUFRdEMsS0FBSyxDQUFDLDJCQUEyQkE7WUFDekMsTUFBTTBDLGVBQWVqRiwrREFBb0JBLENBQUN1QztZQUMxQyxPQUFPO2dCQUNMRCxTQUFTO2dCQUNUQyxPQUFPMEM7WUFDVDtRQUNGO0lBQ0Y7SUFFQSxtQkFBbUI7SUFDbkIsYUFBYW1CLGNBQWMzRCxRQUFnQixFQUEyQjtRQUNwRSxJQUFJO2dCQXNCV3BDLGlCQUNBQTtZQXRCYixJQUFJLENBQUNvQyxZQUFZQSxTQUFTeEIsSUFBSSxPQUFPLElBQUk7Z0JBQ3ZDLE9BQU87b0JBQ0xxQixTQUFTO29CQUNUQyxPQUFPO2dCQUNUO1lBQ0Y7WUFFQSxNQUFNNkMsSUFBSWxHLHlEQUFLQSxDQUFDTCw4REFBVUEsQ0FBQ2lCLHlDQUFFQSxFQUFFSyxrQkFBa0JkLHlEQUFLQSxDQUFDLE9BQU8sTUFBTW9EO1lBQ3BFLE1BQU04QyxnQkFBZ0IsTUFBTXRHLDJEQUFPQSxDQUFDbUc7WUFFcEMsSUFBSUcsY0FBY2MsS0FBSyxFQUFFO2dCQUN2QixPQUFPO29CQUNML0QsU0FBUztvQkFDVEMsT0FBTztnQkFDVDtZQUNGO1lBRUEsTUFBTW1ELE1BQU1ILGNBQWNlLElBQUksQ0FBQyxFQUFFO1lBQ2pDLE1BQU1qRyxPQUFPcUYsSUFBSXJGLElBQUk7WUFDckIsTUFBTXNGLFNBQWlCO2dCQUNyQixHQUFHdEYsSUFBSTtnQkFDUHVDLFdBQVd2QyxFQUFBQSxrQkFBQUEsS0FBS3VDLFNBQVMsY0FBZHZDLHNDQUFBQSxnQkFBZ0J1RixNQUFNLE9BQU0sSUFBSTVCO2dCQUMzQ25CLFdBQVd4QyxFQUFBQSxrQkFBQUEsS0FBS3dDLFNBQVMsY0FBZHhDLHNDQUFBQSxnQkFBZ0J1RixNQUFNLE9BQU0sSUFBSTVCO2dCQUMzQyw2Q0FBNkM7Z0JBQzdDakIsUUFBUUMsT0FBTzNDLEtBQUswQyxNQUFNLEtBQUs7Z0JBQy9CRSxjQUFjRCxPQUFPM0MsS0FBSzRDLFlBQVksS0FBSztnQkFDM0NDLGtCQUFrQkYsT0FBTzNDLEtBQUs2QyxnQkFBZ0IsS0FBSztnQkFDbkRuQixPQUFPaUIsT0FBTzNDLEtBQUswQixLQUFLLEtBQUs7Z0JBQzdCRSxlQUFlZSxPQUFPM0MsS0FBSzRCLGFBQWEsS0FBSztnQkFDN0NrQixrQkFBa0J0QyxNQUFNQyxPQUFPLENBQUNULEtBQUs4QyxnQkFBZ0IsSUFBSTlDLEtBQUs4QyxnQkFBZ0IsR0FBRyxFQUFFO2dCQUNuRkMsVUFBVXZDLE1BQU1DLE9BQU8sQ0FBQ1QsS0FBSytDLFFBQVEsSUFBSS9DLEtBQUsrQyxRQUFRLEdBQUcsRUFBRTtnQkFDM0RDLFFBQVF4QyxNQUFNQyxPQUFPLENBQUNULEtBQUtnRCxNQUFNLElBQUloRCxLQUFLZ0QsTUFBTSxHQUFHLEVBQUU7Z0JBQ3JEQyxjQUFjekMsTUFBTUMsT0FBTyxDQUFDVCxLQUFLaUQsWUFBWSxJQUFJakQsS0FBS2lELFlBQVksR0FBRyxFQUFFO2dCQUN2RUMsUUFBUTFDLE1BQU1DLE9BQU8sQ0FBQ1QsS0FBS2tELE1BQU0sSUFBSWxELEtBQUtrRCxNQUFNLEdBQUcsRUFBRTtnQkFDckRDLFlBQVkzQyxNQUFNQyxPQUFPLENBQUNULEtBQUttRCxVQUFVLElBQUluRCxLQUFLbUQsVUFBVSxHQUFHLEVBQUU7Z0JBQ2pFQyxTQUFTNUMsTUFBTUMsT0FBTyxDQUFDVCxLQUFLb0QsT0FBTyxJQUFJcEQsS0FBS29ELE9BQU8sR0FBRyxFQUFFO2dCQUN4REMsWUFBWTdDLE1BQU1DLE9BQU8sQ0FBQ1QsS0FBS3FELFVBQVUsSUFBSXJELEtBQUtxRCxVQUFVLEdBQUcsRUFBRTtnQkFDakVhLFdBQVdsRSxLQUFLa0UsU0FBUyxJQUFJO29CQUMzQkMsY0FBYztvQkFDZDlDLFVBQVU7b0JBQ1YrQyxZQUFZO29CQUNaQyxjQUFjO29CQUNkQyxPQUFPLEVBQUU7Z0JBQ1g7WUFDRjtZQUVBLE9BQU87Z0JBQ0xyQyxTQUFTO2dCQUNUakMsTUFBTXNGO1lBQ1I7UUFDRixFQUFFLE9BQU9wRCxPQUFZO1lBQ25Cc0MsUUFBUXRDLEtBQUssQ0FBQywwQkFBMEJBO1lBQ3hDLE1BQU0wQyxlQUFlakYsK0RBQW9CQSxDQUFDdUM7WUFDMUMsT0FBTztnQkFDTEQsU0FBUztnQkFDVEMsT0FBTzBDO1lBQ1Q7UUFDRjtJQUNGO0lBRUEscUJBQXFCO0lBQ3JCLGFBQWFzQixnQkFBZ0I1QyxJQUFZLEVBQTJCO1FBQ2xFLElBQUk7Z0JBc0JXdEQsaUJBQ0FBO1lBdEJiLElBQUksQ0FBQ3NELFFBQVFBLEtBQUsxQyxJQUFJLE9BQU8sSUFBSTtnQkFDL0IsT0FBTztvQkFDTHFCLFNBQVM7b0JBQ1RDLE9BQU87Z0JBQ1Q7WUFDRjtZQUVBLE1BQU02QyxJQUFJbEcseURBQUtBLENBQUNMLDhEQUFVQSxDQUFDaUIseUNBQUVBLEVBQUVLLGtCQUFrQmQseURBQUtBLENBQUMsUUFBUSxNQUFNc0U7WUFDckUsTUFBTTRCLGdCQUFnQixNQUFNdEcsMkRBQU9BLENBQUNtRztZQUVwQyxJQUFJRyxjQUFjYyxLQUFLLEVBQUU7Z0JBQ3ZCLE9BQU87b0JBQ0wvRCxTQUFTO29CQUNUQyxPQUFPO2dCQUNUO1lBQ0Y7WUFFQSxNQUFNbUQsTUFBTUgsY0FBY2UsSUFBSSxDQUFDLEVBQUU7WUFDakMsTUFBTWpHLE9BQU9xRixJQUFJckYsSUFBSTtZQUNyQixNQUFNc0YsU0FBaUI7Z0JBQ3JCLEdBQUd0RixJQUFJO2dCQUNQdUMsV0FBV3ZDLEVBQUFBLGtCQUFBQSxLQUFLdUMsU0FBUyxjQUFkdkMsc0NBQUFBLGdCQUFnQnVGLE1BQU0sT0FBTSxJQUFJNUI7Z0JBQzNDbkIsV0FBV3hDLEVBQUFBLGtCQUFBQSxLQUFLd0MsU0FBUyxjQUFkeEMsc0NBQUFBLGdCQUFnQnVGLE1BQU0sT0FBTSxJQUFJNUI7WUFDN0M7WUFFQSxPQUFPO2dCQUNMMUIsU0FBUztnQkFDVGpDLE1BQU1zRjtZQUNSO1FBQ0YsRUFBRSxPQUFPcEQsT0FBWTtZQUNuQnNDLFFBQVF0QyxLQUFLLENBQUMsa0NBQWtDQTtZQUNoRCxNQUFNMEMsZUFBZWpGLCtEQUFvQkEsQ0FBQ3VDO1lBQzFDLE9BQU87Z0JBQ0xELFNBQVM7Z0JBQ1RDLE9BQU8wQztZQUNUO1FBQ0Y7SUFDRjtJQUVBLGdCQUFnQjtJQUNoQixhQUFhdUIsYUFBYS9ELFFBQWdCLEVBQUVyQixVQUEyQixFQUEyQjtRQUNoRyxJQUFJO1lBQ0YsSUFBSSxDQUFDcUIsWUFBWUEsU0FBU3hCLElBQUksT0FBTyxJQUFJO2dCQUN2QyxPQUFPO29CQUNMcUIsU0FBUztvQkFDVEMsT0FBTztnQkFDVDtZQUNGO1lBRUEsdURBQXVEO1lBQ3ZELElBQUluQixXQUFXRSxLQUFLLElBQUlGLFdBQVdLLGdCQUFnQixJQUFJTCxXQUFXTSxRQUFRLEVBQUU7Z0JBQzFFLE1BQU1XLGFBQWFsQixtQkFBbUI7b0JBQ3BDRyxPQUFPRixXQUFXRSxLQUFLLElBQUk7b0JBQzNCRyxrQkFBa0JMLFdBQVdLLGdCQUFnQixJQUFJO29CQUNqREMsVUFBVU4sV0FBV00sUUFBUSxJQUFJO29CQUNqQ0MsT0FBT1AsV0FBV08sS0FBSyxJQUFJO29CQUMzQkMsVUFBVVIsV0FBV1EsUUFBUSxJQUFJO29CQUNqQ0MsVUFBVVQsV0FBV1MsUUFBUSxJQUFJO29CQUNqQ0MsT0FBT1YsV0FBV1UsS0FBSyxJQUFJO29CQUMzQkMsT0FBT1gsV0FBV1csS0FBSyxJQUFJO29CQUMzQkUsZUFBZWIsV0FBV2EsYUFBYSxJQUFJO2dCQUM3QztnQkFFQSxJQUFJLENBQUNJLFdBQVdILE9BQU8sRUFBRTtvQkFDdkIsT0FBTzt3QkFDTEksU0FBUzt3QkFDVEMsT0FBTyxzQkFBbUQsT0FBN0JGLFdBQVdoQixNQUFNLENBQUNtQixJQUFJLENBQUM7b0JBQ3REO2dCQUNGO1lBQ0Y7WUFFQSxNQUFNNEMsSUFBSWxHLHlEQUFLQSxDQUFDTCw4REFBVUEsQ0FBQ2lCLHlDQUFFQSxFQUFFSyxrQkFBa0JkLHlEQUFLQSxDQUFDLE9BQU8sTUFBTW9EO1lBQ3BFLE1BQU04QyxnQkFBZ0IsTUFBTXRHLDJEQUFPQSxDQUFDbUc7WUFFcEMsSUFBSUcsY0FBY2MsS0FBSyxFQUFFO2dCQUN2QixPQUFPO29CQUNML0QsU0FBUztvQkFDVEMsT0FBTztnQkFDVDtZQUNGO1lBRUEsTUFBTXdDLFNBQVNRLGNBQWNlLElBQUksQ0FBQyxFQUFFLENBQUM1RyxHQUFHO1lBRXhDLE1BQU0rRyxhQUFhO2dCQUNqQixHQUFHckYsVUFBVTtnQkFDYnlCLFdBQVd6RCxtRUFBZUE7Z0JBQzFCMkUsYUFBYSxJQUFJQyxPQUFPQyxXQUFXO2dCQUNuQywyQ0FBMkM7Z0JBQzNDLEdBQUk3QyxXQUFXMkIsTUFBTSxLQUFLcEMsYUFBYTtvQkFBRW9DLFFBQVFDLE9BQU81QixXQUFXMkIsTUFBTTtnQkFBRSxDQUFDO2dCQUM1RSxHQUFJM0IsV0FBVzZCLFlBQVksS0FBS3RDLGFBQWE7b0JBQUVzQyxjQUFjRCxPQUFPNUIsV0FBVzZCLFlBQVk7Z0JBQUUsQ0FBQztnQkFDOUYsR0FBSTdCLFdBQVc4QixnQkFBZ0IsS0FBS3ZDLGFBQWE7b0JBQUV1QyxrQkFBa0JGLE9BQU81QixXQUFXOEIsZ0JBQWdCO2dCQUFFLENBQUM7Z0JBQzFHLEdBQUk5QixXQUFXVyxLQUFLLEtBQUtwQixhQUFhO29CQUFFb0IsT0FBT2lCLE9BQU81QixXQUFXVyxLQUFLO2dCQUFFLENBQUM7Z0JBQ3pFLEdBQUlYLFdBQVdhLGFBQWEsS0FBS3RCLGFBQWE7b0JBQUVzQixlQUFlZSxPQUFPNUIsV0FBV2EsYUFBYTtnQkFBRSxDQUFDO2dCQUNqRyxzQ0FBc0M7Z0JBQ3RDLEdBQUliLFdBQVcrQixnQkFBZ0IsSUFBSTtvQkFDakNBLGtCQUFrQnRDLE1BQU1DLE9BQU8sQ0FBQ00sV0FBVytCLGdCQUFnQixJQUN2RC9CLFdBQVcrQixnQkFBZ0IsQ0FBQ3BDLE1BQU0sQ0FBQ0MsQ0FBQUEsT0FBUUEsUUFBUUEsS0FBS0MsSUFBSSxNQUM1RCxFQUFFO2dCQUNSLENBQUM7Z0JBQ0QsR0FBSUcsV0FBV2dDLFFBQVEsSUFBSTtvQkFDekJBLFVBQVV2QyxNQUFNQyxPQUFPLENBQUNNLFdBQVdnQyxRQUFRLElBQ3ZDaEMsV0FBV2dDLFFBQVEsQ0FBQ3JDLE1BQU0sQ0FBQ0MsQ0FBQUEsT0FBUUEsUUFBUUEsS0FBS0MsSUFBSSxNQUNwRCxFQUFFO2dCQUNSLENBQUM7Z0JBQ0QsR0FBSUcsV0FBV2lDLE1BQU0sSUFBSTtvQkFDdkJBLFFBQVF4QyxNQUFNQyxPQUFPLENBQUNNLFdBQVdpQyxNQUFNLElBQ25DakMsV0FBV2lDLE1BQU0sQ0FBQ3RDLE1BQU0sQ0FBQ0MsQ0FBQUEsT0FBUUEsUUFBUUEsS0FBS0MsSUFBSSxNQUNsRCxFQUFFO2dCQUNSLENBQUM7Z0JBQ0QsR0FBSUcsV0FBV2tDLFlBQVksSUFBSTtvQkFDN0JBLGNBQWN6QyxNQUFNQyxPQUFPLENBQUNNLFdBQVdrQyxZQUFZLElBQy9DbEMsV0FBV2tDLFlBQVksQ0FBQ3ZDLE1BQU0sQ0FBQ0MsQ0FBQUEsT0FBUUEsUUFBUUEsS0FBS0MsSUFBSSxNQUN4RCxFQUFFO2dCQUNSLENBQUM7Z0JBQ0QsK0JBQStCO2dCQUMvQixHQUFJRyxXQUFXRSxLQUFLLElBQUk7b0JBQ3RCcUMsTUFBTXZDLFdBQVdFLEtBQUssQ0FBQ3NDLFdBQVcsR0FBR0MsT0FBTyxDQUFDLFFBQVEsS0FBS0EsT0FBTyxDQUFDLGVBQWU7Z0JBQ25GLENBQUM7WUFDSDtZQUVBLGdDQUFnQztZQUNoQyxNQUFNZSxjQUFjeEUsZ0JBQWdCcUc7WUFFcEM1QixRQUFRQyxHQUFHLENBQUMsc0NBQXNDO2dCQUNoRHJDO2dCQUNBaUUsZUFBZWpHLE9BQU9rRyxJQUFJLENBQUMvQjtZQUM3QjtZQUVBLE1BQU03Riw2REFBU0EsQ0FBQ2dHLFFBQVFIO1lBRXhCLDJCQUEyQjtZQUMzQixNQUFNZ0Msd0JBQXdCLE1BQU0sSUFBSSxDQUFDUixhQUFhLENBQUMzRDtZQUV2RCxJQUFJbUUsc0JBQXNCdEUsT0FBTyxFQUFFO2dCQUNqQyxPQUFPc0U7WUFDVCxPQUFPO2dCQUNMLE9BQU87b0JBQ0x0RSxTQUFTO29CQUNUakMsTUFBTTt3QkFDSixHQUFHZSxVQUFVO3dCQUNidUIsS0FBS0Y7d0JBQ0xJLFdBQVcsSUFBSW1CO29CQUNqQjtnQkFDRjtZQUNGO1FBQ0YsRUFBRSxPQUFPekIsT0FBWTtZQUNuQnNDLFFBQVF0QyxLQUFLLENBQUMsMEJBQTBCQTtZQUN4QyxNQUFNMEMsZUFBZWpGLCtEQUFvQkEsQ0FBQ3VDO1lBQzFDLE9BQU87Z0JBQ0xELFNBQVM7Z0JBQ1RDLE9BQU8wQztZQUNUO1FBQ0Y7SUFDRjtJQUVBLGdCQUFnQjtJQUNoQixhQUFhNEIsYUFBYXBFLFFBQWdCLEVBQWlEO1FBQ3pGLElBQUk7WUFDRixJQUFJLENBQUNBLFlBQVlBLFNBQVN4QixJQUFJLE9BQU8sSUFBSTtnQkFDdkMsT0FBTztvQkFDTHFCLFNBQVM7b0JBQ1RDLE9BQU87Z0JBQ1Q7WUFDRjtZQUVBLE1BQU02QyxJQUFJbEcseURBQUtBLENBQUNMLDhEQUFVQSxDQUFDaUIseUNBQUVBLEVBQUVLLGtCQUFrQmQseURBQUtBLENBQUMsT0FBTyxNQUFNb0Q7WUFDcEUsTUFBTThDLGdCQUFnQixNQUFNdEcsMkRBQU9BLENBQUNtRztZQUVwQyxJQUFJRyxjQUFjYyxLQUFLLEVBQUU7Z0JBQ3ZCLE9BQU87b0JBQ0wvRCxTQUFTO29CQUNUQyxPQUFPO2dCQUNUO1lBQ0Y7WUFFQSxNQUFNd0MsU0FBU1EsY0FBY2UsSUFBSSxDQUFDLEVBQUUsQ0FBQzVHLEdBQUc7WUFDeEMsTUFBTTBCLGFBQWFtRSxjQUFjZSxJQUFJLENBQUMsRUFBRSxDQUFDakcsSUFBSTtZQUU3Qyx3Q0FBd0M7WUFDeEMsSUFBSWUsV0FBVytDLGVBQWUsRUFBRTtnQkFDOUIsSUFBSTtvQkFDRixNQUFNLElBQUksQ0FBQzJDLFdBQVcsQ0FBQzFGLFdBQVcrQyxlQUFlO2dCQUNuRCxFQUFFLE9BQU80QyxZQUFZO29CQUNuQmxDLFFBQVFtQyxJQUFJLENBQUMsc0NBQXNDRDtnQkFDckQ7WUFDRjtZQUVBLElBQUkzRixXQUFXZ0QsZ0JBQWdCLEVBQUU7Z0JBQy9CLElBQUk7b0JBQ0YsTUFBTSxJQUFJLENBQUMwQyxXQUFXLENBQUMxRixXQUFXZ0QsZ0JBQWdCO2dCQUNwRCxFQUFFLE9BQU8yQyxZQUFZO29CQUNuQmxDLFFBQVFtQyxJQUFJLENBQUMsdUNBQXVDRDtnQkFDdEQ7WUFDRjtZQUVBLE1BQU0vSCw2REFBU0EsQ0FBQytGO1lBRWhCRixRQUFRQyxHQUFHLENBQUMsZ0NBQWdDckM7WUFFNUMsT0FBTztnQkFDTEgsU0FBUztZQUNYO1FBQ0YsRUFBRSxPQUFPQyxPQUFZO1lBQ25Cc0MsUUFBUXRDLEtBQUssQ0FBQywwQkFBMEJBO1lBQ3hDLE1BQU0wQyxlQUFlakYsK0RBQW9CQSxDQUFDdUM7WUFDMUMsT0FBTztnQkFDTEQsU0FBUztnQkFDVEMsT0FBTzBDO1lBQ1Q7UUFDRjtJQUNGO0lBRUEsc0JBQXNCO0lBQ3RCLGFBQWFnQyxjQUFjQyxTQUFtQixFQUF3RTtRQUNwSCxJQUFJO1lBQ0YsSUFBSSxDQUFDQSxhQUFhQSxVQUFVM0YsTUFBTSxLQUFLLEdBQUc7Z0JBQ3hDLE9BQU87b0JBQ0xlLFNBQVM7b0JBQ1RDLE9BQU87Z0JBQ1Q7WUFDRjtZQUVBLE1BQU00RSxRQUFRN0gsOERBQVVBLENBQUNRLHlDQUFFQTtZQUMzQixJQUFJc0gsZUFBZTtZQUVuQixLQUFLLE1BQU0zRSxZQUFZeUUsVUFBVztnQkFDaEMsTUFBTTlCLElBQUlsRyx5REFBS0EsQ0FBQ0wsOERBQVVBLENBQUNpQix5Q0FBRUEsRUFBRUssa0JBQWtCZCx5REFBS0EsQ0FBQyxPQUFPLE1BQU1vRDtnQkFDcEUsTUFBTThDLGdCQUFnQixNQUFNdEcsMkRBQU9BLENBQUNtRztnQkFFcEMsSUFBSSxDQUFDRyxjQUFjYyxLQUFLLEVBQUU7b0JBQ3hCLE1BQU10QixTQUFTUSxjQUFjZSxJQUFJLENBQUMsRUFBRSxDQUFDNUcsR0FBRztvQkFDeEN5SCxNQUFNRSxNQUFNLENBQUN0QztvQkFDYnFDO2dCQUNGO1lBQ0Y7WUFFQSxJQUFJQSxpQkFBaUIsR0FBRztnQkFDdEIsT0FBTztvQkFDTDlFLFNBQVM7b0JBQ1RDLE9BQU87Z0JBQ1Q7WUFDRjtZQUVBLE1BQU00RSxNQUFNRyxNQUFNO1lBRWxCLE9BQU87Z0JBQ0xoRixTQUFTO2dCQUNUOEU7WUFDRjtRQUNGLEVBQUUsT0FBTzdFLE9BQVk7WUFDbkJzQyxRQUFRdEMsS0FBSyxDQUFDLGdDQUFnQ0E7WUFDOUMsTUFBTTBDLGVBQWVqRiwrREFBb0JBLENBQUN1QztZQUMxQyxPQUFPO2dCQUNMRCxTQUFTO2dCQUNUQyxPQUFPMEM7WUFDVDtRQUNGO0lBQ0Y7SUFFQSwyREFBMkQ7SUFDM0QsYUFBYXNDLFlBQVlDLElBQVUsRUFBRUMsSUFBWSxFQUErRDtRQUM5RyxJQUFJO2dCQXFCb0JEO1lBcEJ0QixnQkFBZ0I7WUFDaEIsSUFBSSxDQUFDQSxNQUFNO2dCQUNULE9BQU87b0JBQUVsRixTQUFTO29CQUFPQyxPQUFPO2dCQUFtQjtZQUNyRDtZQUVBLElBQUlpRixLQUFLRSxJQUFJLEdBQUcsSUFBSSxPQUFPLE1BQU07Z0JBQy9CLE9BQU87b0JBQUVwRixTQUFTO29CQUFPQyxPQUFPO2dCQUFrQztZQUNwRTtZQUVBLE1BQU1vRixlQUFlO2dCQUFDO2dCQUFjO2dCQUFhO2dCQUFhO2dCQUFjO2FBQVk7WUFDeEYsSUFBSSxDQUFDQSxhQUFhL0csUUFBUSxDQUFDNEcsS0FBS0ksSUFBSSxHQUFHO2dCQUNyQyxPQUFPO29CQUNMdEYsU0FBUztvQkFDVEMsT0FBTztnQkFDVDtZQUNGO1lBRUEsMkJBQTJCO1lBQzNCLE1BQU1zRixZQUFZN0QsS0FBSzhELEdBQUc7WUFDMUIsTUFBTUMsZUFBZUMsS0FBS0MsTUFBTSxHQUFHQyxRQUFRLENBQUMsSUFBSUMsU0FBUyxDQUFDLEdBQUc7WUFDN0QsTUFBTUMsZ0JBQWdCWixFQUFBQSx1QkFBQUEsS0FBS2EsSUFBSSxDQUFDQyxLQUFLLENBQUMsS0FBS0MsR0FBRyxnQkFBeEJmLDJDQUFBQSxxQkFBNEI1RCxXQUFXLE9BQU07WUFDbkUsTUFBTTRFLFdBQVcsR0FBZ0JULE9BQWJGLFdBQVUsS0FBbUJPLE9BQWhCTCxjQUFhLEtBQWlCLE9BQWRLO1lBRWpELE1BQU1LLGFBQWEvSSxxREFBR0EsQ0FBQ0ssOENBQU9BLEVBQUUsR0FBV3lJLE9BQVJmLE1BQUssS0FBWSxPQUFUZTtZQUUzQzNELFFBQVFDLEdBQUcsQ0FBQyxvQkFBb0IwRCxVQUFVLFNBQVNoQixLQUFLRSxJQUFJO1lBRTVELHVCQUF1QjtZQUN2QixNQUFNZ0IsV0FBVztnQkFDZkMsYUFBYW5CLEtBQUtJLElBQUk7Z0JBQ3RCZ0IsZ0JBQWdCO29CQUNkQyxZQUFZLElBQUk3RSxPQUFPQyxXQUFXO29CQUNsQzZFLGNBQWN0QixLQUFLYSxJQUFJO2dCQUN6QjtZQUNGO1lBRUEsTUFBTVUsV0FBVyxNQUFNcEosNkRBQVdBLENBQUM4SSxZQUFZakIsTUFBTWtCO1lBQ3JELE1BQU1NLGNBQWMsTUFBTXBKLGdFQUFjQSxDQUFDbUosU0FBU3JKLEdBQUc7WUFFckRtRixRQUFRQyxHQUFHLENBQUMsZ0NBQWdDa0U7WUFFNUMsT0FBTztnQkFDTDFHLFNBQVM7Z0JBQ1QyRyxLQUFLRDtZQUNQO1FBQ0YsRUFBRSxPQUFPekcsT0FBWTtZQUNuQnNDLFFBQVF0QyxLQUFLLENBQUMsMEJBQTBCQTtZQUN4QyxPQUFPO2dCQUNMRCxTQUFTO2dCQUNUQyxPQUFPQSxNQUFNMkcsT0FBTyxJQUFJO1lBQzFCO1FBQ0Y7SUFDRjtJQUVBLDRCQUE0QjtJQUM1QixhQUFhcEMsWUFBWXFDLFFBQWdCLEVBQWlEO1FBQ3hGLElBQUk7WUFDRixJQUFJLENBQUNBLFlBQVksQ0FBQ0EsU0FBU3ZJLFFBQVEsQ0FBQyxhQUFhO2dCQUMvQyxPQUFPO29CQUNMMEIsU0FBUztvQkFDVEMsT0FBTztnQkFDVDtZQUNGO1lBRUEsTUFBTTZHLFdBQVcxSixxREFBR0EsQ0FBQ0ssOENBQU9BLEVBQUVvSjtZQUM5QixNQUFNdEosOERBQVlBLENBQUN1SjtZQUVuQnZFLFFBQVFDLEdBQUcsQ0FBQywrQkFBK0JxRTtZQUUzQyxPQUFPO2dCQUNMN0csU0FBUztZQUNYO1FBQ0YsRUFBRSxPQUFPQyxPQUFZO1lBQ25Cc0MsUUFBUXRDLEtBQUssQ0FBQyx5QkFBeUJBO1lBQ3ZDLE9BQU87Z0JBQ0xELFNBQVM7Z0JBQ1RDLE9BQU9BLE1BQU0yRyxPQUFPLElBQUk7WUFDMUI7UUFDRjtJQUNGO0lBRUEsMEJBQTBCO0lBQzFCLGFBQWFHLHFCQUFxQjNILFFBQWdCLEVBQUUyRCxRQUFpQixFQUE0QjtRQUMvRixJQUFJO1lBQ0YsSUFBSSxDQUFDM0QsWUFBWUEsU0FBU1QsSUFBSSxPQUFPLElBQUk7Z0JBQ3ZDLE9BQU87b0JBQ0xxQixTQUFTO29CQUNUQyxPQUFPO2dCQUNUO1lBQ0Y7WUFFQSxJQUFJNkMsSUFBSWxHLHlEQUFLQSxDQUNYTCw4REFBVUEsQ0FBQ2lCLHlDQUFFQSxFQUFFSyxrQkFDZmQseURBQUtBLENBQUMsWUFBWSxNQUFNcUMsV0FDeEJyQyx5REFBS0EsQ0FBQyxVQUFVLE1BQU0sY0FDdEJGLDJEQUFPQSxDQUFDLGFBQWE7WUFHdkIsSUFBSWtHLFVBQVU7Z0JBQ1pELElBQUlsRyx5REFBS0EsQ0FBQ2tHLEdBQUc1Rix5REFBY0EsQ0FBQzZGO1lBQzlCO1lBRUEsTUFBTUUsZ0JBQWdCLE1BQU10RywyREFBT0EsQ0FBQ21HO1lBRXBDLE1BQU1JLFVBQW9CLEVBQUU7WUFDNUJELGNBQWNFLE9BQU8sQ0FBQyxDQUFDQztvQkFJUnJGLGlCQUNBQTtnQkFKYixNQUFNQSxPQUFPcUYsSUFBSXJGLElBQUk7Z0JBQ3JCbUYsUUFBUWhFLElBQUksQ0FBQztvQkFDWCxHQUFHbkIsSUFBSTtvQkFDUHVDLFdBQVd2QyxFQUFBQSxrQkFBQUEsS0FBS3VDLFNBQVMsY0FBZHZDLHNDQUFBQSxnQkFBZ0J1RixNQUFNLE9BQU0sSUFBSTVCO29CQUMzQ25CLFdBQVd4QyxFQUFBQSxrQkFBQUEsS0FBS3dDLFNBQVMsY0FBZHhDLHNDQUFBQSxnQkFBZ0J1RixNQUFNLE9BQU0sSUFBSTVCO2dCQUM3QztZQUNGO1lBRUEsT0FBTztnQkFDTDFCLFNBQVM7Z0JBQ1RqQyxNQUFNbUY7WUFDUjtRQUNGLEVBQUUsT0FBT2pELE9BQVk7WUFDbkJzQyxRQUFRdEMsS0FBSyxDQUFDLHVDQUF1Q0E7WUFDckQsTUFBTTBDLGVBQWVqRiwrREFBb0JBLENBQUN1QztZQUMxQyxPQUFPO2dCQUNMRCxTQUFTO2dCQUNUQyxPQUFPMEM7WUFDVDtRQUNGO0lBQ0Y7SUFFQSw2QkFBNkI7SUFDN0IsYUFBYXFFLG9CQUFvQmpFLFFBQWlCLEVBQTRCO1FBQzVFLE9BQU8sSUFBSSxDQUFDSCxhQUFhLENBQUM7WUFDeEJwQyxRQUFRO1lBQ1J1QyxVQUFVQSxZQUFZO1FBQ3hCO0lBQ0Y7SUFFQSx5QkFBeUI7SUFDekIsYUFBYWtFLGdCQUFnQmxFLFFBQWlCLEVBQTRCO1FBQ3hFLE9BQU8sSUFBSSxDQUFDSCxhQUFhLENBQUM7WUFDeEJwQyxRQUFRO1lBQ1J1QyxVQUFVQSxZQUFZO1FBQ3hCO0lBQ0Y7SUFFQSxpQkFBaUI7SUFDakIsYUFBYW1FLGNBQWMzRCxVQUFrQixFQUFFVixPQUs5QyxFQUE0QjtRQUMzQixJQUFJO1lBQ0YsSUFBSSxDQUFDVSxjQUFjQSxXQUFXNUUsSUFBSSxPQUFPLElBQUk7Z0JBQzNDLE9BQU8sSUFBSSxDQUFDaUUsYUFBYSxDQUFDQztZQUM1QjtZQUVBLE9BQU8sSUFBSSxDQUFDRCxhQUFhLENBQUM7Z0JBQ3hCLEdBQUdDLE9BQU87Z0JBQ1ZVLFlBQVlBLFdBQVc1RSxJQUFJO1lBQzdCO1FBQ0YsRUFBRSxPQUFPc0IsT0FBWTtZQUNuQnNDLFFBQVF0QyxLQUFLLENBQUMsNEJBQTRCQTtZQUMxQyxNQUFNMEMsZUFBZWpGLCtEQUFvQkEsQ0FBQ3VDO1lBQzFDLE9BQU87Z0JBQ0xELFNBQVM7Z0JBQ1RDLE9BQU8wQztZQUNUO1FBQ0Y7SUFDRjtJQUVBLHdCQUF3QjtJQUN4QixhQUFhd0UsaUJBWVY7UUFDRCxJQUFJO1lBQ0YsTUFBTUMsV0FBVyxNQUFNLElBQUksQ0FBQ3hFLGFBQWE7WUFFekMsSUFBSSxDQUFDd0UsU0FBU3BILE9BQU8sSUFBSSxDQUFDb0gsU0FBU3JKLElBQUksRUFBRTtnQkFDdkMsT0FBTztvQkFDTGlDLFNBQVM7b0JBQ1RDLE9BQU9tSCxTQUFTbkgsS0FBSyxJQUFJO2dCQUMzQjtZQUNGO1lBRUEsTUFBTWlELFVBQVVrRSxTQUFTckosSUFBSTtZQUM3QixNQUFNc0osUUFBUTtnQkFDWkMsY0FBY3BFLFFBQVFqRSxNQUFNO2dCQUM1QnNJLGtCQUFrQnJFLFFBQVF6RSxNQUFNLENBQUMrSSxDQUFBQSxJQUFLQSxFQUFFaEgsTUFBTSxLQUFLLGFBQWF2QixNQUFNO2dCQUN0RXdJLGNBQWN2RSxRQUFRekUsTUFBTSxDQUFDK0ksQ0FBQUEsSUFBS0EsRUFBRWhILE1BQU0sS0FBSyxTQUFTdkIsTUFBTTtnQkFDOUR5SSxlQUFleEUsUUFBUXlFLE1BQU0sQ0FBQyxDQUFDQyxLQUFLSixJQUFNSSxNQUFPSixDQUFBQSxFQUFFNUcsZ0JBQWdCLElBQUksSUFBSTtnQkFDM0VpSCxjQUFjM0UsUUFBUXlFLE1BQU0sQ0FBQyxDQUFDQyxLQUFLSixJQUFNSSxNQUFPLENBQUNKLEVBQUUvSCxLQUFLLElBQUksS0FBTStILENBQUFBLEVBQUU1RyxnQkFBZ0IsSUFBSSxJQUFLO2dCQUM3RmtILFlBQVksQ0FBQztnQkFDYkMsUUFBUSxDQUFDO1lBQ1g7WUFFQSxrQ0FBa0M7WUFDbEM3RSxRQUFRQyxPQUFPLENBQUNFLENBQUFBO2dCQUNkLElBQUlBLE9BQU9qRSxRQUFRLEVBQUU7b0JBQ25CaUksTUFBTVMsVUFBVSxDQUFDekUsT0FBT2pFLFFBQVEsQ0FBQyxHQUFHLENBQUNpSSxNQUFNUyxVQUFVLENBQUN6RSxPQUFPakUsUUFBUSxDQUFDLElBQUksS0FBSztnQkFDakY7WUFDRjtZQUVBLCtCQUErQjtZQUMvQjhELFFBQVFDLE9BQU8sQ0FBQ0UsQ0FBQUE7Z0JBQ2QsSUFBSUEsT0FBT2hFLEtBQUssRUFBRTtvQkFDaEJnSSxNQUFNVSxNQUFNLENBQUMxRSxPQUFPaEUsS0FBSyxDQUFDLEdBQUcsQ0FBQ2dJLE1BQU1VLE1BQU0sQ0FBQzFFLE9BQU9oRSxLQUFLLENBQUMsSUFBSSxLQUFLO2dCQUNuRTtZQUNGO1lBRUEsT0FBTztnQkFDTFcsU0FBUztnQkFDVGpDLE1BQU1zSjtZQUNSO1FBQ0YsRUFBRSxPQUFPcEgsT0FBWTtZQUNuQnNDLFFBQVF0QyxLQUFLLENBQUMscUNBQXFDQTtZQUNuRCxNQUFNMEMsZUFBZWpGLCtEQUFvQkEsQ0FBQ3VDO1lBQzFDLE9BQU87Z0JBQ0xELFNBQVM7Z0JBQ1RDLE9BQU8wQztZQUNUO1FBQ0Y7SUFDRjtJQUVBLDJDQUEyQztJQUMzQyxhQUFhcUYsbUJBQW1CN0gsUUFBZ0IsRUFBRUssTUFBNkIsRUFBMkI7UUFDeEcsSUFBSTtZQUNGLElBQUksQ0FBQ0wsWUFBWUEsU0FBU3hCLElBQUksT0FBTyxJQUFJO2dCQUN2QyxPQUFPO29CQUNMcUIsU0FBUztvQkFDVEMsT0FBTztnQkFDVDtZQUNGO1lBRUEsSUFBSSxDQUFDO2dCQUFDO2dCQUFTO2FBQVksQ0FBQzNCLFFBQVEsQ0FBQ2tDLFNBQVM7Z0JBQzVDLE9BQU87b0JBQ0xSLFNBQVM7b0JBQ1RDLE9BQU87Z0JBQ1Q7WUFDRjtZQUVBLE9BQU8sSUFBSSxDQUFDaUUsWUFBWSxDQUFDL0QsVUFBVTtnQkFDakNLO2dCQUNBaUIsYUFBYSxJQUFJQyxPQUFPQyxXQUFXO1lBQ3JDO1FBQ0YsRUFBRSxPQUFPMUIsT0FBWTtZQUNuQnNDLFFBQVF0QyxLQUFLLENBQUMsaUNBQWlDQTtZQUMvQyxNQUFNMEMsZUFBZWpGLCtEQUFvQkEsQ0FBQ3VDO1lBQzFDLE9BQU87Z0JBQ0xELFNBQVM7Z0JBQ1RDLE9BQU8wQztZQUNUO1FBQ0Y7SUFDRjtJQUVBLG1CQUFtQjtJQUNuQixhQUFhc0YsZ0JBQWdCOUgsUUFBZ0IsRUFBRStILFFBQWlCLEVBQTJCO1FBQ3pGLElBQUk7WUFDRixNQUFNQyxpQkFBaUIsTUFBTSxJQUFJLENBQUNyRSxhQUFhLENBQUMzRDtZQUVoRCxJQUFJLENBQUNnSSxlQUFlbkksT0FBTyxJQUFJLENBQUNtSSxlQUFlcEssSUFBSSxFQUFFO2dCQUNuRCxPQUFPO29CQUNMaUMsU0FBUztvQkFDVEMsT0FBT2tJLGVBQWVsSSxLQUFLLElBQUk7Z0JBQ2pDO1lBQ0Y7WUFFQSxNQUFNb0QsU0FBUzhFLGVBQWVwSyxJQUFJO1lBQ2xDLE1BQU1xSyxtQkFBOEI7Z0JBQ2xDLEdBQUcvRSxNQUFNO2dCQUNUckUsT0FBT2tKLFlBQVksR0FBZ0IsT0FBYjdFLE9BQU9yRSxLQUFLLEVBQUM7Z0JBQ25DcUMsTUFBTSxDQUFDNkcsWUFBWSxHQUFnQixPQUFiN0UsT0FBT3JFLEtBQUssRUFBQyxVQUFPLEVBQUdzQyxXQUFXLEdBQUdDLE9BQU8sQ0FBQyxRQUFRLEtBQUtBLE9BQU8sQ0FBQyxlQUFlO2dCQUN2R2YsUUFBUTtnQkFDUkksa0JBQWtCO2dCQUNsQkgsUUFBUTtnQkFDUkUsY0FBYztnQkFDZGMsYUFBYSxJQUFJQyxPQUFPQyxXQUFXO1lBQ3JDO1lBRUEsNkNBQTZDO1lBQzdDLE9BQU8saUJBQTBCdEIsR0FBRztZQUNwQyxPQUFPLGlCQUEwQkMsU0FBUztZQUMxQyxPQUFPLGlCQUEwQkMsU0FBUztZQUUxQyxPQUFPLElBQUksQ0FBQ1QsWUFBWSxDQUFDc0k7UUFDM0IsRUFBRSxPQUFPbkksT0FBWTtZQUNuQnNDLFFBQVF0QyxLQUFLLENBQUMsNkJBQTZCQTtZQUMzQyxNQUFNMEMsZUFBZWpGLCtEQUFvQkEsQ0FBQ3VDO1lBQzFDLE9BQU87Z0JBQ0xELFNBQVM7Z0JBQ1RDLE9BQU8wQztZQUNUO1FBQ0Y7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9saWIvY291cnNlU2VydmljZS50cz8zNzQ1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFxuICBjb2xsZWN0aW9uLCBcbiAgYWRkRG9jLCBcbiAgdXBkYXRlRG9jLCBcbiAgZGVsZXRlRG9jLCBcbiAgZ2V0RG9jcywgXG4gIGRvYywgXG4gIGdldERvYyxcbiAgcXVlcnksXG4gIG9yZGVyQnksXG4gIHNlcnZlclRpbWVzdGFtcCxcbiAgd2hlcmUsXG4gIHdyaXRlQmF0Y2gsXG4gIGxpbWl0IGFzIGZpcmVzdG9yZUxpbWl0LFxuICBzdGFydEFmdGVyLFxuICBEb2N1bWVudFNuYXBzaG90XG59IGZyb20gJ2ZpcmViYXNlL2ZpcmVzdG9yZSc7XG5pbXBvcnQgeyByZWYsIHVwbG9hZEJ5dGVzLCBnZXREb3dubG9hZFVSTCwgZGVsZXRlT2JqZWN0IH0gZnJvbSAnZmlyZWJhc2Uvc3RvcmFnZSc7XG5pbXBvcnQgeyBkYiwgc3RvcmFnZSwgaGFuZGxlRmlyZXN0b3JlRXJyb3IgfSBmcm9tICcuL2ZpcmViYXNlJztcbmltcG9ydCB7IENvdXJzZSwgTmV3Q291cnNlLCBDb3Vyc2VzUmVzcG9uc2UsIENvdXJzZVJlc3BvbnNlIH0gZnJvbSAnQC90eXBlcy9jb3Vyc2VzJztcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnO1xuXG5jb25zdCBDT0xMRUNUSU9OX05BTUUgPSAnY291cnNlcyc7XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBjbGVhbiBkYXRhIGJlZm9yZSBzZW5kaW5nIHRvIEZpcmVzdG9yZVxuY29uc3QgY2xlYW5Db3Vyc2VEYXRhID0gKGRhdGE6IGFueSkgPT4ge1xuICBjb25zdCBjbGVhbmVkOiBhbnkgPSB7fTtcbiAgXG4gIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEpKSB7XG4gICAgLy8gU2tpcCB1bmRlZmluZWQgdmFsdWVzIGFuZCBmdW5jdGlvbnNcbiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgdmFsdWUgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIC8vIEhhbmRsZSBkaWZmZXJlbnQgZGF0YSB0eXBlcyBhcHByb3ByaWF0ZWx5XG4gICAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgLy8gQ29udmVydCBudWxsIHRvIGFwcHJvcHJpYXRlIGRlZmF1bHQgdmFsdWVzXG4gICAgICAgIGlmIChbJ3BheW1lbnRMaW5rJywgJ2JhY2tncm91bmRJbWFnZScsICdjZXJ0aWZpY2F0ZUltYWdlJywgJ2dsb2JhbFN0YXR1cycsICdzdGFydERhdGUnXS5pbmNsdWRlcyhrZXkpKSB7XG4gICAgICAgICAgY2xlYW5lZFtrZXldID0gJyc7XG4gICAgICAgIH0gZWxzZSBpZiAoWydsZWFybmluZ091dGNvbWVzJywgJ2ZlYXR1cmVzJywgJ3NraWxscycsICdyZXF1aXJlbWVudHMnLCAnbW9kdWxlJywgJ2hpZ2hsaWdodHMnLCAncHJvamVjdCcsICdwcm9ncmFtRm9yJ10uaW5jbHVkZXMoa2V5KSkge1xuICAgICAgICAgIGNsZWFuZWRba2V5XSA9IFtdO1xuICAgICAgICB9IGVsc2UgaWYgKFsncmF0aW5nJywgJ3RvdGFsUmF0aW5ncycsICdlbnJvbGxlZFN0dWRlbnRzJywgJ3ByaWNlJywgJ29yaWdpbmFsUHJpY2UnXS5pbmNsdWRlcyhrZXkpKSB7XG4gICAgICAgICAgY2xlYW5lZFtrZXldID0gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjbGVhbmVkW2tleV0gPSAnJztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAvLyBFbnN1cmUgYXJyYXlzIGFyZSBwcm9wZXJseSBmb3JtYXR0ZWRcbiAgICAgICAgY2xlYW5lZFtrZXldID0gdmFsdWUuZmlsdGVyKGl0ZW0gPT4gaXRlbSAhPT0gbnVsbCAmJiBpdGVtICE9PSB1bmRlZmluZWQpO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIC8vIFRyaW0gc3RyaW5ncyBhbmQgaGFuZGxlIGVtcHR5IHZhbHVlc1xuICAgICAgICBjbGVhbmVkW2tleV0gPSB2YWx1ZS50cmltKCk7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUuY29uc3RydWN0b3IgPT09IE9iamVjdCkge1xuICAgICAgICAvLyBSZWN1cnNpdmVseSBjbGVhbiBuZXN0ZWQgb2JqZWN0c1xuICAgICAgICBjbGVhbmVkW2tleV0gPSBjbGVhbkNvdXJzZURhdGEodmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2xlYW5lZFtrZXldID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIFxuICByZXR1cm4gY2xlYW5lZDtcbn07XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byB2YWxpZGF0ZSBjb3Vyc2UgZGF0YVxuY29uc3QgdmFsaWRhdGVDb3Vyc2VEYXRhID0gKGNvdXJzZURhdGE6IGFueSk6IHsgaXNWYWxpZDogYm9vbGVhbjsgZXJyb3JzOiBzdHJpbmdbXSB9ID0+IHtcbiAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xuICBcbiAgaWYgKCFjb3Vyc2VEYXRhLnRpdGxlIHx8IGNvdXJzZURhdGEudGl0bGUudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgIGVycm9ycy5wdXNoKCdUaXRsZSBpcyByZXF1aXJlZCcpO1xuICB9XG4gIFxuICBpZiAoIWNvdXJzZURhdGEuc2hvcnREZXNjcmlwdGlvbiB8fCBjb3Vyc2VEYXRhLnNob3J0RGVzY3JpcHRpb24udHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgIGVycm9ycy5wdXNoKCdTaG9ydCBkZXNjcmlwdGlvbiBpcyByZXF1aXJlZCcpO1xuICB9XG4gIFxuICBpZiAoIWNvdXJzZURhdGEuY2F0ZWdvcnkgfHwgY291cnNlRGF0YS5jYXRlZ29yeS50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgZXJyb3JzLnB1c2goJ0NhdGVnb3J5IGlzIHJlcXVpcmVkJyk7XG4gIH1cbiAgXG4gIGlmICghY291cnNlRGF0YS5sZXZlbCB8fCAhWydiZWdpbm5lcicsICdpbnRlcm1lZGlhdGUnLCAnYWR2YW5jZWQnXS5pbmNsdWRlcyhjb3Vyc2VEYXRhLmxldmVsKSkge1xuICAgIGVycm9ycy5wdXNoKCdWYWxpZCBsZXZlbCBpcyByZXF1aXJlZCAoYmVnaW5uZXIsIGludGVybWVkaWF0ZSwgb3IgYWR2YW5jZWQpJyk7XG4gIH1cbiAgXG4gIGlmICghY291cnNlRGF0YS5sYW5ndWFnZSB8fCBjb3Vyc2VEYXRhLmxhbmd1YWdlLnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICBlcnJvcnMucHVzaCgnTGFuZ3VhZ2UgaXMgcmVxdWlyZWQnKTtcbiAgfVxuICBcbiAgaWYgKCFjb3Vyc2VEYXRhLmR1cmF0aW9uIHx8IGNvdXJzZURhdGEuZHVyYXRpb24udHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgIGVycm9ycy5wdXNoKCdEdXJhdGlvbiBpcyByZXF1aXJlZCcpO1xuICB9XG4gIFxuICBpZiAoIWNvdXJzZURhdGEuaG91cnMgfHwgY291cnNlRGF0YS5ob3Vycy50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgZXJyb3JzLnB1c2goJ0hvdXJzIGlzIHJlcXVpcmVkJyk7XG4gIH1cbiAgXG4gIGlmIChjb3Vyc2VEYXRhLnByaWNlIDwgMCB8fCBpc05hTihjb3Vyc2VEYXRhLnByaWNlKSkge1xuICAgIGVycm9ycy5wdXNoKCdQcmljZSBtdXN0IGJlIGEgdmFsaWQgbnVtYmVyICgwIG9yIGdyZWF0ZXIpJyk7XG4gIH1cbiAgXG4gIGlmIChjb3Vyc2VEYXRhLm9yaWdpbmFsUHJpY2UgPCAwIHx8IGlzTmFOKGNvdXJzZURhdGEub3JpZ2luYWxQcmljZSkpIHtcbiAgICBlcnJvcnMucHVzaCgnT3JpZ2luYWwgcHJpY2UgbXVzdCBiZSBhIHZhbGlkIG51bWJlciAoMCBvciBncmVhdGVyKScpO1xuICB9XG4gIFxuICBpZiAoY291cnNlRGF0YS5vcmlnaW5hbFByaWNlID4gMCAmJiBjb3Vyc2VEYXRhLnByaWNlID4gY291cnNlRGF0YS5vcmlnaW5hbFByaWNlKSB7XG4gICAgZXJyb3JzLnB1c2goJ1ByaWNlIGNhbm5vdCBiZSBncmVhdGVyIHRoYW4gb3JpZ2luYWwgcHJpY2UnKTtcbiAgfVxuICBcbiAgcmV0dXJuIHtcbiAgICBpc1ZhbGlkOiBlcnJvcnMubGVuZ3RoID09PSAwLFxuICAgIGVycm9yc1xuICB9O1xufTtcblxuZXhwb3J0IGNsYXNzIENvdXJzZVNlcnZpY2Uge1xuICAvLyBDcmVhdGUgYSBuZXcgY291cnNlXG4gIHN0YXRpYyBhc3luYyBjcmVhdGVDb3Vyc2UoY291cnNlRGF0YTogTmV3Q291cnNlKTogUHJvbWlzZTxDb3Vyc2VSZXNwb25zZT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBWYWxpZGF0ZSBjb3Vyc2UgZGF0YVxuICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IHZhbGlkYXRlQ291cnNlRGF0YShjb3Vyc2VEYXRhKTtcbiAgICAgIGlmICghdmFsaWRhdGlvbi5pc1ZhbGlkKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6IGBWYWxpZGF0aW9uIGZhaWxlZDogJHt2YWxpZGF0aW9uLmVycm9ycy5qb2luKCcsICcpfWBcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgY291cnNlSWQgPSB1dWlkdjQoKTtcbiAgICAgIFxuICAgICAgY29uc3QgY291cnNlV2l0aE1ldGFkYXRhID0ge1xuICAgICAgICAuLi5jb3Vyc2VEYXRhLFxuICAgICAgICBfaWQ6IGNvdXJzZUlkLFxuICAgICAgICBjcmVhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLFxuICAgICAgICB1cGRhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLFxuICAgICAgICBzdGF0dXM6IGNvdXJzZURhdGEuc3RhdHVzIHx8ICdkcmFmdCcsXG4gICAgICAgIC8vIEVuc3VyZSB0aGVzZSBmaWVsZHMgYXJlIG51bWJlcnNcbiAgICAgICAgcmF0aW5nOiBOdW1iZXIoY291cnNlRGF0YS5yYXRpbmcpIHx8IDAsXG4gICAgICAgIHRvdGFsUmF0aW5nczogTnVtYmVyKGNvdXJzZURhdGEudG90YWxSYXRpbmdzKSB8fCAwLFxuICAgICAgICBlbnJvbGxlZFN0dWRlbnRzOiBOdW1iZXIoY291cnNlRGF0YS5lbnJvbGxlZFN0dWRlbnRzKSB8fCAwLFxuICAgICAgICBwcmljZTogTnVtYmVyKGNvdXJzZURhdGEucHJpY2UpIHx8IDAsXG4gICAgICAgIG9yaWdpbmFsUHJpY2U6IE51bWJlcihjb3Vyc2VEYXRhLm9yaWdpbmFsUHJpY2UpIHx8IDAsXG4gICAgICAgIC8vIEVuc3VyZSBhcnJheXMgYXJlIHByb3Blcmx5IGluaXRpYWxpemVkXG4gICAgICAgIGxlYXJuaW5nT3V0Y29tZXM6IEFycmF5LmlzQXJyYXkoY291cnNlRGF0YS5sZWFybmluZ091dGNvbWVzKSA/IGNvdXJzZURhdGEubGVhcm5pbmdPdXRjb21lcy5maWx0ZXIoaXRlbSA9PiBpdGVtICYmIGl0ZW0udHJpbSgpKSA6IFtdLFxuICAgICAgICBmZWF0dXJlczogQXJyYXkuaXNBcnJheShjb3Vyc2VEYXRhLmZlYXR1cmVzKSA/IGNvdXJzZURhdGEuZmVhdHVyZXMuZmlsdGVyKGl0ZW0gPT4gaXRlbSAmJiBpdGVtLnRyaW0oKSkgOiBbXSxcbiAgICAgICAgc2tpbGxzOiBBcnJheS5pc0FycmF5KGNvdXJzZURhdGEuc2tpbGxzKSA/IGNvdXJzZURhdGEuc2tpbGxzLmZpbHRlcihpdGVtID0+IGl0ZW0gJiYgaXRlbS50cmltKCkpIDogW10sXG4gICAgICAgIHJlcXVpcmVtZW50czogQXJyYXkuaXNBcnJheShjb3Vyc2VEYXRhLnJlcXVpcmVtZW50cykgPyBjb3Vyc2VEYXRhLnJlcXVpcmVtZW50cy5maWx0ZXIoaXRlbSA9PiBpdGVtICYmIGl0ZW0udHJpbSgpKSA6IFtdLFxuICAgICAgICBtb2R1bGU6IEFycmF5LmlzQXJyYXkoY291cnNlRGF0YS5tb2R1bGUpID8gY291cnNlRGF0YS5tb2R1bGUgOiBbXSxcbiAgICAgICAgaGlnaGxpZ2h0czogQXJyYXkuaXNBcnJheShjb3Vyc2VEYXRhLmhpZ2hsaWdodHMpID8gY291cnNlRGF0YS5oaWdobGlnaHRzIDogW10sXG4gICAgICAgIHByb2plY3Q6IEFycmF5LmlzQXJyYXkoY291cnNlRGF0YS5wcm9qZWN0KSA/IGNvdXJzZURhdGEucHJvamVjdCA6IFtdLFxuICAgICAgICBwcm9ncmFtRm9yOiBBcnJheS5pc0FycmF5KGNvdXJzZURhdGEucHJvZ3JhbUZvcikgPyBjb3Vyc2VEYXRhLnByb2dyYW1Gb3IgOiBbXSxcbiAgICAgICAgLy8gRW5zdXJlIHN0cmluZ3MgYXJlIG5vdCB1bmRlZmluZWRcbiAgICAgICAgdGl0bGU6IGNvdXJzZURhdGEudGl0bGU/LnRyaW0oKSB8fCAnJyxcbiAgICAgICAgc2x1ZzogY291cnNlRGF0YS5zbHVnPy50cmltKCkgfHwgY291cnNlRGF0YS50aXRsZT8udG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMrL2csICctJykucmVwbGFjZSgvW15hLXowLTktXS9nLCAnJykgfHwgJycsXG4gICAgICAgIHNob3J0RGVzY3JpcHRpb246IGNvdXJzZURhdGEuc2hvcnREZXNjcmlwdGlvbj8udHJpbSgpIHx8ICcnLFxuICAgICAgICBjYXRlZ29yeTogY291cnNlRGF0YS5jYXRlZ29yeT8udHJpbSgpIHx8ICcnLFxuICAgICAgICBsZXZlbDogY291cnNlRGF0YS5sZXZlbCB8fCAnYmVnaW5uZXInLFxuICAgICAgICBsYW5ndWFnZTogY291cnNlRGF0YS5sYW5ndWFnZT8udHJpbSgpIHx8ICcnLFxuICAgICAgICBkdXJhdGlvbjogY291cnNlRGF0YS5kdXJhdGlvbj8udHJpbSgpIHx8ICcnLFxuICAgICAgICBob3VyczogY291cnNlRGF0YS5ob3Vycz8udHJpbSgpIHx8ICcnLFxuICAgICAgICBwcm9ncmFtQnk6IGNvdXJzZURhdGEucHJvZ3JhbUJ5Py50cmltKCkgfHwgJ0FkbWluJyxcbiAgICAgICAgbGFzdFVwZGF0ZWQ6IGNvdXJzZURhdGEubGFzdFVwZGF0ZWQgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICBwYXltZW50TGluazogY291cnNlRGF0YS5wYXltZW50TGluaz8udHJpbSgpIHx8ICcnLFxuICAgICAgICBiYWNrZ3JvdW5kSW1hZ2U6IGNvdXJzZURhdGEuYmFja2dyb3VuZEltYWdlPy50cmltKCkgfHwgJycsXG4gICAgICAgIGNlcnRpZmljYXRlSW1hZ2U6IGNvdXJzZURhdGEuY2VydGlmaWNhdGVJbWFnZT8udHJpbSgpIHx8ICcnLFxuICAgICAgICBnbG9iYWxTdGF0dXM6IGNvdXJzZURhdGEuZ2xvYmFsU3RhdHVzPy50cmltKCkgfHwgJycsXG4gICAgICAgIHN0YXJ0RGF0ZTogY291cnNlRGF0YS5zdGFydERhdGU/LnRyaW0oKSB8fCAnJyxcbiAgICAgICAgLy8gRW5zdXJlIHRvb2xzRGF0YSBoYXMgcHJvcGVyIHN0cnVjdHVyZVxuICAgICAgICB0b29sc0RhdGE6IGNvdXJzZURhdGEudG9vbHNEYXRhIHx8IHtcbiAgICAgICAgICBzZWN0aW9uVGl0bGU6ICcnLFxuICAgICAgICAgIGNhdGVnb3J5OiAnJyxcbiAgICAgICAgICB0b29sc0NvdW50OiAnMCcsXG4gICAgICAgICAgZGlzcGxheUltYWdlOiAnJyxcbiAgICAgICAgICB0b29sczogW11cbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgLy8gQ2xlYW4gdGhlIGRhdGEgYmVmb3JlIHNlbmRpbmdcbiAgICAgIGNvbnN0IGNsZWFuZWREYXRhID0gY2xlYW5Db3Vyc2VEYXRhKGNvdXJzZVdpdGhNZXRhZGF0YSk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCdDcmVhdGluZyBjb3Vyc2Ugd2l0aCBjbGVhbmVkIGRhdGE6Jywge1xuICAgICAgICB0aXRsZTogY2xlYW5lZERhdGEudGl0bGUsXG4gICAgICAgIHN0YXR1czogY2xlYW5lZERhdGEuc3RhdHVzLFxuICAgICAgICBwcmljZTogY2xlYW5lZERhdGEucHJpY2VcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCBkb2NSZWYgPSBhd2FpdCBhZGREb2MoY29sbGVjdGlvbihkYiwgQ09MTEVDVElPTl9OQU1FKSwgY2xlYW5lZERhdGEpO1xuICAgICAgXG4gICAgICBjb25zdCBjcmVhdGVkQ291cnNlOiBDb3Vyc2UgPSB7XG4gICAgICAgIC4uLmNsZWFuZWREYXRhLFxuICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKVxuICAgICAgfSBhcyBDb3Vyc2U7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IGNyZWF0ZWRDb3Vyc2VcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgY291cnNlOicsIGVycm9yKTtcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGhhbmRsZUZpcmVzdG9yZUVycm9yKGVycm9yKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogZXJyb3JNZXNzYWdlXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8vIEdldCBhbGwgY291cnNlcyB3aXRoIG9wdGlvbmFsIHBhZ2luYXRpb24gYW5kIGZpbHRlcmluZ1xuICBzdGF0aWMgYXN5bmMgZ2V0QWxsQ291cnNlcyhvcHRpb25zPzoge1xuICAgIHBhZ2VTaXplPzogbnVtYmVyO1xuICAgIGxhc3REb2M/OiBEb2N1bWVudFNuYXBzaG90O1xuICAgIHN0YXR1cz86ICdkcmFmdCcgfCAncHVibGlzaGVkJztcbiAgICBjYXRlZ29yeT86IHN0cmluZztcbiAgICBzZWFyY2hUZXJtPzogc3RyaW5nO1xuICB9KTogUHJvbWlzZTxDb3Vyc2VzUmVzcG9uc2U+IHtcbiAgICB0cnkge1xuICAgICAgbGV0IHEgPSBxdWVyeShjb2xsZWN0aW9uKGRiLCBDT0xMRUNUSU9OX05BTUUpKTtcbiAgICAgIFxuICAgICAgLy8gQWRkIGZpbHRlcnNcbiAgICAgIGlmIChvcHRpb25zPy5zdGF0dXMpIHtcbiAgICAgICAgcSA9IHF1ZXJ5KHEsIHdoZXJlKCdzdGF0dXMnLCAnPT0nLCBvcHRpb25zLnN0YXR1cykpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAob3B0aW9ucz8uY2F0ZWdvcnkpIHtcbiAgICAgICAgcSA9IHF1ZXJ5KHEsIHdoZXJlKCdjYXRlZ29yeScsICc9PScsIG9wdGlvbnMuY2F0ZWdvcnkpKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQWRkIG9yZGVyaW5nXG4gICAgICBxID0gcXVlcnkocSwgb3JkZXJCeSgnY3JlYXRlZEF0JywgJ2Rlc2MnKSk7XG4gICAgICBcbiAgICAgIC8vIEFkZCBwYWdpbmF0aW9uXG4gICAgICBpZiAob3B0aW9ucz8ucGFnZVNpemUpIHtcbiAgICAgICAgcSA9IHF1ZXJ5KHEsIGZpcmVzdG9yZUxpbWl0KG9wdGlvbnMucGFnZVNpemUpKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKG9wdGlvbnM/Lmxhc3REb2MpIHtcbiAgICAgICAgcSA9IHF1ZXJ5KHEsIHN0YXJ0QWZ0ZXIob3B0aW9ucy5sYXN0RG9jKSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IHF1ZXJ5U25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xuICAgICAgXG4gICAgICBjb25zdCBjb3Vyc2VzOiBDb3Vyc2VbXSA9IFtdO1xuICAgICAgcXVlcnlTbmFwc2hvdC5mb3JFYWNoKChkb2MpID0+IHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGRvYy5kYXRhKCk7XG4gICAgICAgIGNvbnN0IGNvdXJzZTogQ291cnNlID0ge1xuICAgICAgICAgIC4uLmRhdGEsXG4gICAgICAgICAgY3JlYXRlZEF0OiBkYXRhLmNyZWF0ZWRBdD8udG9EYXRlKCkgfHwgbmV3IERhdGUoKSxcbiAgICAgICAgICB1cGRhdGVkQXQ6IGRhdGEudXBkYXRlZEF0Py50b0RhdGUoKSB8fCBuZXcgRGF0ZSgpLFxuICAgICAgICAgIC8vIEVuc3VyZSByZXF1aXJlZCBmaWVsZHMgaGF2ZSBkZWZhdWx0IHZhbHVlc1xuICAgICAgICAgIHJhdGluZzogTnVtYmVyKGRhdGEucmF0aW5nKSB8fCAwLFxuICAgICAgICAgIHRvdGFsUmF0aW5nczogTnVtYmVyKGRhdGEudG90YWxSYXRpbmdzKSB8fCAwLFxuICAgICAgICAgIGVucm9sbGVkU3R1ZGVudHM6IE51bWJlcihkYXRhLmVucm9sbGVkU3R1ZGVudHMpIHx8IDAsXG4gICAgICAgICAgcHJpY2U6IE51bWJlcihkYXRhLnByaWNlKSB8fCAwLFxuICAgICAgICAgIG9yaWdpbmFsUHJpY2U6IE51bWJlcihkYXRhLm9yaWdpbmFsUHJpY2UpIHx8IDAsXG4gICAgICAgICAgbGVhcm5pbmdPdXRjb21lczogQXJyYXkuaXNBcnJheShkYXRhLmxlYXJuaW5nT3V0Y29tZXMpID8gZGF0YS5sZWFybmluZ091dGNvbWVzIDogW10sXG4gICAgICAgICAgZmVhdHVyZXM6IEFycmF5LmlzQXJyYXkoZGF0YS5mZWF0dXJlcykgPyBkYXRhLmZlYXR1cmVzIDogW10sXG4gICAgICAgICAgc2tpbGxzOiBBcnJheS5pc0FycmF5KGRhdGEuc2tpbGxzKSA/IGRhdGEuc2tpbGxzIDogW10sXG4gICAgICAgICAgcmVxdWlyZW1lbnRzOiBBcnJheS5pc0FycmF5KGRhdGEucmVxdWlyZW1lbnRzKSA/IGRhdGEucmVxdWlyZW1lbnRzIDogW10sXG4gICAgICAgICAgbW9kdWxlOiBBcnJheS5pc0FycmF5KGRhdGEubW9kdWxlKSA/IGRhdGEubW9kdWxlIDogW10sXG4gICAgICAgICAgaGlnaGxpZ2h0czogQXJyYXkuaXNBcnJheShkYXRhLmhpZ2hsaWdodHMpID8gZGF0YS5oaWdobGlnaHRzIDogW10sXG4gICAgICAgICAgcHJvamVjdDogQXJyYXkuaXNBcnJheShkYXRhLnByb2plY3QpID8gZGF0YS5wcm9qZWN0IDogW10sXG4gICAgICAgICAgcHJvZ3JhbUZvcjogQXJyYXkuaXNBcnJheShkYXRhLnByb2dyYW1Gb3IpID8gZGF0YS5wcm9ncmFtRm9yIDogW10sXG4gICAgICAgICAgdG9vbHNEYXRhOiBkYXRhLnRvb2xzRGF0YSB8fCB7XG4gICAgICAgICAgICBzZWN0aW9uVGl0bGU6ICcnLFxuICAgICAgICAgICAgY2F0ZWdvcnk6ICcnLFxuICAgICAgICAgICAgdG9vbHNDb3VudDogJzAnLFxuICAgICAgICAgICAgZGlzcGxheUltYWdlOiAnJyxcbiAgICAgICAgICAgIHRvb2xzOiBbXVxuICAgICAgICAgIH1cbiAgICAgICAgfSBhcyBDb3Vyc2U7XG4gICAgICAgIFxuICAgICAgICAvLyBBcHBseSBzZWFyY2ggZmlsdGVyIG9uIGNsaWVudCBzaWRlIChmb3Igc2ltcGxpY2l0eSlcbiAgICAgICAgaWYgKG9wdGlvbnM/LnNlYXJjaFRlcm0pIHtcbiAgICAgICAgICBjb25zdCBzZWFyY2hMb3dlciA9IG9wdGlvbnMuc2VhcmNoVGVybS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgIGNvbnN0IG1hdGNoZXNTZWFyY2ggPSBcbiAgICAgICAgICAgIGNvdXJzZS50aXRsZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaExvd2VyKSB8fFxuICAgICAgICAgICAgY291cnNlLmNhdGVnb3J5LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoTG93ZXIpIHx8XG4gICAgICAgICAgICBjb3Vyc2Uuc2hvcnREZXNjcmlwdGlvbi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaExvd2VyKSB8fFxuICAgICAgICAgICAgY291cnNlLnByb2dyYW1CeS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHNlYXJjaExvd2VyKTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAobWF0Y2hlc1NlYXJjaCkge1xuICAgICAgICAgICAgY291cnNlcy5wdXNoKGNvdXJzZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvdXJzZXMucHVzaChjb3Vyc2UpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YTogY291cnNlcyxcbiAgICAgICAgcGFnaW5hdGlvbjoge1xuICAgICAgICAgIHRvdGFsOiBjb3Vyc2VzLmxlbmd0aCxcbiAgICAgICAgICBwYWdlOiAxLFxuICAgICAgICAgIHBhZ2VzOiAxXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgY291cnNlczonLCBlcnJvcik7XG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBoYW5kbGVGaXJlc3RvcmVFcnJvcihlcnJvcik7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IGVycm9yTWVzc2FnZVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvLyBHZXQgY291cnNlIGJ5IElEXG4gIHN0YXRpYyBhc3luYyBnZXRDb3Vyc2VCeUlkKGNvdXJzZUlkOiBzdHJpbmcpOiBQcm9taXNlPENvdXJzZVJlc3BvbnNlPiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghY291cnNlSWQgfHwgY291cnNlSWQudHJpbSgpID09PSAnJykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiAnQ291cnNlIElEIGlzIHJlcXVpcmVkJ1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBjb25zdCBxID0gcXVlcnkoY29sbGVjdGlvbihkYiwgQ09MTEVDVElPTl9OQU1FKSwgd2hlcmUoJ19pZCcsICc9PScsIGNvdXJzZUlkKSk7XG4gICAgICBjb25zdCBxdWVyeVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgICAgIFxuICAgICAgaWYgKHF1ZXJ5U25hcHNob3QuZW1wdHkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogJ0NvdXJzZSBub3QgZm91bmQnXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRvYyA9IHF1ZXJ5U25hcHNob3QuZG9jc1swXTtcbiAgICAgIGNvbnN0IGRhdGEgPSBkb2MuZGF0YSgpO1xuICAgICAgY29uc3QgY291cnNlOiBDb3Vyc2UgPSB7XG4gICAgICAgIC4uLmRhdGEsXG4gICAgICAgIGNyZWF0ZWRBdDogZGF0YS5jcmVhdGVkQXQ/LnRvRGF0ZSgpIHx8IG5ldyBEYXRlKCksXG4gICAgICAgIHVwZGF0ZWRBdDogZGF0YS51cGRhdGVkQXQ/LnRvRGF0ZSgpIHx8IG5ldyBEYXRlKCksXG4gICAgICAgIC8vIEVuc3VyZSByZXF1aXJlZCBmaWVsZHMgaGF2ZSBkZWZhdWx0IHZhbHVlc1xuICAgICAgICByYXRpbmc6IE51bWJlcihkYXRhLnJhdGluZykgfHwgMCxcbiAgICAgICAgdG90YWxSYXRpbmdzOiBOdW1iZXIoZGF0YS50b3RhbFJhdGluZ3MpIHx8IDAsXG4gICAgICAgIGVucm9sbGVkU3R1ZGVudHM6IE51bWJlcihkYXRhLmVucm9sbGVkU3R1ZGVudHMpIHx8IDAsXG4gICAgICAgIHByaWNlOiBOdW1iZXIoZGF0YS5wcmljZSkgfHwgMCxcbiAgICAgICAgb3JpZ2luYWxQcmljZTogTnVtYmVyKGRhdGEub3JpZ2luYWxQcmljZSkgfHwgMCxcbiAgICAgICAgbGVhcm5pbmdPdXRjb21lczogQXJyYXkuaXNBcnJheShkYXRhLmxlYXJuaW5nT3V0Y29tZXMpID8gZGF0YS5sZWFybmluZ091dGNvbWVzIDogW10sXG4gICAgICAgIGZlYXR1cmVzOiBBcnJheS5pc0FycmF5KGRhdGEuZmVhdHVyZXMpID8gZGF0YS5mZWF0dXJlcyA6IFtdLFxuICAgICAgICBza2lsbHM6IEFycmF5LmlzQXJyYXkoZGF0YS5za2lsbHMpID8gZGF0YS5za2lsbHMgOiBbXSxcbiAgICAgICAgcmVxdWlyZW1lbnRzOiBBcnJheS5pc0FycmF5KGRhdGEucmVxdWlyZW1lbnRzKSA/IGRhdGEucmVxdWlyZW1lbnRzIDogW10sXG4gICAgICAgIG1vZHVsZTogQXJyYXkuaXNBcnJheShkYXRhLm1vZHVsZSkgPyBkYXRhLm1vZHVsZSA6IFtdLFxuICAgICAgICBoaWdobGlnaHRzOiBBcnJheS5pc0FycmF5KGRhdGEuaGlnaGxpZ2h0cykgPyBkYXRhLmhpZ2hsaWdodHMgOiBbXSxcbiAgICAgICAgcHJvamVjdDogQXJyYXkuaXNBcnJheShkYXRhLnByb2plY3QpID8gZGF0YS5wcm9qZWN0IDogW10sXG4gICAgICAgIHByb2dyYW1Gb3I6IEFycmF5LmlzQXJyYXkoZGF0YS5wcm9ncmFtRm9yKSA/IGRhdGEucHJvZ3JhbUZvciA6IFtdLFxuICAgICAgICB0b29sc0RhdGE6IGRhdGEudG9vbHNEYXRhIHx8IHtcbiAgICAgICAgICBzZWN0aW9uVGl0bGU6ICcnLFxuICAgICAgICAgIGNhdGVnb3J5OiAnJyxcbiAgICAgICAgICB0b29sc0NvdW50OiAnMCcsXG4gICAgICAgICAgZGlzcGxheUltYWdlOiAnJyxcbiAgICAgICAgICB0b29sczogW11cbiAgICAgICAgfVxuICAgICAgfSBhcyBDb3Vyc2U7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IGNvdXJzZVxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBjb3Vyc2U6JywgZXJyb3IpO1xuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gaGFuZGxlRmlyZXN0b3JlRXJyb3IoZXJyb3IpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2VcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLy8gR2V0IGNvdXJzZSBieSBzbHVnXG4gIHN0YXRpYyBhc3luYyBnZXRDb3Vyc2VCeVNsdWcoc2x1Zzogc3RyaW5nKTogUHJvbWlzZTxDb3Vyc2VSZXNwb25zZT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIXNsdWcgfHwgc2x1Zy50cmltKCkgPT09ICcnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6ICdDb3Vyc2Ugc2x1ZyBpcyByZXF1aXJlZCdcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcSA9IHF1ZXJ5KGNvbGxlY3Rpb24oZGIsIENPTExFQ1RJT05fTkFNRSksIHdoZXJlKCdzbHVnJywgJz09Jywgc2x1ZykpO1xuICAgICAgY29uc3QgcXVlcnlTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG4gICAgICBcbiAgICAgIGlmIChxdWVyeVNuYXBzaG90LmVtcHR5KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6ICdDb3Vyc2Ugbm90IGZvdW5kJ1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkb2MgPSBxdWVyeVNuYXBzaG90LmRvY3NbMF07XG4gICAgICBjb25zdCBkYXRhID0gZG9jLmRhdGEoKTtcbiAgICAgIGNvbnN0IGNvdXJzZTogQ291cnNlID0ge1xuICAgICAgICAuLi5kYXRhLFxuICAgICAgICBjcmVhdGVkQXQ6IGRhdGEuY3JlYXRlZEF0Py50b0RhdGUoKSB8fCBuZXcgRGF0ZSgpLFxuICAgICAgICB1cGRhdGVkQXQ6IGRhdGEudXBkYXRlZEF0Py50b0RhdGUoKSB8fCBuZXcgRGF0ZSgpXG4gICAgICB9IGFzIENvdXJzZTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YTogY291cnNlXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGNvdXJzZSBieSBzbHVnOicsIGVycm9yKTtcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGhhbmRsZUZpcmVzdG9yZUVycm9yKGVycm9yKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogZXJyb3JNZXNzYWdlXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8vIFVwZGF0ZSBjb3Vyc2VcbiAgc3RhdGljIGFzeW5jIHVwZGF0ZUNvdXJzZShjb3Vyc2VJZDogc3RyaW5nLCBjb3Vyc2VEYXRhOiBQYXJ0aWFsPENvdXJzZT4pOiBQcm9taXNlPENvdXJzZVJlc3BvbnNlPiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghY291cnNlSWQgfHwgY291cnNlSWQudHJpbSgpID09PSAnJykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiAnQ291cnNlIElEIGlzIHJlcXVpcmVkJ1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvLyBWYWxpZGF0ZSB1cGRhdGVkIGRhdGEgaWYgaXQgY29udGFpbnMgcmVxdWlyZWQgZmllbGRzXG4gICAgICBpZiAoY291cnNlRGF0YS50aXRsZSB8fCBjb3Vyc2VEYXRhLnNob3J0RGVzY3JpcHRpb24gfHwgY291cnNlRGF0YS5jYXRlZ29yeSkge1xuICAgICAgICBjb25zdCB2YWxpZGF0aW9uID0gdmFsaWRhdGVDb3Vyc2VEYXRhKHtcbiAgICAgICAgICB0aXRsZTogY291cnNlRGF0YS50aXRsZSB8fCAndGVtcCcsXG4gICAgICAgICAgc2hvcnREZXNjcmlwdGlvbjogY291cnNlRGF0YS5zaG9ydERlc2NyaXB0aW9uIHx8ICd0ZW1wJyxcbiAgICAgICAgICBjYXRlZ29yeTogY291cnNlRGF0YS5jYXRlZ29yeSB8fCAndGVtcCcsXG4gICAgICAgICAgbGV2ZWw6IGNvdXJzZURhdGEubGV2ZWwgfHwgJ2JlZ2lubmVyJyxcbiAgICAgICAgICBsYW5ndWFnZTogY291cnNlRGF0YS5sYW5ndWFnZSB8fCAndGVtcCcsXG4gICAgICAgICAgZHVyYXRpb246IGNvdXJzZURhdGEuZHVyYXRpb24gfHwgJ3RlbXAnLFxuICAgICAgICAgIGhvdXJzOiBjb3Vyc2VEYXRhLmhvdXJzIHx8ICd0ZW1wJyxcbiAgICAgICAgICBwcmljZTogY291cnNlRGF0YS5wcmljZSB8fCAwLFxuICAgICAgICAgIG9yaWdpbmFsUHJpY2U6IGNvdXJzZURhdGEub3JpZ2luYWxQcmljZSB8fCAwXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgaWYgKCF2YWxpZGF0aW9uLmlzVmFsaWQpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBlcnJvcjogYFZhbGlkYXRpb24gZmFpbGVkOiAke3ZhbGlkYXRpb24uZXJyb3JzLmpvaW4oJywgJyl9YFxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgcSA9IHF1ZXJ5KGNvbGxlY3Rpb24oZGIsIENPTExFQ1RJT05fTkFNRSksIHdoZXJlKCdfaWQnLCAnPT0nLCBjb3Vyc2VJZCkpO1xuICAgICAgY29uc3QgcXVlcnlTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG4gICAgICBcbiAgICAgIGlmIChxdWVyeVNuYXBzaG90LmVtcHR5KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6ICdDb3Vyc2Ugbm90IGZvdW5kJ1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkb2NSZWYgPSBxdWVyeVNuYXBzaG90LmRvY3NbMF0ucmVmO1xuICAgICAgXG4gICAgICBjb25zdCB1cGRhdGVEYXRhID0ge1xuICAgICAgICAuLi5jb3Vyc2VEYXRhLFxuICAgICAgICB1cGRhdGVkQXQ6IHNlcnZlclRpbWVzdGFtcCgpLFxuICAgICAgICBsYXN0VXBkYXRlZDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAvLyBFbnN1cmUgbnVtZXJpYyBmaWVsZHMgYXJlIHByb3Blcmx5IHR5cGVkXG4gICAgICAgIC4uLihjb3Vyc2VEYXRhLnJhdGluZyAhPT0gdW5kZWZpbmVkICYmIHsgcmF0aW5nOiBOdW1iZXIoY291cnNlRGF0YS5yYXRpbmcpIH0pLFxuICAgICAgICAuLi4oY291cnNlRGF0YS50b3RhbFJhdGluZ3MgIT09IHVuZGVmaW5lZCAmJiB7IHRvdGFsUmF0aW5nczogTnVtYmVyKGNvdXJzZURhdGEudG90YWxSYXRpbmdzKSB9KSxcbiAgICAgICAgLi4uKGNvdXJzZURhdGEuZW5yb2xsZWRTdHVkZW50cyAhPT0gdW5kZWZpbmVkICYmIHsgZW5yb2xsZWRTdHVkZW50czogTnVtYmVyKGNvdXJzZURhdGEuZW5yb2xsZWRTdHVkZW50cykgfSksXG4gICAgICAgIC4uLihjb3Vyc2VEYXRhLnByaWNlICE9PSB1bmRlZmluZWQgJiYgeyBwcmljZTogTnVtYmVyKGNvdXJzZURhdGEucHJpY2UpIH0pLFxuICAgICAgICAuLi4oY291cnNlRGF0YS5vcmlnaW5hbFByaWNlICE9PSB1bmRlZmluZWQgJiYgeyBvcmlnaW5hbFByaWNlOiBOdW1iZXIoY291cnNlRGF0YS5vcmlnaW5hbFByaWNlKSB9KSxcbiAgICAgICAgLy8gRW5zdXJlIGFycmF5cyBhcmUgcHJvcGVybHkgZmlsdGVyZWRcbiAgICAgICAgLi4uKGNvdXJzZURhdGEubGVhcm5pbmdPdXRjb21lcyAmJiB7IFxuICAgICAgICAgIGxlYXJuaW5nT3V0Y29tZXM6IEFycmF5LmlzQXJyYXkoY291cnNlRGF0YS5sZWFybmluZ091dGNvbWVzKSBcbiAgICAgICAgICAgID8gY291cnNlRGF0YS5sZWFybmluZ091dGNvbWVzLmZpbHRlcihpdGVtID0+IGl0ZW0gJiYgaXRlbS50cmltKCkpIFxuICAgICAgICAgICAgOiBbXSBcbiAgICAgICAgfSksXG4gICAgICAgIC4uLihjb3Vyc2VEYXRhLmZlYXR1cmVzICYmIHsgXG4gICAgICAgICAgZmVhdHVyZXM6IEFycmF5LmlzQXJyYXkoY291cnNlRGF0YS5mZWF0dXJlcykgXG4gICAgICAgICAgICA/IGNvdXJzZURhdGEuZmVhdHVyZXMuZmlsdGVyKGl0ZW0gPT4gaXRlbSAmJiBpdGVtLnRyaW0oKSkgXG4gICAgICAgICAgICA6IFtdIFxuICAgICAgICB9KSxcbiAgICAgICAgLi4uKGNvdXJzZURhdGEuc2tpbGxzICYmIHsgXG4gICAgICAgICAgc2tpbGxzOiBBcnJheS5pc0FycmF5KGNvdXJzZURhdGEuc2tpbGxzKSBcbiAgICAgICAgICAgID8gY291cnNlRGF0YS5za2lsbHMuZmlsdGVyKGl0ZW0gPT4gaXRlbSAmJiBpdGVtLnRyaW0oKSkgXG4gICAgICAgICAgICA6IFtdIFxuICAgICAgICB9KSxcbiAgICAgICAgLi4uKGNvdXJzZURhdGEucmVxdWlyZW1lbnRzICYmIHsgXG4gICAgICAgICAgcmVxdWlyZW1lbnRzOiBBcnJheS5pc0FycmF5KGNvdXJzZURhdGEucmVxdWlyZW1lbnRzKSBcbiAgICAgICAgICAgID8gY291cnNlRGF0YS5yZXF1aXJlbWVudHMuZmlsdGVyKGl0ZW0gPT4gaXRlbSAmJiBpdGVtLnRyaW0oKSkgXG4gICAgICAgICAgICA6IFtdIFxuICAgICAgICB9KSxcbiAgICAgICAgLy8gVXBkYXRlIHNsdWcgaWYgdGl0bGUgY2hhbmdlZFxuICAgICAgICAuLi4oY291cnNlRGF0YS50aXRsZSAmJiB7IFxuICAgICAgICAgIHNsdWc6IGNvdXJzZURhdGEudGl0bGUudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMrL2csICctJykucmVwbGFjZSgvW15hLXowLTktXS9nLCAnJykgXG4gICAgICAgIH0pXG4gICAgICB9O1xuXG4gICAgICAvLyBDbGVhbiB0aGUgZGF0YSBiZWZvcmUgc2VuZGluZ1xuICAgICAgY29uc3QgY2xlYW5lZERhdGEgPSBjbGVhbkNvdXJzZURhdGEodXBkYXRlRGF0YSk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCdVcGRhdGluZyBjb3Vyc2Ugd2l0aCBjbGVhbmVkIGRhdGE6Jywge1xuICAgICAgICBjb3Vyc2VJZCxcbiAgICAgICAgZmllbGRzVXBkYXRlZDogT2JqZWN0LmtleXMoY2xlYW5lZERhdGEpXG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgdXBkYXRlRG9jKGRvY1JlZiwgY2xlYW5lZERhdGEpO1xuXG4gICAgICAvLyBGZXRjaCB0aGUgdXBkYXRlZCBjb3Vyc2VcbiAgICAgIGNvbnN0IHVwZGF0ZWRDb3Vyc2VSZXNwb25zZSA9IGF3YWl0IHRoaXMuZ2V0Q291cnNlQnlJZChjb3Vyc2VJZCk7XG4gICAgICBcbiAgICAgIGlmICh1cGRhdGVkQ291cnNlUmVzcG9uc2Uuc3VjY2Vzcykge1xuICAgICAgICByZXR1cm4gdXBkYXRlZENvdXJzZVJlc3BvbnNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIC4uLmNvdXJzZURhdGEsXG4gICAgICAgICAgICBfaWQ6IGNvdXJzZUlkLFxuICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpXG4gICAgICAgICAgfSBhcyBDb3Vyc2VcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBjb3Vyc2U6JywgZXJyb3IpO1xuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gaGFuZGxlRmlyZXN0b3JlRXJyb3IoZXJyb3IpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2VcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLy8gRGVsZXRlIGNvdXJzZVxuICBzdGF0aWMgYXN5bmMgZGVsZXRlQ291cnNlKGNvdXJzZUlkOiBzdHJpbmcpOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgZXJyb3I/OiBzdHJpbmcgfT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIWNvdXJzZUlkIHx8IGNvdXJzZUlkLnRyaW0oKSA9PT0gJycpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogJ0NvdXJzZSBJRCBpcyByZXF1aXJlZCdcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcSA9IHF1ZXJ5KGNvbGxlY3Rpb24oZGIsIENPTExFQ1RJT05fTkFNRSksIHdoZXJlKCdfaWQnLCAnPT0nLCBjb3Vyc2VJZCkpO1xuICAgICAgY29uc3QgcXVlcnlTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG4gICAgICBcbiAgICAgIGlmIChxdWVyeVNuYXBzaG90LmVtcHR5KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6ICdDb3Vyc2Ugbm90IGZvdW5kJ1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBjb25zdCBkb2NSZWYgPSBxdWVyeVNuYXBzaG90LmRvY3NbMF0ucmVmO1xuICAgICAgY29uc3QgY291cnNlRGF0YSA9IHF1ZXJ5U25hcHNob3QuZG9jc1swXS5kYXRhKCk7XG4gICAgICBcbiAgICAgIC8vIERlbGV0ZSBhc3NvY2lhdGVkIGltYWdlcyBmcm9tIHN0b3JhZ2VcbiAgICAgIGlmIChjb3Vyc2VEYXRhLmJhY2tncm91bmRJbWFnZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuZGVsZXRlSW1hZ2UoY291cnNlRGF0YS5iYWNrZ3JvdW5kSW1hZ2UpO1xuICAgICAgICB9IGNhdGNoIChpbWFnZUVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gZGVsZXRlIGJhY2tncm91bmQgaW1hZ2U6JywgaW1hZ2VFcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGNvdXJzZURhdGEuY2VydGlmaWNhdGVJbWFnZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IHRoaXMuZGVsZXRlSW1hZ2UoY291cnNlRGF0YS5jZXJ0aWZpY2F0ZUltYWdlKTtcbiAgICAgICAgfSBjYXRjaCAoaW1hZ2VFcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIGRlbGV0ZSBjZXJ0aWZpY2F0ZSBpbWFnZTonLCBpbWFnZUVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBhd2FpdCBkZWxldGVEb2MoZG9jUmVmKTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ0NvdXJzZSBkZWxldGVkIHN1Y2Nlc3NmdWxseTonLCBjb3Vyc2VJZCk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWVcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgY291cnNlOicsIGVycm9yKTtcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGhhbmRsZUZpcmVzdG9yZUVycm9yKGVycm9yKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogZXJyb3JNZXNzYWdlXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8vIEJ1bGsgZGVsZXRlIGNvdXJzZXNcbiAgc3RhdGljIGFzeW5jIGRlbGV0ZUNvdXJzZXMoY291cnNlSWRzOiBzdHJpbmdbXSk6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyBlcnJvcj86IHN0cmluZzsgZGVsZXRlZENvdW50PzogbnVtYmVyIH0+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFjb3Vyc2VJZHMgfHwgY291cnNlSWRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiAnQ291cnNlIElEcyBhcmUgcmVxdWlyZWQnXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGJhdGNoID0gd3JpdGVCYXRjaChkYik7XG4gICAgICBsZXQgZGVsZXRlZENvdW50ID0gMDtcblxuICAgICAgZm9yIChjb25zdCBjb3Vyc2VJZCBvZiBjb3Vyc2VJZHMpIHtcbiAgICAgICAgY29uc3QgcSA9IHF1ZXJ5KGNvbGxlY3Rpb24oZGIsIENPTExFQ1RJT05fTkFNRSksIHdoZXJlKCdfaWQnLCAnPT0nLCBjb3Vyc2VJZCkpO1xuICAgICAgICBjb25zdCBxdWVyeVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgICAgICAgXG4gICAgICAgIGlmICghcXVlcnlTbmFwc2hvdC5lbXB0eSkge1xuICAgICAgICAgIGNvbnN0IGRvY1JlZiA9IHF1ZXJ5U25hcHNob3QuZG9jc1swXS5yZWY7XG4gICAgICAgICAgYmF0Y2guZGVsZXRlKGRvY1JlZik7XG4gICAgICAgICAgZGVsZXRlZENvdW50Kys7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGRlbGV0ZWRDb3VudCA9PT0gMCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiAnTm8gY291cnNlcyBmb3VuZCB0byBkZWxldGUnXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGF3YWl0IGJhdGNoLmNvbW1pdCgpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkZWxldGVkQ291bnRcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYnVsayBkZWxldGluZyBjb3Vyc2VzOicsIGVycm9yKTtcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGhhbmRsZUZpcmVzdG9yZUVycm9yKGVycm9yKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogZXJyb3JNZXNzYWdlXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8vIFVwbG9hZCBpbWFnZSB3aXRoIGJldHRlciBlcnJvciBoYW5kbGluZyBhbmQgb3B0aW1pemF0aW9uXG4gIHN0YXRpYyBhc3luYyB1cGxvYWRJbWFnZShmaWxlOiBGaWxlLCBwYXRoOiBzdHJpbmcpOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgdXJsPzogc3RyaW5nOyBlcnJvcj86IHN0cmluZyB9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFZhbGlkYXRlIGZpbGVcbiAgICAgIGlmICghZmlsZSkge1xuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdObyBmaWxlIHByb3ZpZGVkJyB9O1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoZmlsZS5zaXplID4gNSAqIDEwMjQgKiAxMDI0KSB7IC8vIDVNQiBsaW1pdFxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdGaWxlIHNpemUgbXVzdCBiZSBsZXNzIHRoYW4gNU1CJyB9O1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBhbGxvd2VkVHlwZXMgPSBbJ2ltYWdlL2pwZWcnLCAnaW1hZ2UvanBnJywgJ2ltYWdlL3BuZycsICdpbWFnZS93ZWJwJywgJ2ltYWdlL2dpZiddO1xuICAgICAgaWYgKCFhbGxvd2VkVHlwZXMuaW5jbHVkZXMoZmlsZS50eXBlKSkge1xuICAgICAgICByZXR1cm4geyBcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICAgICAgZXJyb3I6ICdPbmx5IEpQRUcsIFBORywgV2ViUCwgYW5kIEdJRiBpbWFnZXMgYXJlIGFsbG93ZWQnIFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBHZW5lcmF0ZSB1bmlxdWUgZmlsZW5hbWVcbiAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IERhdGUubm93KCk7XG4gICAgICBjb25zdCByYW5kb21TdHJpbmcgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgMTUpO1xuICAgICAgY29uc3QgZmlsZUV4dGVuc2lvbiA9IGZpbGUubmFtZS5zcGxpdCgnLicpLnBvcCgpPy50b0xvd2VyQ2FzZSgpIHx8ICdqcGcnO1xuICAgICAgY29uc3QgZmlsZW5hbWUgPSBgJHt0aW1lc3RhbXB9XyR7cmFuZG9tU3RyaW5nfS4ke2ZpbGVFeHRlbnNpb259YDtcbiAgICAgIFxuICAgICAgY29uc3Qgc3RvcmFnZVJlZiA9IHJlZihzdG9yYWdlLCBgJHtwYXRofS8ke2ZpbGVuYW1lfWApO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygnVXBsb2FkaW5nIGltYWdlOicsIGZpbGVuYW1lLCAnU2l6ZTonLCBmaWxlLnNpemUpO1xuICAgICAgXG4gICAgICAvLyBVcGxvYWQgd2l0aCBtZXRhZGF0YVxuICAgICAgY29uc3QgbWV0YWRhdGEgPSB7XG4gICAgICAgIGNvbnRlbnRUeXBlOiBmaWxlLnR5cGUsXG4gICAgICAgIGN1c3RvbU1ldGFkYXRhOiB7XG4gICAgICAgICAgdXBsb2FkZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgIG9yaWdpbmFsTmFtZTogZmlsZS5uYW1lXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBcbiAgICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgdXBsb2FkQnl0ZXMoc3RvcmFnZVJlZiwgZmlsZSwgbWV0YWRhdGEpO1xuICAgICAgY29uc3QgZG93bmxvYWRVUkwgPSBhd2FpdCBnZXREb3dubG9hZFVSTChzbmFwc2hvdC5yZWYpO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygnSW1hZ2UgdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5OicsIGRvd25sb2FkVVJMKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgdXJsOiBkb3dubG9hZFVSTFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGxvYWRpbmcgaW1hZ2U6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlIHx8ICdGYWlsZWQgdG8gdXBsb2FkIGltYWdlJ1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvLyBEZWxldGUgaW1hZ2UgZnJvbSBzdG9yYWdlXG4gIHN0YXRpYyBhc3luYyBkZWxldGVJbWFnZShpbWFnZVVybDogc3RyaW5nKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IGVycm9yPzogc3RyaW5nIH0+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFpbWFnZVVybCB8fCAhaW1hZ2VVcmwuaW5jbHVkZXMoJ2ZpcmViYXNlJykpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogJ0ludmFsaWQgaW1hZ2UgVVJMJ1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBjb25zdCBpbWFnZVJlZiA9IHJlZihzdG9yYWdlLCBpbWFnZVVybCk7XG4gICAgICBhd2FpdCBkZWxldGVPYmplY3QoaW1hZ2VSZWYpO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygnSW1hZ2UgZGVsZXRlZCBzdWNjZXNzZnVsbHk6JywgaW1hZ2VVcmwpO1xuICAgICAgXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRlbGV0aW5nIGltYWdlOicsIGVycm9yKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSB8fCAnRmFpbGVkIHRvIGRlbGV0ZSBpbWFnZSdcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLy8gR2V0IGNvdXJzZXMgYnkgY2F0ZWdvcnlcbiAgc3RhdGljIGFzeW5jIGdldENvdXJzZXNCeUNhdGVnb3J5KGNhdGVnb3J5OiBzdHJpbmcsIHBhZ2VTaXplPzogbnVtYmVyKTogUHJvbWlzZTxDb3Vyc2VzUmVzcG9uc2U+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFjYXRlZ29yeSB8fCBjYXRlZ29yeS50cmltKCkgPT09ICcnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6ICdDYXRlZ29yeSBpcyByZXF1aXJlZCdcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgbGV0IHEgPSBxdWVyeShcbiAgICAgICAgY29sbGVjdGlvbihkYiwgQ09MTEVDVElPTl9OQU1FKSxcbiAgICAgICAgd2hlcmUoJ2NhdGVnb3J5JywgJz09JywgY2F0ZWdvcnkpLFxuICAgICAgICB3aGVyZSgnc3RhdHVzJywgJz09JywgJ3B1Ymxpc2hlZCcpLFxuICAgICAgICBvcmRlckJ5KCdjcmVhdGVkQXQnLCAnZGVzYycpXG4gICAgICApO1xuXG4gICAgICBpZiAocGFnZVNpemUpIHtcbiAgICAgICAgcSA9IHF1ZXJ5KHEsIGZpcmVzdG9yZUxpbWl0KHBhZ2VTaXplKSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHF1ZXJ5U25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xuICAgICAgXG4gICAgICBjb25zdCBjb3Vyc2VzOiBDb3Vyc2VbXSA9IFtdO1xuICAgICAgcXVlcnlTbmFwc2hvdC5mb3JFYWNoKChkb2MpID0+IHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGRvYy5kYXRhKCk7XG4gICAgICAgIGNvdXJzZXMucHVzaCh7XG4gICAgICAgICAgLi4uZGF0YSxcbiAgICAgICAgICBjcmVhdGVkQXQ6IGRhdGEuY3JlYXRlZEF0Py50b0RhdGUoKSB8fCBuZXcgRGF0ZSgpLFxuICAgICAgICAgIHVwZGF0ZWRBdDogZGF0YS51cGRhdGVkQXQ/LnRvRGF0ZSgpIHx8IG5ldyBEYXRlKClcbiAgICAgICAgfSBhcyBDb3Vyc2UpO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IGNvdXJzZXNcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgY291cnNlcyBieSBjYXRlZ29yeTonLCBlcnJvcik7XG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBoYW5kbGVGaXJlc3RvcmVFcnJvcihlcnJvcik7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IGVycm9yTWVzc2FnZVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvLyBHZXQgcHVibGlzaGVkIGNvdXJzZXMgb25seVxuICBzdGF0aWMgYXN5bmMgZ2V0UHVibGlzaGVkQ291cnNlcyhwYWdlU2l6ZT86IG51bWJlcik6IFByb21pc2U8Q291cnNlc1Jlc3BvbnNlPiB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0QWxsQ291cnNlcyh7IFxuICAgICAgc3RhdHVzOiAncHVibGlzaGVkJywgXG4gICAgICBwYWdlU2l6ZTogcGFnZVNpemUgfHwgNTAgXG4gICAgfSk7XG4gIH1cblxuICAvLyBHZXQgZHJhZnQgY291cnNlcyBvbmx5XG4gIHN0YXRpYyBhc3luYyBnZXREcmFmdENvdXJzZXMocGFnZVNpemU/OiBudW1iZXIpOiBQcm9taXNlPENvdXJzZXNSZXNwb25zZT4ge1xuICAgIHJldHVybiB0aGlzLmdldEFsbENvdXJzZXMoeyBcbiAgICAgIHN0YXR1czogJ2RyYWZ0JywgXG4gICAgICBwYWdlU2l6ZTogcGFnZVNpemUgfHwgNTAgXG4gICAgfSk7XG4gIH1cblxuICAvLyBTZWFyY2ggY291cnNlc1xuICBzdGF0aWMgYXN5bmMgc2VhcmNoQ291cnNlcyhzZWFyY2hUZXJtOiBzdHJpbmcsIG9wdGlvbnM/OiB7XG4gICAgcGFnZVNpemU/OiBudW1iZXI7XG4gICAgY2F0ZWdvcnk/OiBzdHJpbmc7XG4gICAgbGV2ZWw/OiBzdHJpbmc7XG4gICAgc3RhdHVzPzogJ2RyYWZ0JyB8ICdwdWJsaXNoZWQnO1xuICB9KTogUHJvbWlzZTxDb3Vyc2VzUmVzcG9uc2U+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFzZWFyY2hUZXJtIHx8IHNlYXJjaFRlcm0udHJpbSgpID09PSAnJykge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRBbGxDb3Vyc2VzKG9wdGlvbnMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5nZXRBbGxDb3Vyc2VzKHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgc2VhcmNoVGVybTogc2VhcmNoVGVybS50cmltKClcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNlYXJjaGluZyBjb3Vyc2VzOicsIGVycm9yKTtcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGhhbmRsZUZpcmVzdG9yZUVycm9yKGVycm9yKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogZXJyb3JNZXNzYWdlXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8vIEdldCBjb3Vyc2Ugc3RhdGlzdGljc1xuICBzdGF0aWMgYXN5bmMgZ2V0Q291cnNlU3RhdHMoKTogUHJvbWlzZTx7XG4gICAgc3VjY2VzczogYm9vbGVhbjtcbiAgICBkYXRhPzoge1xuICAgICAgdG90YWxDb3Vyc2VzOiBudW1iZXI7XG4gICAgICBwdWJsaXNoZWRDb3Vyc2VzOiBudW1iZXI7XG4gICAgICBkcmFmdENvdXJzZXM6IG51bWJlcjtcbiAgICAgIHRvdGFsU3R1ZGVudHM6IG51bWJlcjtcbiAgICAgIHRvdGFsUmV2ZW51ZTogbnVtYmVyO1xuICAgICAgY2F0ZWdvcmllczogeyBba2V5OiBzdHJpbmddOiBudW1iZXIgfTtcbiAgICAgIGxldmVsczogeyBba2V5OiBzdHJpbmddOiBudW1iZXIgfTtcbiAgICB9O1xuICAgIGVycm9yPzogc3RyaW5nO1xuICB9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5nZXRBbGxDb3Vyc2VzKCk7XG4gICAgICBcbiAgICAgIGlmICghcmVzcG9uc2Uuc3VjY2VzcyB8fCAhcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiByZXNwb25zZS5lcnJvciB8fCAnRmFpbGVkIHRvIGZldGNoIGNvdXJzZXMgZm9yIHN0YXRpc3RpY3MnXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNvdXJzZXMgPSByZXNwb25zZS5kYXRhO1xuICAgICAgY29uc3Qgc3RhdHMgPSB7XG4gICAgICAgIHRvdGFsQ291cnNlczogY291cnNlcy5sZW5ndGgsXG4gICAgICAgIHB1Ymxpc2hlZENvdXJzZXM6IGNvdXJzZXMuZmlsdGVyKGMgPT4gYy5zdGF0dXMgPT09ICdwdWJsaXNoZWQnKS5sZW5ndGgsXG4gICAgICAgIGRyYWZ0Q291cnNlczogY291cnNlcy5maWx0ZXIoYyA9PiBjLnN0YXR1cyA9PT0gJ2RyYWZ0JykubGVuZ3RoLFxuICAgICAgICB0b3RhbFN0dWRlbnRzOiBjb3Vyc2VzLnJlZHVjZSgoc3VtLCBjKSA9PiBzdW0gKyAoYy5lbnJvbGxlZFN0dWRlbnRzIHx8IDApLCAwKSxcbiAgICAgICAgdG90YWxSZXZlbnVlOiBjb3Vyc2VzLnJlZHVjZSgoc3VtLCBjKSA9PiBzdW0gKyAoKGMucHJpY2UgfHwgMCkgKiAoYy5lbnJvbGxlZFN0dWRlbnRzIHx8IDApKSwgMCksXG4gICAgICAgIGNhdGVnb3JpZXM6IHt9IGFzIHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0sXG4gICAgICAgIGxldmVsczoge30gYXMgeyBba2V5OiBzdHJpbmddOiBudW1iZXIgfVxuICAgICAgfTtcblxuICAgICAgLy8gQ2FsY3VsYXRlIGNhdGVnb3J5IGRpc3RyaWJ1dGlvblxuICAgICAgY291cnNlcy5mb3JFYWNoKGNvdXJzZSA9PiB7XG4gICAgICAgIGlmIChjb3Vyc2UuY2F0ZWdvcnkpIHtcbiAgICAgICAgICBzdGF0cy5jYXRlZ29yaWVzW2NvdXJzZS5jYXRlZ29yeV0gPSAoc3RhdHMuY2F0ZWdvcmllc1tjb3Vyc2UuY2F0ZWdvcnldIHx8IDApICsgMTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIENhbGN1bGF0ZSBsZXZlbCBkaXN0cmlidXRpb25cbiAgICAgIGNvdXJzZXMuZm9yRWFjaChjb3Vyc2UgPT4ge1xuICAgICAgICBpZiAoY291cnNlLmxldmVsKSB7XG4gICAgICAgICAgc3RhdHMubGV2ZWxzW2NvdXJzZS5sZXZlbF0gPSAoc3RhdHMubGV2ZWxzW2NvdXJzZS5sZXZlbF0gfHwgMCkgKyAxO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YTogc3RhdHNcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgY291cnNlIHN0YXRpc3RpY3M6JywgZXJyb3IpO1xuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gaGFuZGxlRmlyZXN0b3JlRXJyb3IoZXJyb3IpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2VcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLy8gVXBkYXRlIGNvdXJzZSBzdGF0dXMgKHB1Ymxpc2gvdW5wdWJsaXNoKVxuICBzdGF0aWMgYXN5bmMgdXBkYXRlQ291cnNlU3RhdHVzKGNvdXJzZUlkOiBzdHJpbmcsIHN0YXR1czogJ2RyYWZ0JyB8ICdwdWJsaXNoZWQnKTogUHJvbWlzZTxDb3Vyc2VSZXNwb25zZT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIWNvdXJzZUlkIHx8IGNvdXJzZUlkLnRyaW0oKSA9PT0gJycpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogJ0NvdXJzZSBJRCBpcyByZXF1aXJlZCdcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFbJ2RyYWZ0JywgJ3B1Ymxpc2hlZCddLmluY2x1ZGVzKHN0YXR1cykpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogJ1N0YXR1cyBtdXN0IGJlIGVpdGhlciBcImRyYWZ0XCIgb3IgXCJwdWJsaXNoZWRcIidcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMudXBkYXRlQ291cnNlKGNvdXJzZUlkLCB7IFxuICAgICAgICBzdGF0dXMsXG4gICAgICAgIGxhc3RVcGRhdGVkOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIGNvdXJzZSBzdGF0dXM6JywgZXJyb3IpO1xuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gaGFuZGxlRmlyZXN0b3JlRXJyb3IoZXJyb3IpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2VcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLy8gRHVwbGljYXRlIGNvdXJzZVxuICBzdGF0aWMgYXN5bmMgZHVwbGljYXRlQ291cnNlKGNvdXJzZUlkOiBzdHJpbmcsIG5ld1RpdGxlPzogc3RyaW5nKTogUHJvbWlzZTxDb3Vyc2VSZXNwb25zZT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBvcmlnaW5hbENvdXJzZSA9IGF3YWl0IHRoaXMuZ2V0Q291cnNlQnlJZChjb3Vyc2VJZCk7XG4gICAgICBcbiAgICAgIGlmICghb3JpZ2luYWxDb3Vyc2Uuc3VjY2VzcyB8fCAhb3JpZ2luYWxDb3Vyc2UuZGF0YSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiBvcmlnaW5hbENvdXJzZS5lcnJvciB8fCAnT3JpZ2luYWwgY291cnNlIG5vdCBmb3VuZCdcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgY291cnNlID0gb3JpZ2luYWxDb3Vyc2UuZGF0YTtcbiAgICAgIGNvbnN0IGR1cGxpY2F0ZWRDb3Vyc2U6IE5ld0NvdXJzZSA9IHtcbiAgICAgICAgLi4uY291cnNlLFxuICAgICAgICB0aXRsZTogbmV3VGl0bGUgfHwgYCR7Y291cnNlLnRpdGxlfSAoQ29weSlgLFxuICAgICAgICBzbHVnOiAobmV3VGl0bGUgfHwgYCR7Y291cnNlLnRpdGxlfSAoQ29weSlgKS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccysvZywgJy0nKS5yZXBsYWNlKC9bXmEtejAtOS1dL2csICcnKSxcbiAgICAgICAgc3RhdHVzOiAnZHJhZnQnLFxuICAgICAgICBlbnJvbGxlZFN0dWRlbnRzOiAwLFxuICAgICAgICByYXRpbmc6IDAsXG4gICAgICAgIHRvdGFsUmF0aW5nczogMCxcbiAgICAgICAgbGFzdFVwZGF0ZWQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfTtcblxuICAgICAgLy8gUmVtb3ZlIGZpZWxkcyB0aGF0IHNob3VsZG4ndCBiZSBkdXBsaWNhdGVkXG4gICAgICBkZWxldGUgKGR1cGxpY2F0ZWRDb3Vyc2UgYXMgYW55KS5faWQ7XG4gICAgICBkZWxldGUgKGR1cGxpY2F0ZWRDb3Vyc2UgYXMgYW55KS5jcmVhdGVkQXQ7XG4gICAgICBkZWxldGUgKGR1cGxpY2F0ZWRDb3Vyc2UgYXMgYW55KS51cGRhdGVkQXQ7XG5cbiAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUNvdXJzZShkdXBsaWNhdGVkQ291cnNlKTtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkdXBsaWNhdGluZyBjb3Vyc2U6JywgZXJyb3IpO1xuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gaGFuZGxlRmlyZXN0b3JlRXJyb3IoZXJyb3IpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2VcbiAgICAgIH07XG4gICAgfVxuICB9XG59Il0sIm5hbWVzIjpbImNvbGxlY3Rpb24iLCJhZGREb2MiLCJ1cGRhdGVEb2MiLCJkZWxldGVEb2MiLCJnZXREb2NzIiwicXVlcnkiLCJvcmRlckJ5Iiwic2VydmVyVGltZXN0YW1wIiwid2hlcmUiLCJ3cml0ZUJhdGNoIiwibGltaXQiLCJmaXJlc3RvcmVMaW1pdCIsInN0YXJ0QWZ0ZXIiLCJyZWYiLCJ1cGxvYWRCeXRlcyIsImdldERvd25sb2FkVVJMIiwiZGVsZXRlT2JqZWN0IiwiZGIiLCJzdG9yYWdlIiwiaGFuZGxlRmlyZXN0b3JlRXJyb3IiLCJ2NCIsInV1aWR2NCIsIkNPTExFQ1RJT05fTkFNRSIsImNsZWFuQ291cnNlRGF0YSIsImRhdGEiLCJjbGVhbmVkIiwia2V5IiwidmFsdWUiLCJPYmplY3QiLCJlbnRyaWVzIiwidW5kZWZpbmVkIiwiaW5jbHVkZXMiLCJBcnJheSIsImlzQXJyYXkiLCJmaWx0ZXIiLCJpdGVtIiwidHJpbSIsImNvbnN0cnVjdG9yIiwidmFsaWRhdGVDb3Vyc2VEYXRhIiwiY291cnNlRGF0YSIsImVycm9ycyIsInRpdGxlIiwibGVuZ3RoIiwicHVzaCIsInNob3J0RGVzY3JpcHRpb24iLCJjYXRlZ29yeSIsImxldmVsIiwibGFuZ3VhZ2UiLCJkdXJhdGlvbiIsImhvdXJzIiwicHJpY2UiLCJpc05hTiIsIm9yaWdpbmFsUHJpY2UiLCJpc1ZhbGlkIiwiQ291cnNlU2VydmljZSIsImNyZWF0ZUNvdXJzZSIsInZhbGlkYXRpb24iLCJzdWNjZXNzIiwiZXJyb3IiLCJqb2luIiwiY291cnNlSWQiLCJjb3Vyc2VXaXRoTWV0YWRhdGEiLCJfaWQiLCJjcmVhdGVkQXQiLCJ1cGRhdGVkQXQiLCJzdGF0dXMiLCJyYXRpbmciLCJOdW1iZXIiLCJ0b3RhbFJhdGluZ3MiLCJlbnJvbGxlZFN0dWRlbnRzIiwibGVhcm5pbmdPdXRjb21lcyIsImZlYXR1cmVzIiwic2tpbGxzIiwicmVxdWlyZW1lbnRzIiwibW9kdWxlIiwiaGlnaGxpZ2h0cyIsInByb2plY3QiLCJwcm9ncmFtRm9yIiwic2x1ZyIsInRvTG93ZXJDYXNlIiwicmVwbGFjZSIsInByb2dyYW1CeSIsImxhc3RVcGRhdGVkIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwicGF5bWVudExpbmsiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJjZXJ0aWZpY2F0ZUltYWdlIiwiZ2xvYmFsU3RhdHVzIiwic3RhcnREYXRlIiwidG9vbHNEYXRhIiwic2VjdGlvblRpdGxlIiwidG9vbHNDb3VudCIsImRpc3BsYXlJbWFnZSIsInRvb2xzIiwiY2xlYW5lZERhdGEiLCJjb25zb2xlIiwibG9nIiwiZG9jUmVmIiwiY3JlYXRlZENvdXJzZSIsImVycm9yTWVzc2FnZSIsImdldEFsbENvdXJzZXMiLCJvcHRpb25zIiwicSIsInBhZ2VTaXplIiwibGFzdERvYyIsInF1ZXJ5U25hcHNob3QiLCJjb3Vyc2VzIiwiZm9yRWFjaCIsImRvYyIsImNvdXJzZSIsInRvRGF0ZSIsInNlYXJjaFRlcm0iLCJzZWFyY2hMb3dlciIsIm1hdGNoZXNTZWFyY2giLCJwYWdpbmF0aW9uIiwidG90YWwiLCJwYWdlIiwicGFnZXMiLCJnZXRDb3Vyc2VCeUlkIiwiZW1wdHkiLCJkb2NzIiwiZ2V0Q291cnNlQnlTbHVnIiwidXBkYXRlQ291cnNlIiwidXBkYXRlRGF0YSIsImZpZWxkc1VwZGF0ZWQiLCJrZXlzIiwidXBkYXRlZENvdXJzZVJlc3BvbnNlIiwiZGVsZXRlQ291cnNlIiwiZGVsZXRlSW1hZ2UiLCJpbWFnZUVycm9yIiwid2FybiIsImRlbGV0ZUNvdXJzZXMiLCJjb3Vyc2VJZHMiLCJiYXRjaCIsImRlbGV0ZWRDb3VudCIsImRlbGV0ZSIsImNvbW1pdCIsInVwbG9hZEltYWdlIiwiZmlsZSIsInBhdGgiLCJzaXplIiwiYWxsb3dlZFR5cGVzIiwidHlwZSIsInRpbWVzdGFtcCIsIm5vdyIsInJhbmRvbVN0cmluZyIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0cmluZyIsImZpbGVFeHRlbnNpb24iLCJuYW1lIiwic3BsaXQiLCJwb3AiLCJmaWxlbmFtZSIsInN0b3JhZ2VSZWYiLCJtZXRhZGF0YSIsImNvbnRlbnRUeXBlIiwiY3VzdG9tTWV0YWRhdGEiLCJ1cGxvYWRlZEF0Iiwib3JpZ2luYWxOYW1lIiwic25hcHNob3QiLCJkb3dubG9hZFVSTCIsInVybCIsIm1lc3NhZ2UiLCJpbWFnZVVybCIsImltYWdlUmVmIiwiZ2V0Q291cnNlc0J5Q2F0ZWdvcnkiLCJnZXRQdWJsaXNoZWRDb3Vyc2VzIiwiZ2V0RHJhZnRDb3Vyc2VzIiwic2VhcmNoQ291cnNlcyIsImdldENvdXJzZVN0YXRzIiwicmVzcG9uc2UiLCJzdGF0cyIsInRvdGFsQ291cnNlcyIsInB1Ymxpc2hlZENvdXJzZXMiLCJjIiwiZHJhZnRDb3Vyc2VzIiwidG90YWxTdHVkZW50cyIsInJlZHVjZSIsInN1bSIsInRvdGFsUmV2ZW51ZSIsImNhdGVnb3JpZXMiLCJsZXZlbHMiLCJ1cGRhdGVDb3Vyc2VTdGF0dXMiLCJkdXBsaWNhdGVDb3Vyc2UiLCJuZXdUaXRsZSIsIm9yaWdpbmFsQ291cnNlIiwiZHVwbGljYXRlZENvdXJzZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/courseService.ts\n"));

/***/ })

});