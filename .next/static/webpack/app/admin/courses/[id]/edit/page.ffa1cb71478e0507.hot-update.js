"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/admin/courses/[id]/edit/page",{

/***/ "(app-pages-browser)/./src/lib/courseService.ts":
/*!**********************************!*\
  !*** ./src/lib/courseService.ts ***!
  \**********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CourseService: function() { return /* binding */ CourseService; }\n/* harmony export */ });\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/firestore */ \"(app-pages-browser)/./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var firebase_storage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! firebase/storage */ \"(app-pages-browser)/./node_modules/firebase/storage/dist/esm/index.esm.js\");\n/* harmony import */ var _firebase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./firebase */ \"(app-pages-browser)/./src/lib/firebase.ts\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! uuid */ \"(app-pages-browser)/./node_modules/uuid/dist/esm-browser/v4.js\");\n\n\n\n\nconst COLLECTION_NAME = \"courses\";\n// Helper function to clean data before sending to Firestore\nconst cleanCourseData = (data)=>{\n    const cleaned = {};\n    for (const [key, value] of Object.entries(data)){\n        // Skip undefined values and functions\n        if (value !== undefined && typeof value !== \"function\") {\n            // Handle different data types appropriately\n            if (value === null) {\n                // Convert null to appropriate default values\n                if ([\n                    \"paymentLink\",\n                    \"backgroundImage\",\n                    \"certificateImage\",\n                    \"globalStatus\",\n                    \"startDate\"\n                ].includes(key)) {\n                    cleaned[key] = \"\";\n                } else if ([\n                    \"learningOutcomes\",\n                    \"features\",\n                    \"skills\",\n                    \"requirements\",\n                    \"module\",\n                    \"highlights\",\n                    \"project\",\n                    \"programFor\"\n                ].includes(key)) {\n                    cleaned[key] = [];\n                } else if ([\n                    \"rating\",\n                    \"totalRatings\",\n                    \"enrolledStudents\",\n                    \"price\",\n                    \"originalPrice\"\n                ].includes(key)) {\n                    cleaned[key] = 0;\n                } else {\n                    cleaned[key] = \"\";\n                }\n            } else if (Array.isArray(value)) {\n                // Ensure arrays are properly formatted\n                cleaned[key] = value.filter((item)=>item !== null && item !== undefined);\n            } else if (typeof value === \"string\") {\n                // Trim strings and handle empty values\n                cleaned[key] = value.trim();\n            } else if (typeof value === \"object\" && value.constructor === Object) {\n                // Recursively clean nested objects\n                cleaned[key] = cleanCourseData(value);\n            } else {\n                cleaned[key] = value;\n            }\n        }\n    }\n    return cleaned;\n};\n// Helper function to validate course data\nconst validateCourseData = (courseData)=>{\n    const errors = [];\n    if (!courseData.title || courseData.title.trim().length === 0) {\n        errors.push(\"Title is required\");\n    }\n    if (!courseData.shortDescription || courseData.shortDescription.trim().length === 0) {\n        errors.push(\"Short description is required\");\n    }\n    if (!courseData.category || courseData.category.trim().length === 0) {\n        errors.push(\"Category is required\");\n    }\n    if (!courseData.level || ![\n        \"beginner\",\n        \"intermediate\",\n        \"advanced\"\n    ].includes(courseData.level)) {\n        errors.push(\"Valid level is required (beginner, intermediate, or advanced)\");\n    }\n    if (!courseData.language || courseData.language.trim().length === 0) {\n        errors.push(\"Language is required\");\n    }\n    if (!courseData.duration || courseData.duration.trim().length === 0) {\n        errors.push(\"Duration is required\");\n    }\n    if (!courseData.hours || courseData.hours.trim().length === 0) {\n        errors.push(\"Hours is required\");\n    }\n    if (courseData.price < 0 || isNaN(courseData.price)) {\n        errors.push(\"Price must be a valid number (0 or greater)\");\n    }\n    if (courseData.originalPrice < 0 || isNaN(courseData.originalPrice)) {\n        errors.push(\"Original price must be a valid number (0 or greater)\");\n    }\n    if (courseData.originalPrice > 0 && courseData.price > courseData.originalPrice) {\n        errors.push(\"Price cannot be greater than original price\");\n    }\n    return {\n        isValid: errors.length === 0,\n        errors\n    };\n};\nclass CourseService {\n    // Create a new course\n    static async createCourse(courseData) {\n        try {\n            var _courseData_title, _courseData_slug, _courseData_title1, _courseData_shortDescription, _courseData_category, _courseData_language, _courseData_duration, _courseData_hours, _courseData_programBy, _courseData_paymentLink, _courseData_backgroundImage, _courseData_certificateImage, _courseData_globalStatus, _courseData_startDate;\n            // Validate course data\n            const validation = validateCourseData(courseData);\n            if (!validation.isValid) {\n                return {\n                    success: false,\n                    error: \"Validation failed: \".concat(validation.errors.join(\", \"))\n                };\n            }\n            const courseId = (0,uuid__WEBPACK_IMPORTED_MODULE_3__[\"default\"])();\n            const courseWithMetadata = {\n                ...courseData,\n                _id: courseId,\n                createdAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)(),\n                updatedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)(),\n                status: courseData.status || \"draft\",\n                // Ensure these fields are numbers\n                rating: Number(courseData.rating) || 0,\n                totalRatings: Number(courseData.totalRatings) || 0,\n                enrolledStudents: Number(courseData.enrolledStudents) || 0,\n                price: Number(courseData.price) || 0,\n                originalPrice: Number(courseData.originalPrice) || 0,\n                // Ensure arrays are properly initialized\n                learningOutcomes: Array.isArray(courseData.learningOutcomes) ? courseData.learningOutcomes.filter((item)=>item && item.trim()) : [],\n                features: Array.isArray(courseData.features) ? courseData.features.filter((item)=>item && item.trim()) : [],\n                skills: Array.isArray(courseData.skills) ? courseData.skills.filter((item)=>item && item.trim()) : [],\n                requirements: Array.isArray(courseData.requirements) ? courseData.requirements.filter((item)=>item && item.trim()) : [],\n                module: Array.isArray(courseData.module) ? courseData.module : [],\n                highlights: Array.isArray(courseData.highlights) ? courseData.highlights : [],\n                project: Array.isArray(courseData.project) ? courseData.project : [],\n                programFor: Array.isArray(courseData.programFor) ? courseData.programFor : [],\n                // Ensure strings are not undefined\n                title: ((_courseData_title = courseData.title) === null || _courseData_title === void 0 ? void 0 : _courseData_title.trim()) || \"\",\n                slug: ((_courseData_slug = courseData.slug) === null || _courseData_slug === void 0 ? void 0 : _courseData_slug.trim()) || ((_courseData_title1 = courseData.title) === null || _courseData_title1 === void 0 ? void 0 : _courseData_title1.toLowerCase().replace(/\\s+/g, \"-\").replace(/[^a-z0-9-]/g, \"\")) || \"\",\n                shortDescription: ((_courseData_shortDescription = courseData.shortDescription) === null || _courseData_shortDescription === void 0 ? void 0 : _courseData_shortDescription.trim()) || \"\",\n                category: ((_courseData_category = courseData.category) === null || _courseData_category === void 0 ? void 0 : _courseData_category.trim()) || \"\",\n                level: courseData.level || \"beginner\",\n                language: ((_courseData_language = courseData.language) === null || _courseData_language === void 0 ? void 0 : _courseData_language.trim()) || \"\",\n                duration: ((_courseData_duration = courseData.duration) === null || _courseData_duration === void 0 ? void 0 : _courseData_duration.trim()) || \"\",\n                hours: ((_courseData_hours = courseData.hours) === null || _courseData_hours === void 0 ? void 0 : _courseData_hours.trim()) || \"\",\n                programBy: ((_courseData_programBy = courseData.programBy) === null || _courseData_programBy === void 0 ? void 0 : _courseData_programBy.trim()) || \"Admin\",\n                lastUpdated: courseData.lastUpdated || new Date().toISOString(),\n                paymentLink: ((_courseData_paymentLink = courseData.paymentLink) === null || _courseData_paymentLink === void 0 ? void 0 : _courseData_paymentLink.trim()) || \"\",\n                backgroundImage: ((_courseData_backgroundImage = courseData.backgroundImage) === null || _courseData_backgroundImage === void 0 ? void 0 : _courseData_backgroundImage.trim()) || \"\",\n                certificateImage: ((_courseData_certificateImage = courseData.certificateImage) === null || _courseData_certificateImage === void 0 ? void 0 : _courseData_certificateImage.trim()) || \"\",\n                globalStatus: ((_courseData_globalStatus = courseData.globalStatus) === null || _courseData_globalStatus === void 0 ? void 0 : _courseData_globalStatus.trim()) || \"\",\n                startDate: ((_courseData_startDate = courseData.startDate) === null || _courseData_startDate === void 0 ? void 0 : _courseData_startDate.trim()) || \"\",\n                // Ensure toolsData has proper structure\n                toolsData: courseData.toolsData || {\n                    sectionTitle: \"\",\n                    category: \"\",\n                    toolsCount: \"0\",\n                    displayImage: \"\",\n                    tools: []\n                }\n            };\n            // Clean the data before sending\n            const cleanedData = cleanCourseData(courseWithMetadata);\n            console.log(\"Creating course with cleaned data:\", {\n                title: cleanedData.title,\n                status: cleanedData.status,\n                price: cleanedData.price\n            });\n            const docRef = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.addDoc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_2__.db, COLLECTION_NAME), cleanedData);\n            const createdCourse = {\n                ...cleanedData,\n                createdAt: new Date(),\n                updatedAt: new Date()\n            };\n            return {\n                success: true,\n                data: createdCourse\n            };\n        } catch (error) {\n            console.error(\"Error creating course:\", error);\n            const errorMessage = (0,_firebase__WEBPACK_IMPORTED_MODULE_2__.handleFirestoreError)(error);\n            return {\n                success: false,\n                error: errorMessage\n            };\n        }\n    }\n    // Get all courses with optional pagination and filtering\n    static async getAllCourses(options) {\n        try {\n            let q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_2__.db, COLLECTION_NAME));\n            // Add filters\n            if (options === null || options === void 0 ? void 0 : options.status) {\n                q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(q, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"status\", \"==\", options.status));\n            }\n            if (options === null || options === void 0 ? void 0 : options.category) {\n                q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(q, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"category\", \"==\", options.category));\n            }\n            // Add ordering\n            q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(q, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"createdAt\", \"desc\"));\n            // Add pagination\n            if (options === null || options === void 0 ? void 0 : options.pageSize) {\n                q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(q, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.limit)(options.pageSize));\n            }\n            if (options === null || options === void 0 ? void 0 : options.lastDoc) {\n                q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(q, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.startAfter)(options.lastDoc));\n            }\n            const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n            const courses = [];\n            querySnapshot.forEach((doc)=>{\n                var _data_createdAt, _data_updatedAt;\n                const data = doc.data();\n                const course = {\n                    ...data,\n                    createdAt: ((_data_createdAt = data.createdAt) === null || _data_createdAt === void 0 ? void 0 : _data_createdAt.toDate()) || new Date(),\n                    updatedAt: ((_data_updatedAt = data.updatedAt) === null || _data_updatedAt === void 0 ? void 0 : _data_updatedAt.toDate()) || new Date(),\n                    // Ensure required fields have default values\n                    rating: Number(data.rating) || 0,\n                    totalRatings: Number(data.totalRatings) || 0,\n                    enrolledStudents: Number(data.enrolledStudents) || 0,\n                    price: Number(data.price) || 0,\n                    originalPrice: Number(data.originalPrice) || 0,\n                    learningOutcomes: Array.isArray(data.learningOutcomes) ? data.learningOutcomes : [],\n                    features: Array.isArray(data.features) ? data.features : [],\n                    skills: Array.isArray(data.skills) ? data.skills : [],\n                    requirements: Array.isArray(data.requirements) ? data.requirements : [],\n                    module: Array.isArray(data.module) ? data.module : [],\n                    highlights: Array.isArray(data.highlights) ? data.highlights : [],\n                    project: Array.isArray(data.project) ? data.project : [],\n                    programFor: Array.isArray(data.programFor) ? data.programFor : [],\n                    toolsData: data.toolsData || {\n                        sectionTitle: \"\",\n                        category: \"\",\n                        toolsCount: \"0\",\n                        displayImage: \"\",\n                        tools: []\n                    }\n                };\n                // Apply search filter on client side (for simplicity)\n                if (options === null || options === void 0 ? void 0 : options.searchTerm) {\n                    const searchLower = options.searchTerm.toLowerCase();\n                    const matchesSearch = course.title.toLowerCase().includes(searchLower) || course.category.toLowerCase().includes(searchLower) || course.shortDescription.toLowerCase().includes(searchLower) || course.programBy.toLowerCase().includes(searchLower);\n                    if (matchesSearch) {\n                        courses.push(course);\n                    }\n                } else {\n                    courses.push(course);\n                }\n            });\n            return {\n                success: true,\n                data: courses,\n                pagination: {\n                    total: courses.length,\n                    page: 1,\n                    pages: 1\n                }\n            };\n        } catch (error) {\n            console.error(\"Error fetching courses:\", error);\n            const errorMessage = (0,_firebase__WEBPACK_IMPORTED_MODULE_2__.handleFirestoreError)(error);\n            return {\n                success: false,\n                error: errorMessage\n            };\n        }\n    }\n    // Get course by ID\n    static async getCourseById(courseId) {\n        try {\n            var _data_createdAt, _data_updatedAt;\n            if (!courseId || courseId.trim() === \"\") {\n                return {\n                    success: false,\n                    error: \"Course ID is required\"\n                };\n            }\n            const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_2__.db, COLLECTION_NAME), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"_id\", \"==\", courseId));\n            const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n            if (querySnapshot.empty) {\n                return {\n                    success: false,\n                    error: \"Course not found\"\n                };\n            }\n            const doc = querySnapshot.docs[0];\n            const data = doc.data();\n            const course = {\n                ...data,\n                createdAt: ((_data_createdAt = data.createdAt) === null || _data_createdAt === void 0 ? void 0 : _data_createdAt.toDate()) || new Date(),\n                updatedAt: ((_data_updatedAt = data.updatedAt) === null || _data_updatedAt === void 0 ? void 0 : _data_updatedAt.toDate()) || new Date(),\n                // Ensure required fields have default values\n                rating: Number(data.rating) || 0,\n                totalRatings: Number(data.totalRatings) || 0,\n                enrolledStudents: Number(data.enrolledStudents) || 0,\n                price: Number(data.price) || 0,\n                originalPrice: Number(data.originalPrice) || 0,\n                learningOutcomes: Array.isArray(data.learningOutcomes) ? data.learningOutcomes : [],\n                features: Array.isArray(data.features) ? data.features : [],\n                skills: Array.isArray(data.skills) ? data.skills : [],\n                requirements: Array.isArray(data.requirements) ? data.requirements : [],\n                module: Array.isArray(data.module) ? data.module : [],\n                highlights: Array.isArray(data.highlights) ? data.highlights : [],\n                project: Array.isArray(data.project) ? data.project : [],\n                programFor: Array.isArray(data.programFor) ? data.programFor : [],\n                toolsData: data.toolsData || {\n                    sectionTitle: \"\",\n                    category: \"\",\n                    toolsCount: \"0\",\n                    displayImage: \"\",\n                    tools: []\n                }\n            };\n            return {\n                success: true,\n                data: course\n            };\n        } catch (error) {\n            console.error(\"Error fetching course:\", error);\n            const errorMessage = (0,_firebase__WEBPACK_IMPORTED_MODULE_2__.handleFirestoreError)(error);\n            return {\n                success: false,\n                error: errorMessage\n            };\n        }\n    }\n    // Get course by slug\n    static async getCourseBySlug(slug) {\n        try {\n            var _data_createdAt, _data_updatedAt;\n            if (!slug || slug.trim() === \"\") {\n                return {\n                    success: false,\n                    error: \"Course slug is required\"\n                };\n            }\n            const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_2__.db, COLLECTION_NAME), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"slug\", \"==\", slug));\n            const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n            if (querySnapshot.empty) {\n                return {\n                    success: false,\n                    error: \"Course not found\"\n                };\n            }\n            const doc = querySnapshot.docs[0];\n            const data = doc.data();\n            const course = {\n                ...data,\n                createdAt: ((_data_createdAt = data.createdAt) === null || _data_createdAt === void 0 ? void 0 : _data_createdAt.toDate()) || new Date(),\n                updatedAt: ((_data_updatedAt = data.updatedAt) === null || _data_updatedAt === void 0 ? void 0 : _data_updatedAt.toDate()) || new Date()\n            };\n            return {\n                success: true,\n                data: course\n            };\n        } catch (error) {\n            console.error(\"Error fetching course by slug:\", error);\n            const errorMessage = (0,_firebase__WEBPACK_IMPORTED_MODULE_2__.handleFirestoreError)(error);\n            return {\n                success: false,\n                error: errorMessage\n            };\n        }\n    }\n    // Update course\n    static async updateCourse(courseId, courseData) {\n        try {\n            if (!courseId || courseId.trim() === \"\") {\n                return {\n                    success: false,\n                    error: \"Course ID is required\"\n                };\n            }\n            // Validate updated data if it contains required fields\n            if (courseData.title || courseData.shortDescription || courseData.category) {\n                const validation = validateCourseData({\n                    title: courseData.title || \"temp\",\n                    shortDescription: courseData.shortDescription || \"temp\",\n                    category: courseData.category || \"temp\",\n                    level: courseData.level || \"beginner\",\n                    language: courseData.language || \"temp\",\n                    duration: courseData.duration || \"temp\",\n                    hours: courseData.hours || \"temp\",\n                    price: courseData.price || 0,\n                    originalPrice: courseData.originalPrice || 0\n                });\n                if (!validation.isValid) {\n                    return {\n                        success: false,\n                        error: \"Validation failed: \".concat(validation.errors.join(\", \"))\n                    };\n                }\n            }\n            const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_2__.db, COLLECTION_NAME), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"_id\", \"==\", courseId));\n            const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n            if (querySnapshot.empty) {\n                return {\n                    success: false,\n                    error: \"Course not found\"\n                };\n            }\n            const docRef = querySnapshot.docs[0].ref;\n            const updateData = {\n                ...courseData,\n                updatedAt: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.serverTimestamp)(),\n                lastUpdated: new Date().toISOString(),\n                // Ensure numeric fields are properly typed\n                ...courseData.rating !== undefined && {\n                    rating: Number(courseData.rating)\n                },\n                ...courseData.totalRatings !== undefined && {\n                    totalRatings: Number(courseData.totalRatings)\n                },\n                ...courseData.enrolledStudents !== undefined && {\n                    enrolledStudents: Number(courseData.enrolledStudents)\n                },\n                ...courseData.price !== undefined && {\n                    price: Number(courseData.price)\n                },\n                ...courseData.originalPrice !== undefined && {\n                    originalPrice: Number(courseData.originalPrice)\n                },\n                // Ensure arrays are properly filtered\n                ...courseData.learningOutcomes && {\n                    learningOutcomes: Array.isArray(courseData.learningOutcomes) ? courseData.learningOutcomes.filter((item)=>item && item.trim()) : []\n                },\n                ...courseData.features && {\n                    features: Array.isArray(courseData.features) ? courseData.features.filter((item)=>item && item.trim()) : []\n                },\n                ...courseData.skills && {\n                    skills: Array.isArray(courseData.skills) ? courseData.skills.filter((item)=>item && item.trim()) : []\n                },\n                ...courseData.requirements && {\n                    requirements: Array.isArray(courseData.requirements) ? courseData.requirements.filter((item)=>item && item.trim()) : []\n                },\n                // Update slug if title changed\n                ...courseData.title && {\n                    slug: courseData.title.toLowerCase().replace(/\\s+/g, \"-\").replace(/[^a-z0-9-]/g, \"\")\n                }\n            };\n            // Clean the data before sending\n            const cleanedData = cleanCourseData(updateData);\n            console.log(\"Updating course with cleaned data:\", {\n                courseId,\n                fieldsUpdated: Object.keys(cleanedData)\n            });\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(docRef, cleanedData);\n            // Fetch the updated course\n            const updatedCourseResponse = await this.getCourseById(courseId);\n            if (updatedCourseResponse.success) {\n                return updatedCourseResponse;\n            } else {\n                return {\n                    success: true,\n                    data: {\n                        ...courseData,\n                        _id: courseId,\n                        updatedAt: new Date()\n                    }\n                };\n            }\n        } catch (error) {\n            console.error(\"Error updating course:\", error);\n            const errorMessage = (0,_firebase__WEBPACK_IMPORTED_MODULE_2__.handleFirestoreError)(error);\n            return {\n                success: false,\n                error: errorMessage\n            };\n        }\n    }\n    // Delete course\n    static async deleteCourse(courseId) {\n        try {\n            if (!courseId || courseId.trim() === \"\") {\n                return {\n                    success: false,\n                    error: \"Course ID is required\"\n                };\n            }\n            const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_2__.db, COLLECTION_NAME), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"_id\", \"==\", courseId));\n            const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n            if (querySnapshot.empty) {\n                return {\n                    success: false,\n                    error: \"Course not found\"\n                };\n            }\n            const docRef = querySnapshot.docs[0].ref;\n            const courseData = querySnapshot.docs[0].data();\n            // Delete associated images from storage\n            if (courseData.backgroundImage) {\n                try {\n                    await this.deleteImage(courseData.backgroundImage);\n                } catch (imageError) {\n                    console.warn(\"Failed to delete background image:\", imageError);\n                }\n            }\n            if (courseData.certificateImage) {\n                try {\n                    await this.deleteImage(courseData.certificateImage);\n                } catch (imageError) {\n                    console.warn(\"Failed to delete certificate image:\", imageError);\n                }\n            }\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.deleteDoc)(docRef);\n            console.log(\"Course deleted successfully:\", courseId);\n            return {\n                success: true\n            };\n        } catch (error) {\n            console.error(\"Error deleting course:\", error);\n            const errorMessage = (0,_firebase__WEBPACK_IMPORTED_MODULE_2__.handleFirestoreError)(error);\n            return {\n                success: false,\n                error: errorMessage\n            };\n        }\n    }\n    // Bulk delete courses\n    static async deleteCourses(courseIds) {\n        try {\n            if (!courseIds || courseIds.length === 0) {\n                return {\n                    success: false,\n                    error: \"Course IDs are required\"\n                };\n            }\n            const batch = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.writeBatch)(_firebase__WEBPACK_IMPORTED_MODULE_2__.db);\n            let deletedCount = 0;\n            for (const courseId of courseIds){\n                const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_2__.db, COLLECTION_NAME), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"_id\", \"==\", courseId));\n                const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n                if (!querySnapshot.empty) {\n                    const docRef = querySnapshot.docs[0].ref;\n                    batch.delete(docRef);\n                    deletedCount++;\n                }\n            }\n            if (deletedCount === 0) {\n                return {\n                    success: false,\n                    error: \"No courses found to delete\"\n                };\n            }\n            await batch.commit();\n            return {\n                success: true,\n                deletedCount\n            };\n        } catch (error) {\n            console.error(\"Error bulk deleting courses:\", error);\n            const errorMessage = (0,_firebase__WEBPACK_IMPORTED_MODULE_2__.handleFirestoreError)(error);\n            return {\n                success: false,\n                error: errorMessage\n            };\n        }\n    }\n    // Upload image with better error handling and optimization\n    // Upload image with better error handling and optimization\n    static async uploadImage(file, path) {\n        try {\n            var _file_name_split_pop;\n            console.log(\"Starting image upload process...\");\n            console.log(\"File details:\", {\n                name: file.name,\n                size: file.size,\n                type: file.type\n            });\n            // Validate file\n            if (!file) {\n                return {\n                    success: false,\n                    error: \"No file provided\"\n                };\n            }\n            if (file.size > 10 * 1024 * 1024) {\n                return {\n                    success: false,\n                    error: \"File size must be less than 10MB\"\n                };\n            }\n            const allowedTypes = [\n                \"image/jpeg\",\n                \"image/jpg\",\n                \"image/png\",\n                \"image/webp\",\n                \"image/gif\"\n            ];\n            if (!allowedTypes.includes(file.type)) {\n                return {\n                    success: false,\n                    error: \"File type \".concat(file.type, \" not allowed. Only JPEG, PNG, WebP, and GIF images are allowed\")\n                };\n            }\n            // Generate unique filename\n            const timestamp = Date.now();\n            const randomString = Math.random().toString(36).substring(2, 15);\n            const fileExtension = ((_file_name_split_pop = file.name.split(\".\").pop()) === null || _file_name_split_pop === void 0 ? void 0 : _file_name_split_pop.toLowerCase()) || \"jpg\";\n            const sanitizedFileName = file.name.replace(/[^a-zA-Z0-9.-]/g, \"_\");\n            const filename = \"\".concat(timestamp, \"_\").concat(randomString, \"_\").concat(sanitizedFileName);\n            console.log(\"Generated filename:\", filename);\n            // Create storage reference\n            const storageRef = (0,firebase_storage__WEBPACK_IMPORTED_MODULE_1__.ref)(_firebase__WEBPACK_IMPORTED_MODULE_2__.storage, \"\".concat(path, \"/\").concat(filename));\n            console.log(\"Storage reference created:\", storageRef.fullPath);\n            // Upload with metadata\n            const metadata = {\n                contentType: file.type,\n                customMetadata: {\n                    uploadedAt: new Date().toISOString(),\n                    originalName: file.name,\n                    uploadedBy: \"admin\"\n                }\n            };\n            console.log(\"Starting upload with metadata:\", metadata);\n            // Perform the upload\n            const snapshot = await (0,firebase_storage__WEBPACK_IMPORTED_MODULE_1__.uploadBytes)(storageRef, file, metadata);\n            console.log(\"Upload completed. Getting download URL...\");\n            // Get download URL\n            const downloadURL = await (0,firebase_storage__WEBPACK_IMPORTED_MODULE_1__.getDownloadURL)(snapshot.ref);\n            console.log(\"Download URL obtained:\", downloadURL);\n            return {\n                success: true,\n                url: downloadURL\n            };\n        } catch (error) {\n            console.error(\"Detailed upload error:\", {\n                message: error.message,\n                code: error.code,\n                stack: error.stack,\n                error: error\n            });\n            // Handle specific Firebase errors\n            let errorMessage = \"Failed to upload image\";\n            if (error.code === \"storage/unauthorized\") {\n                errorMessage = \"Permission denied. Please check Firebase Storage rules.\";\n            } else if (error.code === \"storage/canceled\") {\n                errorMessage = \"Upload was canceled.\";\n            } else if (error.code === \"storage/unknown\") {\n                errorMessage = \"Unknown error occurred during upload.\";\n            } else if (error.code === \"storage/invalid-format\") {\n                errorMessage = \"Invalid file format.\";\n            } else if (error.code === \"storage/invalid-argument\") {\n                errorMessage = \"Invalid upload argument.\";\n            } else if (error.message) {\n                errorMessage = error.message;\n            }\n            return {\n                success: false,\n                error: errorMessage\n            };\n        }\n    }\n    // Delete image from storage\n    static async deleteImage(imageUrl) {\n        try {\n            if (!imageUrl || !imageUrl.includes(\"firebase\")) {\n                return {\n                    success: false,\n                    error: \"Invalid image URL\"\n                };\n            }\n            const imageRef = (0,firebase_storage__WEBPACK_IMPORTED_MODULE_1__.ref)(_firebase__WEBPACK_IMPORTED_MODULE_2__.storage, imageUrl);\n            await (0,firebase_storage__WEBPACK_IMPORTED_MODULE_1__.deleteObject)(imageRef);\n            console.log(\"Image deleted successfully:\", imageUrl);\n            return {\n                success: true\n            };\n        } catch (error) {\n            console.error(\"Error deleting image:\", error);\n            return {\n                success: false,\n                error: error.message || \"Failed to delete image\"\n            };\n        }\n    }\n    // Get courses by category\n    static async getCoursesByCategory(category, pageSize) {\n        try {\n            if (!category || category.trim() === \"\") {\n                return {\n                    success: false,\n                    error: \"Category is required\"\n                };\n            }\n            let q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_2__.db, COLLECTION_NAME), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"category\", \"==\", category), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"status\", \"==\", \"published\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"createdAt\", \"desc\"));\n            if (pageSize) {\n                q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)(q, (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.limit)(pageSize));\n            }\n            const querySnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n            const courses = [];\n            querySnapshot.forEach((doc)=>{\n                var _data_createdAt, _data_updatedAt;\n                const data = doc.data();\n                courses.push({\n                    ...data,\n                    createdAt: ((_data_createdAt = data.createdAt) === null || _data_createdAt === void 0 ? void 0 : _data_createdAt.toDate()) || new Date(),\n                    updatedAt: ((_data_updatedAt = data.updatedAt) === null || _data_updatedAt === void 0 ? void 0 : _data_updatedAt.toDate()) || new Date()\n                });\n            });\n            return {\n                success: true,\n                data: courses\n            };\n        } catch (error) {\n            console.error(\"Error fetching courses by category:\", error);\n            const errorMessage = (0,_firebase__WEBPACK_IMPORTED_MODULE_2__.handleFirestoreError)(error);\n            return {\n                success: false,\n                error: errorMessage\n            };\n        }\n    }\n    // Get published courses only\n    static async getPublishedCourses(pageSize) {\n        return this.getAllCourses({\n            status: \"published\",\n            pageSize: pageSize || 50\n        });\n    }\n    // Get draft courses only\n    static async getDraftCourses(pageSize) {\n        return this.getAllCourses({\n            status: \"draft\",\n            pageSize: pageSize || 50\n        });\n    }\n    // Search courses\n    static async searchCourses(searchTerm, options) {\n        try {\n            if (!searchTerm || searchTerm.trim() === \"\") {\n                return this.getAllCourses(options);\n            }\n            return this.getAllCourses({\n                ...options,\n                searchTerm: searchTerm.trim()\n            });\n        } catch (error) {\n            console.error(\"Error searching courses:\", error);\n            const errorMessage = (0,_firebase__WEBPACK_IMPORTED_MODULE_2__.handleFirestoreError)(error);\n            return {\n                success: false,\n                error: errorMessage\n            };\n        }\n    }\n    // Get course statistics\n    static async getCourseStats() {\n        try {\n            const response = await this.getAllCourses();\n            if (!response.success || !response.data) {\n                return {\n                    success: false,\n                    error: response.error || \"Failed to fetch courses for statistics\"\n                };\n            }\n            const courses = response.data;\n            const stats = {\n                totalCourses: courses.length,\n                publishedCourses: courses.filter((c)=>c.status === \"published\").length,\n                draftCourses: courses.filter((c)=>c.status === \"draft\").length,\n                totalStudents: courses.reduce((sum, c)=>sum + (c.enrolledStudents || 0), 0),\n                totalRevenue: courses.reduce((sum, c)=>sum + (c.price || 0) * (c.enrolledStudents || 0), 0),\n                categories: {},\n                levels: {}\n            };\n            // Calculate category distribution\n            courses.forEach((course)=>{\n                if (course.category) {\n                    stats.categories[course.category] = (stats.categories[course.category] || 0) + 1;\n                }\n            });\n            // Calculate level distribution\n            courses.forEach((course)=>{\n                if (course.level) {\n                    stats.levels[course.level] = (stats.levels[course.level] || 0) + 1;\n                }\n            });\n            return {\n                success: true,\n                data: stats\n            };\n        } catch (error) {\n            console.error(\"Error fetching course statistics:\", error);\n            const errorMessage = (0,_firebase__WEBPACK_IMPORTED_MODULE_2__.handleFirestoreError)(error);\n            return {\n                success: false,\n                error: errorMessage\n            };\n        }\n    }\n    // Update course status (publish/unpublish)\n    static async updateCourseStatus(courseId, status) {\n        try {\n            if (!courseId || courseId.trim() === \"\") {\n                return {\n                    success: false,\n                    error: \"Course ID is required\"\n                };\n            }\n            if (![\n                \"draft\",\n                \"published\"\n            ].includes(status)) {\n                return {\n                    success: false,\n                    error: 'Status must be either \"draft\" or \"published\"'\n                };\n            }\n            return this.updateCourse(courseId, {\n                status,\n                lastUpdated: new Date().toISOString()\n            });\n        } catch (error) {\n            console.error(\"Error updating course status:\", error);\n            const errorMessage = (0,_firebase__WEBPACK_IMPORTED_MODULE_2__.handleFirestoreError)(error);\n            return {\n                success: false,\n                error: errorMessage\n            };\n        }\n    }\n    // Duplicate course\n    static async duplicateCourse(courseId, newTitle) {\n        try {\n            const originalCourse = await this.getCourseById(courseId);\n            if (!originalCourse.success || !originalCourse.data) {\n                return {\n                    success: false,\n                    error: originalCourse.error || \"Original course not found\"\n                };\n            }\n            const course = originalCourse.data;\n            const duplicatedCourse = {\n                ...course,\n                title: newTitle || \"\".concat(course.title, \" (Copy)\"),\n                slug: (newTitle || \"\".concat(course.title, \" (Copy)\")).toLowerCase().replace(/\\s+/g, \"-\").replace(/[^a-z0-9-]/g, \"\"),\n                status: \"draft\",\n                enrolledStudents: 0,\n                rating: 0,\n                totalRatings: 0,\n                lastUpdated: new Date().toISOString()\n            };\n            // Remove fields that shouldn't be duplicated\n            delete duplicatedCourse._id;\n            delete duplicatedCourse.createdAt;\n            delete duplicatedCourse.updatedAt;\n            return this.createCourse(duplicatedCourse);\n        } catch (error) {\n            console.error(\"Error duplicating course:\", error);\n            const errorMessage = (0,_firebase__WEBPACK_IMPORTED_MODULE_2__.handleFirestoreError)(error);\n            return {\n                success: false,\n                error: errorMessage\n            };\n        }\n    }\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvY291cnNlU2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQWdCNEI7QUFDc0Q7QUFDbkI7QUFFM0I7QUFFcEMsTUFBTXNCLGtCQUFrQjtBQUV4Qiw0REFBNEQ7QUFDNUQsTUFBTUMsa0JBQWtCLENBQUNDO0lBQ3ZCLE1BQU1DLFVBQWUsQ0FBQztJQUV0QixLQUFLLE1BQU0sQ0FBQ0MsS0FBS0MsTUFBTSxJQUFJQyxPQUFPQyxPQUFPLENBQUNMLE1BQU87UUFDL0Msc0NBQXNDO1FBQ3RDLElBQUlHLFVBQVVHLGFBQWEsT0FBT0gsVUFBVSxZQUFZO1lBQ3RELDRDQUE0QztZQUM1QyxJQUFJQSxVQUFVLE1BQU07Z0JBQ2xCLDZDQUE2QztnQkFDN0MsSUFBSTtvQkFBQztvQkFBZTtvQkFBbUI7b0JBQW9CO29CQUFnQjtpQkFBWSxDQUFDSSxRQUFRLENBQUNMLE1BQU07b0JBQ3JHRCxPQUFPLENBQUNDLElBQUksR0FBRztnQkFDakIsT0FBTyxJQUFJO29CQUFDO29CQUFvQjtvQkFBWTtvQkFBVTtvQkFBZ0I7b0JBQVU7b0JBQWM7b0JBQVc7aUJBQWEsQ0FBQ0ssUUFBUSxDQUFDTCxNQUFNO29CQUNwSUQsT0FBTyxDQUFDQyxJQUFJLEdBQUcsRUFBRTtnQkFDbkIsT0FBTyxJQUFJO29CQUFDO29CQUFVO29CQUFnQjtvQkFBb0I7b0JBQVM7aUJBQWdCLENBQUNLLFFBQVEsQ0FBQ0wsTUFBTTtvQkFDakdELE9BQU8sQ0FBQ0MsSUFBSSxHQUFHO2dCQUNqQixPQUFPO29CQUNMRCxPQUFPLENBQUNDLElBQUksR0FBRztnQkFDakI7WUFDRixPQUFPLElBQUlNLE1BQU1DLE9BQU8sQ0FBQ04sUUFBUTtnQkFDL0IsdUNBQXVDO2dCQUN2Q0YsT0FBTyxDQUFDQyxJQUFJLEdBQUdDLE1BQU1PLE1BQU0sQ0FBQ0MsQ0FBQUEsT0FBUUEsU0FBUyxRQUFRQSxTQUFTTDtZQUNoRSxPQUFPLElBQUksT0FBT0gsVUFBVSxVQUFV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QUFTO1lBQzFDLE9BQU8saUJBQTBCQyxTQUFTO1lBRTFDLE9BQU8sSUFBSSxDQUFDVCxZQUFZLENBQUMySTtRQUMzQixFQUFFLE9BQU94SSxPQUFZO1lBQ25Cc0MsUUFBUXRDLEtBQUssQ0FBQyw2QkFBNkJBO1lBQzNDLE1BQU0wQyxlQUFlakYsK0RBQW9CQSxDQUFDdUM7WUFDMUMsT0FBTztnQkFDTEQsU0FBUztnQkFDVEMsT0FBTzBDO1lBQ1Q7UUFDRjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL2xpYi9jb3Vyc2VTZXJ2aWNlLnRzPzM3NDUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgXG4gIGNvbGxlY3Rpb24sIFxuICBhZGREb2MsIFxuICB1cGRhdGVEb2MsIFxuICBkZWxldGVEb2MsIFxuICBnZXREb2NzLCBcbiAgZG9jLCBcbiAgZ2V0RG9jLFxuICBxdWVyeSxcbiAgb3JkZXJCeSxcbiAgc2VydmVyVGltZXN0YW1wLFxuICB3aGVyZSxcbiAgd3JpdGVCYXRjaCxcbiAgbGltaXQgYXMgZmlyZXN0b3JlTGltaXQsXG4gIHN0YXJ0QWZ0ZXIsXG4gIERvY3VtZW50U25hcHNob3Rcbn0gZnJvbSAnZmlyZWJhc2UvZmlyZXN0b3JlJztcbmltcG9ydCB7IHJlZiwgdXBsb2FkQnl0ZXMsIGdldERvd25sb2FkVVJMLCBkZWxldGVPYmplY3QgfSBmcm9tICdmaXJlYmFzZS9zdG9yYWdlJztcbmltcG9ydCB7IGRiLCBzdG9yYWdlLCBoYW5kbGVGaXJlc3RvcmVFcnJvciB9IGZyb20gJy4vZmlyZWJhc2UnO1xuaW1wb3J0IHsgQ291cnNlLCBOZXdDb3Vyc2UsIENvdXJzZXNSZXNwb25zZSwgQ291cnNlUmVzcG9uc2UgfSBmcm9tICdAL3R5cGVzL2NvdXJzZXMnO1xuaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAndXVpZCc7XG5cbmNvbnN0IENPTExFQ1RJT05fTkFNRSA9ICdjb3Vyc2VzJztcblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGNsZWFuIGRhdGEgYmVmb3JlIHNlbmRpbmcgdG8gRmlyZXN0b3JlXG5jb25zdCBjbGVhbkNvdXJzZURhdGEgPSAoZGF0YTogYW55KSA9PiB7XG4gIGNvbnN0IGNsZWFuZWQ6IGFueSA9IHt9O1xuICBcbiAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YSkpIHtcbiAgICAvLyBTa2lwIHVuZGVmaW5lZCB2YWx1ZXMgYW5kIGZ1bmN0aW9uc1xuICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiB2YWx1ZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgLy8gSGFuZGxlIGRpZmZlcmVudCBkYXRhIHR5cGVzIGFwcHJvcHJpYXRlbHlcbiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICAvLyBDb252ZXJ0IG51bGwgdG8gYXBwcm9wcmlhdGUgZGVmYXVsdCB2YWx1ZXNcbiAgICAgICAgaWYgKFsncGF5bWVudExpbmsnLCAnYmFja2dyb3VuZEltYWdlJywgJ2NlcnRpZmljYXRlSW1hZ2UnLCAnZ2xvYmFsU3RhdHVzJywgJ3N0YXJ0RGF0ZSddLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgICBjbGVhbmVkW2tleV0gPSAnJztcbiAgICAgICAgfSBlbHNlIGlmIChbJ2xlYXJuaW5nT3V0Y29tZXMnLCAnZmVhdHVyZXMnLCAnc2tpbGxzJywgJ3JlcXVpcmVtZW50cycsICdtb2R1bGUnLCAnaGlnaGxpZ2h0cycsICdwcm9qZWN0JywgJ3Byb2dyYW1Gb3InXS5pbmNsdWRlcyhrZXkpKSB7XG4gICAgICAgICAgY2xlYW5lZFtrZXldID0gW107XG4gICAgICAgIH0gZWxzZSBpZiAoWydyYXRpbmcnLCAndG90YWxSYXRpbmdzJywgJ2Vucm9sbGVkU3R1ZGVudHMnLCAncHJpY2UnLCAnb3JpZ2luYWxQcmljZSddLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgICBjbGVhbmVkW2tleV0gPSAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNsZWFuZWRba2V5XSA9ICcnO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIC8vIEVuc3VyZSBhcnJheXMgYXJlIHByb3Blcmx5IGZvcm1hdHRlZFxuICAgICAgICBjbGVhbmVkW2tleV0gPSB2YWx1ZS5maWx0ZXIoaXRlbSA9PiBpdGVtICE9PSBudWxsICYmIGl0ZW0gIT09IHVuZGVmaW5lZCk7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgLy8gVHJpbSBzdHJpbmdzIGFuZCBoYW5kbGUgZW1wdHkgdmFsdWVzXG4gICAgICAgIGNsZWFuZWRba2V5XSA9IHZhbHVlLnRyaW0oKTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZS5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0KSB7XG4gICAgICAgIC8vIFJlY3Vyc2l2ZWx5IGNsZWFuIG5lc3RlZCBvYmplY3RzXG4gICAgICAgIGNsZWFuZWRba2V5XSA9IGNsZWFuQ291cnNlRGF0YSh2YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjbGVhbmVkW2tleV0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgXG4gIHJldHVybiBjbGVhbmVkO1xufTtcblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIHZhbGlkYXRlIGNvdXJzZSBkYXRhXG5jb25zdCB2YWxpZGF0ZUNvdXJzZURhdGEgPSAoY291cnNlRGF0YTogYW55KTogeyBpc1ZhbGlkOiBib29sZWFuOyBlcnJvcnM6IHN0cmluZ1tdIH0gPT4ge1xuICBjb25zdCBlcnJvcnM6IHN0cmluZ1tdID0gW107XG4gIFxuICBpZiAoIWNvdXJzZURhdGEudGl0bGUgfHwgY291cnNlRGF0YS50aXRsZS50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgZXJyb3JzLnB1c2goJ1RpdGxlIGlzIHJlcXVpcmVkJyk7XG4gIH1cbiAgXG4gIGlmICghY291cnNlRGF0YS5zaG9ydERlc2NyaXB0aW9uIHx8IGNvdXJzZURhdGEuc2hvcnREZXNjcmlwdGlvbi50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgZXJyb3JzLnB1c2goJ1Nob3J0IGRlc2NyaXB0aW9uIGlzIHJlcXVpcmVkJyk7XG4gIH1cbiAgXG4gIGlmICghY291cnNlRGF0YS5jYXRlZ29yeSB8fCBjb3Vyc2VEYXRhLmNhdGVnb3J5LnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICBlcnJvcnMucHVzaCgnQ2F0ZWdvcnkgaXMgcmVxdWlyZWQnKTtcbiAgfVxuICBcbiAgaWYgKCFjb3Vyc2VEYXRhLmxldmVsIHx8ICFbJ2JlZ2lubmVyJywgJ2ludGVybWVkaWF0ZScsICdhZHZhbmNlZCddLmluY2x1ZGVzKGNvdXJzZURhdGEubGV2ZWwpKSB7XG4gICAgZXJyb3JzLnB1c2goJ1ZhbGlkIGxldmVsIGlzIHJlcXVpcmVkIChiZWdpbm5lciwgaW50ZXJtZWRpYXRlLCBvciBhZHZhbmNlZCknKTtcbiAgfVxuICBcbiAgaWYgKCFjb3Vyc2VEYXRhLmxhbmd1YWdlIHx8IGNvdXJzZURhdGEubGFuZ3VhZ2UudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgIGVycm9ycy5wdXNoKCdMYW5ndWFnZSBpcyByZXF1aXJlZCcpO1xuICB9XG4gIFxuICBpZiAoIWNvdXJzZURhdGEuZHVyYXRpb24gfHwgY291cnNlRGF0YS5kdXJhdGlvbi50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgZXJyb3JzLnB1c2goJ0R1cmF0aW9uIGlzIHJlcXVpcmVkJyk7XG4gIH1cbiAgXG4gIGlmICghY291cnNlRGF0YS5ob3VycyB8fCBjb3Vyc2VEYXRhLmhvdXJzLnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICBlcnJvcnMucHVzaCgnSG91cnMgaXMgcmVxdWlyZWQnKTtcbiAgfVxuICBcbiAgaWYgKGNvdXJzZURhdGEucHJpY2UgPCAwIHx8IGlzTmFOKGNvdXJzZURhdGEucHJpY2UpKSB7XG4gICAgZXJyb3JzLnB1c2goJ1ByaWNlIG11c3QgYmUgYSB2YWxpZCBudW1iZXIgKDAgb3IgZ3JlYXRlciknKTtcbiAgfVxuICBcbiAgaWYgKGNvdXJzZURhdGEub3JpZ2luYWxQcmljZSA8IDAgfHwgaXNOYU4oY291cnNlRGF0YS5vcmlnaW5hbFByaWNlKSkge1xuICAgIGVycm9ycy5wdXNoKCdPcmlnaW5hbCBwcmljZSBtdXN0IGJlIGEgdmFsaWQgbnVtYmVyICgwIG9yIGdyZWF0ZXIpJyk7XG4gIH1cbiAgXG4gIGlmIChjb3Vyc2VEYXRhLm9yaWdpbmFsUHJpY2UgPiAwICYmIGNvdXJzZURhdGEucHJpY2UgPiBjb3Vyc2VEYXRhLm9yaWdpbmFsUHJpY2UpIHtcbiAgICBlcnJvcnMucHVzaCgnUHJpY2UgY2Fubm90IGJlIGdyZWF0ZXIgdGhhbiBvcmlnaW5hbCBwcmljZScpO1xuICB9XG4gIFxuICByZXR1cm4ge1xuICAgIGlzVmFsaWQ6IGVycm9ycy5sZW5ndGggPT09IDAsXG4gICAgZXJyb3JzXG4gIH07XG59O1xuXG5leHBvcnQgY2xhc3MgQ291cnNlU2VydmljZSB7XG4gIC8vIENyZWF0ZSBhIG5ldyBjb3Vyc2VcbiAgc3RhdGljIGFzeW5jIGNyZWF0ZUNvdXJzZShjb3Vyc2VEYXRhOiBOZXdDb3Vyc2UpOiBQcm9taXNlPENvdXJzZVJlc3BvbnNlPiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFZhbGlkYXRlIGNvdXJzZSBkYXRhXG4gICAgICBjb25zdCB2YWxpZGF0aW9uID0gdmFsaWRhdGVDb3Vyc2VEYXRhKGNvdXJzZURhdGEpO1xuICAgICAgaWYgKCF2YWxpZGF0aW9uLmlzVmFsaWQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogYFZhbGlkYXRpb24gZmFpbGVkOiAke3ZhbGlkYXRpb24uZXJyb3JzLmpvaW4oJywgJyl9YFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjb3Vyc2VJZCA9IHV1aWR2NCgpO1xuICAgICAgXG4gICAgICBjb25zdCBjb3Vyc2VXaXRoTWV0YWRhdGEgPSB7XG4gICAgICAgIC4uLmNvdXJzZURhdGEsXG4gICAgICAgIF9pZDogY291cnNlSWQsXG4gICAgICAgIGNyZWF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCksXG4gICAgICAgIHVwZGF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCksXG4gICAgICAgIHN0YXR1czogY291cnNlRGF0YS5zdGF0dXMgfHwgJ2RyYWZ0JyxcbiAgICAgICAgLy8gRW5zdXJlIHRoZXNlIGZpZWxkcyBhcmUgbnVtYmVyc1xuICAgICAgICByYXRpbmc6IE51bWJlcihjb3Vyc2VEYXRhLnJhdGluZykgfHwgMCxcbiAgICAgICAgdG90YWxSYXRpbmdzOiBOdW1iZXIoY291cnNlRGF0YS50b3RhbFJhdGluZ3MpIHx8IDAsXG4gICAgICAgIGVucm9sbGVkU3R1ZGVudHM6IE51bWJlcihjb3Vyc2VEYXRhLmVucm9sbGVkU3R1ZGVudHMpIHx8IDAsXG4gICAgICAgIHByaWNlOiBOdW1iZXIoY291cnNlRGF0YS5wcmljZSkgfHwgMCxcbiAgICAgICAgb3JpZ2luYWxQcmljZTogTnVtYmVyKGNvdXJzZURhdGEub3JpZ2luYWxQcmljZSkgfHwgMCxcbiAgICAgICAgLy8gRW5zdXJlIGFycmF5cyBhcmUgcHJvcGVybHkgaW5pdGlhbGl6ZWRcbiAgICAgICAgbGVhcm5pbmdPdXRjb21lczogQXJyYXkuaXNBcnJheShjb3Vyc2VEYXRhLmxlYXJuaW5nT3V0Y29tZXMpID8gY291cnNlRGF0YS5sZWFybmluZ091dGNvbWVzLmZpbHRlcihpdGVtID0+IGl0ZW0gJiYgaXRlbS50cmltKCkpIDogW10sXG4gICAgICAgIGZlYXR1cmVzOiBBcnJheS5pc0FycmF5KGNvdXJzZURhdGEuZmVhdHVyZXMpID8gY291cnNlRGF0YS5mZWF0dXJlcy5maWx0ZXIoaXRlbSA9PiBpdGVtICYmIGl0ZW0udHJpbSgpKSA6IFtdLFxuICAgICAgICBza2lsbHM6IEFycmF5LmlzQXJyYXkoY291cnNlRGF0YS5za2lsbHMpID8gY291cnNlRGF0YS5za2lsbHMuZmlsdGVyKGl0ZW0gPT4gaXRlbSAmJiBpdGVtLnRyaW0oKSkgOiBbXSxcbiAgICAgICAgcmVxdWlyZW1lbnRzOiBBcnJheS5pc0FycmF5KGNvdXJzZURhdGEucmVxdWlyZW1lbnRzKSA/IGNvdXJzZURhdGEucmVxdWlyZW1lbnRzLmZpbHRlcihpdGVtID0+IGl0ZW0gJiYgaXRlbS50cmltKCkpIDogW10sXG4gICAgICAgIG1vZHVsZTogQXJyYXkuaXNBcnJheShjb3Vyc2VEYXRhLm1vZHVsZSkgPyBjb3Vyc2VEYXRhLm1vZHVsZSA6IFtdLFxuICAgICAgICBoaWdobGlnaHRzOiBBcnJheS5pc0FycmF5KGNvdXJzZURhdGEuaGlnaGxpZ2h0cykgPyBjb3Vyc2VEYXRhLmhpZ2hsaWdodHMgOiBbXSxcbiAgICAgICAgcHJvamVjdDogQXJyYXkuaXNBcnJheShjb3Vyc2VEYXRhLnByb2plY3QpID8gY291cnNlRGF0YS5wcm9qZWN0IDogW10sXG4gICAgICAgIHByb2dyYW1Gb3I6IEFycmF5LmlzQXJyYXkoY291cnNlRGF0YS5wcm9ncmFtRm9yKSA/IGNvdXJzZURhdGEucHJvZ3JhbUZvciA6IFtdLFxuICAgICAgICAvLyBFbnN1cmUgc3RyaW5ncyBhcmUgbm90IHVuZGVmaW5lZFxuICAgICAgICB0aXRsZTogY291cnNlRGF0YS50aXRsZT8udHJpbSgpIHx8ICcnLFxuICAgICAgICBzbHVnOiBjb3Vyc2VEYXRhLnNsdWc/LnRyaW0oKSB8fCBjb3Vyc2VEYXRhLnRpdGxlPy50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccysvZywgJy0nKS5yZXBsYWNlKC9bXmEtejAtOS1dL2csICcnKSB8fCAnJyxcbiAgICAgICAgc2hvcnREZXNjcmlwdGlvbjogY291cnNlRGF0YS5zaG9ydERlc2NyaXB0aW9uPy50cmltKCkgfHwgJycsXG4gICAgICAgIGNhdGVnb3J5OiBjb3Vyc2VEYXRhLmNhdGVnb3J5Py50cmltKCkgfHwgJycsXG4gICAgICAgIGxldmVsOiBjb3Vyc2VEYXRhLmxldmVsIHx8ICdiZWdpbm5lcicsXG4gICAgICAgIGxhbmd1YWdlOiBjb3Vyc2VEYXRhLmxhbmd1YWdlPy50cmltKCkgfHwgJycsXG4gICAgICAgIGR1cmF0aW9uOiBjb3Vyc2VEYXRhLmR1cmF0aW9uPy50cmltKCkgfHwgJycsXG4gICAgICAgIGhvdXJzOiBjb3Vyc2VEYXRhLmhvdXJzPy50cmltKCkgfHwgJycsXG4gICAgICAgIHByb2dyYW1CeTogY291cnNlRGF0YS5wcm9ncmFtQnk/LnRyaW0oKSB8fCAnQWRtaW4nLFxuICAgICAgICBsYXN0VXBkYXRlZDogY291cnNlRGF0YS5sYXN0VXBkYXRlZCB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHBheW1lbnRMaW5rOiBjb3Vyc2VEYXRhLnBheW1lbnRMaW5rPy50cmltKCkgfHwgJycsXG4gICAgICAgIGJhY2tncm91bmRJbWFnZTogY291cnNlRGF0YS5iYWNrZ3JvdW5kSW1hZ2U/LnRyaW0oKSB8fCAnJyxcbiAgICAgICAgY2VydGlmaWNhdGVJbWFnZTogY291cnNlRGF0YS5jZXJ0aWZpY2F0ZUltYWdlPy50cmltKCkgfHwgJycsXG4gICAgICAgIGdsb2JhbFN0YXR1czogY291cnNlRGF0YS5nbG9iYWxTdGF0dXM/LnRyaW0oKSB8fCAnJyxcbiAgICAgICAgc3RhcnREYXRlOiBjb3Vyc2VEYXRhLnN0YXJ0RGF0ZT8udHJpbSgpIHx8ICcnLFxuICAgICAgICAvLyBFbnN1cmUgdG9vbHNEYXRhIGhhcyBwcm9wZXIgc3RydWN0dXJlXG4gICAgICAgIHRvb2xzRGF0YTogY291cnNlRGF0YS50b29sc0RhdGEgfHwge1xuICAgICAgICAgIHNlY3Rpb25UaXRsZTogJycsXG4gICAgICAgICAgY2F0ZWdvcnk6ICcnLFxuICAgICAgICAgIHRvb2xzQ291bnQ6ICcwJyxcbiAgICAgICAgICBkaXNwbGF5SW1hZ2U6ICcnLFxuICAgICAgICAgIHRvb2xzOiBbXVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvLyBDbGVhbiB0aGUgZGF0YSBiZWZvcmUgc2VuZGluZ1xuICAgICAgY29uc3QgY2xlYW5lZERhdGEgPSBjbGVhbkNvdXJzZURhdGEoY291cnNlV2l0aE1ldGFkYXRhKTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ0NyZWF0aW5nIGNvdXJzZSB3aXRoIGNsZWFuZWQgZGF0YTonLCB7XG4gICAgICAgIHRpdGxlOiBjbGVhbmVkRGF0YS50aXRsZSxcbiAgICAgICAgc3RhdHVzOiBjbGVhbmVkRGF0YS5zdGF0dXMsXG4gICAgICAgIHByaWNlOiBjbGVhbmVkRGF0YS5wcmljZVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGRvY1JlZiA9IGF3YWl0IGFkZERvYyhjb2xsZWN0aW9uKGRiLCBDT0xMRUNUSU9OX05BTUUpLCBjbGVhbmVkRGF0YSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGNyZWF0ZWRDb3Vyc2U6IENvdXJzZSA9IHtcbiAgICAgICAgLi4uY2xlYW5lZERhdGEsXG4gICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcbiAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpXG4gICAgICB9IGFzIENvdXJzZTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YTogY3JlYXRlZENvdXJzZVxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBjb3Vyc2U6JywgZXJyb3IpO1xuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gaGFuZGxlRmlyZXN0b3JlRXJyb3IoZXJyb3IpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2VcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLy8gR2V0IGFsbCBjb3Vyc2VzIHdpdGggb3B0aW9uYWwgcGFnaW5hdGlvbiBhbmQgZmlsdGVyaW5nXG4gIHN0YXRpYyBhc3luYyBnZXRBbGxDb3Vyc2VzKG9wdGlvbnM/OiB7XG4gICAgcGFnZVNpemU/OiBudW1iZXI7XG4gICAgbGFzdERvYz86IERvY3VtZW50U25hcHNob3Q7XG4gICAgc3RhdHVzPzogJ2RyYWZ0JyB8ICdwdWJsaXNoZWQnO1xuICAgIGNhdGVnb3J5Pzogc3RyaW5nO1xuICAgIHNlYXJjaFRlcm0/OiBzdHJpbmc7XG4gIH0pOiBQcm9taXNlPENvdXJzZXNSZXNwb25zZT4ge1xuICAgIHRyeSB7XG4gICAgICBsZXQgcSA9IHF1ZXJ5KGNvbGxlY3Rpb24oZGIsIENPTExFQ1RJT05fTkFNRSkpO1xuICAgICAgXG4gICAgICAvLyBBZGQgZmlsdGVyc1xuICAgICAgaWYgKG9wdGlvbnM/LnN0YXR1cykge1xuICAgICAgICBxID0gcXVlcnkocSwgd2hlcmUoJ3N0YXR1cycsICc9PScsIG9wdGlvbnMuc3RhdHVzKSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChvcHRpb25zPy5jYXRlZ29yeSkge1xuICAgICAgICBxID0gcXVlcnkocSwgd2hlcmUoJ2NhdGVnb3J5JywgJz09Jywgb3B0aW9ucy5jYXRlZ29yeSkpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBBZGQgb3JkZXJpbmdcbiAgICAgIHEgPSBxdWVyeShxLCBvcmRlckJ5KCdjcmVhdGVkQXQnLCAnZGVzYycpKTtcbiAgICAgIFxuICAgICAgLy8gQWRkIHBhZ2luYXRpb25cbiAgICAgIGlmIChvcHRpb25zPy5wYWdlU2l6ZSkge1xuICAgICAgICBxID0gcXVlcnkocSwgZmlyZXN0b3JlTGltaXQob3B0aW9ucy5wYWdlU2l6ZSkpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAob3B0aW9ucz8ubGFzdERvYykge1xuICAgICAgICBxID0gcXVlcnkocSwgc3RhcnRBZnRlcihvcHRpb25zLmxhc3REb2MpKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgcXVlcnlTbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGNvdXJzZXM6IENvdXJzZVtdID0gW107XG4gICAgICBxdWVyeVNuYXBzaG90LmZvckVhY2goKGRvYykgPT4ge1xuICAgICAgICBjb25zdCBkYXRhID0gZG9jLmRhdGEoKTtcbiAgICAgICAgY29uc3QgY291cnNlOiBDb3Vyc2UgPSB7XG4gICAgICAgICAgLi4uZGF0YSxcbiAgICAgICAgICBjcmVhdGVkQXQ6IGRhdGEuY3JlYXRlZEF0Py50b0RhdGUoKSB8fCBuZXcgRGF0ZSgpLFxuICAgICAgICAgIHVwZGF0ZWRBdDogZGF0YS51cGRhdGVkQXQ/LnRvRGF0ZSgpIHx8IG5ldyBEYXRlKCksXG4gICAgICAgICAgLy8gRW5zdXJlIHJlcXVpcmVkIGZpZWxkcyBoYXZlIGRlZmF1bHQgdmFsdWVzXG4gICAgICAgICAgcmF0aW5nOiBOdW1iZXIoZGF0YS5yYXRpbmcpIHx8IDAsXG4gICAgICAgICAgdG90YWxSYXRpbmdzOiBOdW1iZXIoZGF0YS50b3RhbFJhdGluZ3MpIHx8IDAsXG4gICAgICAgICAgZW5yb2xsZWRTdHVkZW50czogTnVtYmVyKGRhdGEuZW5yb2xsZWRTdHVkZW50cykgfHwgMCxcbiAgICAgICAgICBwcmljZTogTnVtYmVyKGRhdGEucHJpY2UpIHx8IDAsXG4gICAgICAgICAgb3JpZ2luYWxQcmljZTogTnVtYmVyKGRhdGEub3JpZ2luYWxQcmljZSkgfHwgMCxcbiAgICAgICAgICBsZWFybmluZ091dGNvbWVzOiBBcnJheS5pc0FycmF5KGRhdGEubGVhcm5pbmdPdXRjb21lcykgPyBkYXRhLmxlYXJuaW5nT3V0Y29tZXMgOiBbXSxcbiAgICAgICAgICBmZWF0dXJlczogQXJyYXkuaXNBcnJheShkYXRhLmZlYXR1cmVzKSA/IGRhdGEuZmVhdHVyZXMgOiBbXSxcbiAgICAgICAgICBza2lsbHM6IEFycmF5LmlzQXJyYXkoZGF0YS5za2lsbHMpID8gZGF0YS5za2lsbHMgOiBbXSxcbiAgICAgICAgICByZXF1aXJlbWVudHM6IEFycmF5LmlzQXJyYXkoZGF0YS5yZXF1aXJlbWVudHMpID8gZGF0YS5yZXF1aXJlbWVudHMgOiBbXSxcbiAgICAgICAgICBtb2R1bGU6IEFycmF5LmlzQXJyYXkoZGF0YS5tb2R1bGUpID8gZGF0YS5tb2R1bGUgOiBbXSxcbiAgICAgICAgICBoaWdobGlnaHRzOiBBcnJheS5pc0FycmF5KGRhdGEuaGlnaGxpZ2h0cykgPyBkYXRhLmhpZ2hsaWdodHMgOiBbXSxcbiAgICAgICAgICBwcm9qZWN0OiBBcnJheS5pc0FycmF5KGRhdGEucHJvamVjdCkgPyBkYXRhLnByb2plY3QgOiBbXSxcbiAgICAgICAgICBwcm9ncmFtRm9yOiBBcnJheS5pc0FycmF5KGRhdGEucHJvZ3JhbUZvcikgPyBkYXRhLnByb2dyYW1Gb3IgOiBbXSxcbiAgICAgICAgICB0b29sc0RhdGE6IGRhdGEudG9vbHNEYXRhIHx8IHtcbiAgICAgICAgICAgIHNlY3Rpb25UaXRsZTogJycsXG4gICAgICAgICAgICBjYXRlZ29yeTogJycsXG4gICAgICAgICAgICB0b29sc0NvdW50OiAnMCcsXG4gICAgICAgICAgICBkaXNwbGF5SW1hZ2U6ICcnLFxuICAgICAgICAgICAgdG9vbHM6IFtdXG4gICAgICAgICAgfVxuICAgICAgICB9IGFzIENvdXJzZTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFwcGx5IHNlYXJjaCBmaWx0ZXIgb24gY2xpZW50IHNpZGUgKGZvciBzaW1wbGljaXR5KVxuICAgICAgICBpZiAob3B0aW9ucz8uc2VhcmNoVGVybSkge1xuICAgICAgICAgIGNvbnN0IHNlYXJjaExvd2VyID0gb3B0aW9ucy5zZWFyY2hUZXJtLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgY29uc3QgbWF0Y2hlc1NlYXJjaCA9IFxuICAgICAgICAgICAgY291cnNlLnRpdGxlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoTG93ZXIpIHx8XG4gICAgICAgICAgICBjb3Vyc2UuY2F0ZWdvcnkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhzZWFyY2hMb3dlcikgfHxcbiAgICAgICAgICAgIGNvdXJzZS5zaG9ydERlc2NyaXB0aW9uLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoTG93ZXIpIHx8XG4gICAgICAgICAgICBjb3Vyc2UucHJvZ3JhbUJ5LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoc2VhcmNoTG93ZXIpO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChtYXRjaGVzU2VhcmNoKSB7XG4gICAgICAgICAgICBjb3Vyc2VzLnB1c2goY291cnNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY291cnNlcy5wdXNoKGNvdXJzZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiBjb3Vyc2VzLFxuICAgICAgICBwYWdpbmF0aW9uOiB7XG4gICAgICAgICAgdG90YWw6IGNvdXJzZXMubGVuZ3RoLFxuICAgICAgICAgIHBhZ2U6IDEsXG4gICAgICAgICAgcGFnZXM6IDFcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBjb3Vyc2VzOicsIGVycm9yKTtcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGhhbmRsZUZpcmVzdG9yZUVycm9yKGVycm9yKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogZXJyb3JNZXNzYWdlXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8vIEdldCBjb3Vyc2UgYnkgSURcbiAgc3RhdGljIGFzeW5jIGdldENvdXJzZUJ5SWQoY291cnNlSWQ6IHN0cmluZyk6IFByb21pc2U8Q291cnNlUmVzcG9uc2U+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFjb3Vyc2VJZCB8fCBjb3Vyc2VJZC50cmltKCkgPT09ICcnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6ICdDb3Vyc2UgSUQgaXMgcmVxdWlyZWQnXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHEgPSBxdWVyeShjb2xsZWN0aW9uKGRiLCBDT0xMRUNUSU9OX05BTUUpLCB3aGVyZSgnX2lkJywgJz09JywgY291cnNlSWQpKTtcbiAgICAgIGNvbnN0IHF1ZXJ5U25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xuICAgICAgXG4gICAgICBpZiAocXVlcnlTbmFwc2hvdC5lbXB0eSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiAnQ291cnNlIG5vdCBmb3VuZCdcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZG9jID0gcXVlcnlTbmFwc2hvdC5kb2NzWzBdO1xuICAgICAgY29uc3QgZGF0YSA9IGRvYy5kYXRhKCk7XG4gICAgICBjb25zdCBjb3Vyc2U6IENvdXJzZSA9IHtcbiAgICAgICAgLi4uZGF0YSxcbiAgICAgICAgY3JlYXRlZEF0OiBkYXRhLmNyZWF0ZWRBdD8udG9EYXRlKCkgfHwgbmV3IERhdGUoKSxcbiAgICAgICAgdXBkYXRlZEF0OiBkYXRhLnVwZGF0ZWRBdD8udG9EYXRlKCkgfHwgbmV3IERhdGUoKSxcbiAgICAgICAgLy8gRW5zdXJlIHJlcXVpcmVkIGZpZWxkcyBoYXZlIGRlZmF1bHQgdmFsdWVzXG4gICAgICAgIHJhdGluZzogTnVtYmVyKGRhdGEucmF0aW5nKSB8fCAwLFxuICAgICAgICB0b3RhbFJhdGluZ3M6IE51bWJlcihkYXRhLnRvdGFsUmF0aW5ncykgfHwgMCxcbiAgICAgICAgZW5yb2xsZWRTdHVkZW50czogTnVtYmVyKGRhdGEuZW5yb2xsZWRTdHVkZW50cykgfHwgMCxcbiAgICAgICAgcHJpY2U6IE51bWJlcihkYXRhLnByaWNlKSB8fCAwLFxuICAgICAgICBvcmlnaW5hbFByaWNlOiBOdW1iZXIoZGF0YS5vcmlnaW5hbFByaWNlKSB8fCAwLFxuICAgICAgICBsZWFybmluZ091dGNvbWVzOiBBcnJheS5pc0FycmF5KGRhdGEubGVhcm5pbmdPdXRjb21lcykgPyBkYXRhLmxlYXJuaW5nT3V0Y29tZXMgOiBbXSxcbiAgICAgICAgZmVhdHVyZXM6IEFycmF5LmlzQXJyYXkoZGF0YS5mZWF0dXJlcykgPyBkYXRhLmZlYXR1cmVzIDogW10sXG4gICAgICAgIHNraWxsczogQXJyYXkuaXNBcnJheShkYXRhLnNraWxscykgPyBkYXRhLnNraWxscyA6IFtdLFxuICAgICAgICByZXF1aXJlbWVudHM6IEFycmF5LmlzQXJyYXkoZGF0YS5yZXF1aXJlbWVudHMpID8gZGF0YS5yZXF1aXJlbWVudHMgOiBbXSxcbiAgICAgICAgbW9kdWxlOiBBcnJheS5pc0FycmF5KGRhdGEubW9kdWxlKSA/IGRhdGEubW9kdWxlIDogW10sXG4gICAgICAgIGhpZ2hsaWdodHM6IEFycmF5LmlzQXJyYXkoZGF0YS5oaWdobGlnaHRzKSA/IGRhdGEuaGlnaGxpZ2h0cyA6IFtdLFxuICAgICAgICBwcm9qZWN0OiBBcnJheS5pc0FycmF5KGRhdGEucHJvamVjdCkgPyBkYXRhLnByb2plY3QgOiBbXSxcbiAgICAgICAgcHJvZ3JhbUZvcjogQXJyYXkuaXNBcnJheShkYXRhLnByb2dyYW1Gb3IpID8gZGF0YS5wcm9ncmFtRm9yIDogW10sXG4gICAgICAgIHRvb2xzRGF0YTogZGF0YS50b29sc0RhdGEgfHwge1xuICAgICAgICAgIHNlY3Rpb25UaXRsZTogJycsXG4gICAgICAgICAgY2F0ZWdvcnk6ICcnLFxuICAgICAgICAgIHRvb2xzQ291bnQ6ICcwJyxcbiAgICAgICAgICBkaXNwbGF5SW1hZ2U6ICcnLFxuICAgICAgICAgIHRvb2xzOiBbXVxuICAgICAgICB9XG4gICAgICB9IGFzIENvdXJzZTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgZGF0YTogY291cnNlXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGNvdXJzZTonLCBlcnJvcik7XG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBoYW5kbGVGaXJlc3RvcmVFcnJvcihlcnJvcik7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IGVycm9yTWVzc2FnZVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvLyBHZXQgY291cnNlIGJ5IHNsdWdcbiAgc3RhdGljIGFzeW5jIGdldENvdXJzZUJ5U2x1ZyhzbHVnOiBzdHJpbmcpOiBQcm9taXNlPENvdXJzZVJlc3BvbnNlPiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghc2x1ZyB8fCBzbHVnLnRyaW0oKSA9PT0gJycpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogJ0NvdXJzZSBzbHVnIGlzIHJlcXVpcmVkJ1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBjb25zdCBxID0gcXVlcnkoY29sbGVjdGlvbihkYiwgQ09MTEVDVElPTl9OQU1FKSwgd2hlcmUoJ3NsdWcnLCAnPT0nLCBzbHVnKSk7XG4gICAgICBjb25zdCBxdWVyeVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgICAgIFxuICAgICAgaWYgKHF1ZXJ5U25hcHNob3QuZW1wdHkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogJ0NvdXJzZSBub3QgZm91bmQnXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRvYyA9IHF1ZXJ5U25hcHNob3QuZG9jc1swXTtcbiAgICAgIGNvbnN0IGRhdGEgPSBkb2MuZGF0YSgpO1xuICAgICAgY29uc3QgY291cnNlOiBDb3Vyc2UgPSB7XG4gICAgICAgIC4uLmRhdGEsXG4gICAgICAgIGNyZWF0ZWRBdDogZGF0YS5jcmVhdGVkQXQ/LnRvRGF0ZSgpIHx8IG5ldyBEYXRlKCksXG4gICAgICAgIHVwZGF0ZWRBdDogZGF0YS51cGRhdGVkQXQ/LnRvRGF0ZSgpIHx8IG5ldyBEYXRlKClcbiAgICAgIH0gYXMgQ291cnNlO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiBjb3Vyc2VcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgY291cnNlIGJ5IHNsdWc6JywgZXJyb3IpO1xuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gaGFuZGxlRmlyZXN0b3JlRXJyb3IoZXJyb3IpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2VcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLy8gVXBkYXRlIGNvdXJzZVxuICBzdGF0aWMgYXN5bmMgdXBkYXRlQ291cnNlKGNvdXJzZUlkOiBzdHJpbmcsIGNvdXJzZURhdGE6IFBhcnRpYWw8Q291cnNlPik6IFByb21pc2U8Q291cnNlUmVzcG9uc2U+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFjb3Vyc2VJZCB8fCBjb3Vyc2VJZC50cmltKCkgPT09ICcnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6ICdDb3Vyc2UgSUQgaXMgcmVxdWlyZWQnXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8vIFZhbGlkYXRlIHVwZGF0ZWQgZGF0YSBpZiBpdCBjb250YWlucyByZXF1aXJlZCBmaWVsZHNcbiAgICAgIGlmIChjb3Vyc2VEYXRhLnRpdGxlIHx8IGNvdXJzZURhdGEuc2hvcnREZXNjcmlwdGlvbiB8fCBjb3Vyc2VEYXRhLmNhdGVnb3J5KSB7XG4gICAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSB2YWxpZGF0ZUNvdXJzZURhdGEoe1xuICAgICAgICAgIHRpdGxlOiBjb3Vyc2VEYXRhLnRpdGxlIHx8ICd0ZW1wJyxcbiAgICAgICAgICBzaG9ydERlc2NyaXB0aW9uOiBjb3Vyc2VEYXRhLnNob3J0RGVzY3JpcHRpb24gfHwgJ3RlbXAnLFxuICAgICAgICAgIGNhdGVnb3J5OiBjb3Vyc2VEYXRhLmNhdGVnb3J5IHx8ICd0ZW1wJyxcbiAgICAgICAgICBsZXZlbDogY291cnNlRGF0YS5sZXZlbCB8fCAnYmVnaW5uZXInLFxuICAgICAgICAgIGxhbmd1YWdlOiBjb3Vyc2VEYXRhLmxhbmd1YWdlIHx8ICd0ZW1wJyxcbiAgICAgICAgICBkdXJhdGlvbjogY291cnNlRGF0YS5kdXJhdGlvbiB8fCAndGVtcCcsXG4gICAgICAgICAgaG91cnM6IGNvdXJzZURhdGEuaG91cnMgfHwgJ3RlbXAnLFxuICAgICAgICAgIHByaWNlOiBjb3Vyc2VEYXRhLnByaWNlIHx8IDAsXG4gICAgICAgICAgb3JpZ2luYWxQcmljZTogY291cnNlRGF0YS5vcmlnaW5hbFByaWNlIHx8IDBcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIXZhbGlkYXRpb24uaXNWYWxpZCkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIGVycm9yOiBgVmFsaWRhdGlvbiBmYWlsZWQ6ICR7dmFsaWRhdGlvbi5lcnJvcnMuam9pbignLCAnKX1gXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCBxID0gcXVlcnkoY29sbGVjdGlvbihkYiwgQ09MTEVDVElPTl9OQU1FKSwgd2hlcmUoJ19pZCcsICc9PScsIGNvdXJzZUlkKSk7XG4gICAgICBjb25zdCBxdWVyeVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgICAgIFxuICAgICAgaWYgKHF1ZXJ5U25hcHNob3QuZW1wdHkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogJ0NvdXJzZSBub3QgZm91bmQnXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRvY1JlZiA9IHF1ZXJ5U25hcHNob3QuZG9jc1swXS5yZWY7XG4gICAgICBcbiAgICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7XG4gICAgICAgIC4uLmNvdXJzZURhdGEsXG4gICAgICAgIHVwZGF0ZWRBdDogc2VydmVyVGltZXN0YW1wKCksXG4gICAgICAgIGxhc3RVcGRhdGVkOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIC8vIEVuc3VyZSBudW1lcmljIGZpZWxkcyBhcmUgcHJvcGVybHkgdHlwZWRcbiAgICAgICAgLi4uKGNvdXJzZURhdGEucmF0aW5nICE9PSB1bmRlZmluZWQgJiYgeyByYXRpbmc6IE51bWJlcihjb3Vyc2VEYXRhLnJhdGluZykgfSksXG4gICAgICAgIC4uLihjb3Vyc2VEYXRhLnRvdGFsUmF0aW5ncyAhPT0gdW5kZWZpbmVkICYmIHsgdG90YWxSYXRpbmdzOiBOdW1iZXIoY291cnNlRGF0YS50b3RhbFJhdGluZ3MpIH0pLFxuICAgICAgICAuLi4oY291cnNlRGF0YS5lbnJvbGxlZFN0dWRlbnRzICE9PSB1bmRlZmluZWQgJiYgeyBlbnJvbGxlZFN0dWRlbnRzOiBOdW1iZXIoY291cnNlRGF0YS5lbnJvbGxlZFN0dWRlbnRzKSB9KSxcbiAgICAgICAgLi4uKGNvdXJzZURhdGEucHJpY2UgIT09IHVuZGVmaW5lZCAmJiB7IHByaWNlOiBOdW1iZXIoY291cnNlRGF0YS5wcmljZSkgfSksXG4gICAgICAgIC4uLihjb3Vyc2VEYXRhLm9yaWdpbmFsUHJpY2UgIT09IHVuZGVmaW5lZCAmJiB7IG9yaWdpbmFsUHJpY2U6IE51bWJlcihjb3Vyc2VEYXRhLm9yaWdpbmFsUHJpY2UpIH0pLFxuICAgICAgICAvLyBFbnN1cmUgYXJyYXlzIGFyZSBwcm9wZXJseSBmaWx0ZXJlZFxuICAgICAgICAuLi4oY291cnNlRGF0YS5sZWFybmluZ091dGNvbWVzICYmIHsgXG4gICAgICAgICAgbGVhcm5pbmdPdXRjb21lczogQXJyYXkuaXNBcnJheShjb3Vyc2VEYXRhLmxlYXJuaW5nT3V0Y29tZXMpIFxuICAgICAgICAgICAgPyBjb3Vyc2VEYXRhLmxlYXJuaW5nT3V0Y29tZXMuZmlsdGVyKGl0ZW0gPT4gaXRlbSAmJiBpdGVtLnRyaW0oKSkgXG4gICAgICAgICAgICA6IFtdIFxuICAgICAgICB9KSxcbiAgICAgICAgLi4uKGNvdXJzZURhdGEuZmVhdHVyZXMgJiYgeyBcbiAgICAgICAgICBmZWF0dXJlczogQXJyYXkuaXNBcnJheShjb3Vyc2VEYXRhLmZlYXR1cmVzKSBcbiAgICAgICAgICAgID8gY291cnNlRGF0YS5mZWF0dXJlcy5maWx0ZXIoaXRlbSA9PiBpdGVtICYmIGl0ZW0udHJpbSgpKSBcbiAgICAgICAgICAgIDogW10gXG4gICAgICAgIH0pLFxuICAgICAgICAuLi4oY291cnNlRGF0YS5za2lsbHMgJiYgeyBcbiAgICAgICAgICBza2lsbHM6IEFycmF5LmlzQXJyYXkoY291cnNlRGF0YS5za2lsbHMpIFxuICAgICAgICAgICAgPyBjb3Vyc2VEYXRhLnNraWxscy5maWx0ZXIoaXRlbSA9PiBpdGVtICYmIGl0ZW0udHJpbSgpKSBcbiAgICAgICAgICAgIDogW10gXG4gICAgICAgIH0pLFxuICAgICAgICAuLi4oY291cnNlRGF0YS5yZXF1aXJlbWVudHMgJiYgeyBcbiAgICAgICAgICByZXF1aXJlbWVudHM6IEFycmF5LmlzQXJyYXkoY291cnNlRGF0YS5yZXF1aXJlbWVudHMpIFxuICAgICAgICAgICAgPyBjb3Vyc2VEYXRhLnJlcXVpcmVtZW50cy5maWx0ZXIoaXRlbSA9PiBpdGVtICYmIGl0ZW0udHJpbSgpKSBcbiAgICAgICAgICAgIDogW10gXG4gICAgICAgIH0pLFxuICAgICAgICAvLyBVcGRhdGUgc2x1ZyBpZiB0aXRsZSBjaGFuZ2VkXG4gICAgICAgIC4uLihjb3Vyc2VEYXRhLnRpdGxlICYmIHsgXG4gICAgICAgICAgc2x1ZzogY291cnNlRGF0YS50aXRsZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccysvZywgJy0nKS5yZXBsYWNlKC9bXmEtejAtOS1dL2csICcnKSBcbiAgICAgICAgfSlcbiAgICAgIH07XG5cbiAgICAgIC8vIENsZWFuIHRoZSBkYXRhIGJlZm9yZSBzZW5kaW5nXG4gICAgICBjb25zdCBjbGVhbmVkRGF0YSA9IGNsZWFuQ291cnNlRGF0YSh1cGRhdGVEYXRhKTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ1VwZGF0aW5nIGNvdXJzZSB3aXRoIGNsZWFuZWQgZGF0YTonLCB7XG4gICAgICAgIGNvdXJzZUlkLFxuICAgICAgICBmaWVsZHNVcGRhdGVkOiBPYmplY3Qua2V5cyhjbGVhbmVkRGF0YSlcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB1cGRhdGVEb2MoZG9jUmVmLCBjbGVhbmVkRGF0YSk7XG5cbiAgICAgIC8vIEZldGNoIHRoZSB1cGRhdGVkIGNvdXJzZVxuICAgICAgY29uc3QgdXBkYXRlZENvdXJzZVJlc3BvbnNlID0gYXdhaXQgdGhpcy5nZXRDb3Vyc2VCeUlkKGNvdXJzZUlkKTtcbiAgICAgIFxuICAgICAgaWYgKHVwZGF0ZWRDb3Vyc2VSZXNwb25zZS5zdWNjZXNzKSB7XG4gICAgICAgIHJldHVybiB1cGRhdGVkQ291cnNlUmVzcG9uc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgLi4uY291cnNlRGF0YSxcbiAgICAgICAgICAgIF9pZDogY291cnNlSWQsXG4gICAgICAgICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKClcbiAgICAgICAgICB9IGFzIENvdXJzZVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIGNvdXJzZTonLCBlcnJvcik7XG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBoYW5kbGVGaXJlc3RvcmVFcnJvcihlcnJvcik7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IGVycm9yTWVzc2FnZVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvLyBEZWxldGUgY291cnNlXG4gIHN0YXRpYyBhc3luYyBkZWxldGVDb3Vyc2UoY291cnNlSWQ6IHN0cmluZyk6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyBlcnJvcj86IHN0cmluZyB9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghY291cnNlSWQgfHwgY291cnNlSWQudHJpbSgpID09PSAnJykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiAnQ291cnNlIElEIGlzIHJlcXVpcmVkJ1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBjb25zdCBxID0gcXVlcnkoY29sbGVjdGlvbihkYiwgQ09MTEVDVElPTl9OQU1FKSwgd2hlcmUoJ19pZCcsICc9PScsIGNvdXJzZUlkKSk7XG4gICAgICBjb25zdCBxdWVyeVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgICAgIFxuICAgICAgaWYgKHF1ZXJ5U25hcHNob3QuZW1wdHkpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogJ0NvdXJzZSBub3QgZm91bmQnXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRvY1JlZiA9IHF1ZXJ5U25hcHNob3QuZG9jc1swXS5yZWY7XG4gICAgICBjb25zdCBjb3Vyc2VEYXRhID0gcXVlcnlTbmFwc2hvdC5kb2NzWzBdLmRhdGEoKTtcbiAgICAgIFxuICAgICAgLy8gRGVsZXRlIGFzc29jaWF0ZWQgaW1hZ2VzIGZyb20gc3RvcmFnZVxuICAgICAgaWYgKGNvdXJzZURhdGEuYmFja2dyb3VuZEltYWdlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5kZWxldGVJbWFnZShjb3Vyc2VEYXRhLmJhY2tncm91bmRJbWFnZSk7XG4gICAgICAgIH0gY2F0Y2ggKGltYWdlRXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBkZWxldGUgYmFja2dyb3VuZCBpbWFnZTonLCBpbWFnZUVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoY291cnNlRGF0YS5jZXJ0aWZpY2F0ZUltYWdlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5kZWxldGVJbWFnZShjb3Vyc2VEYXRhLmNlcnRpZmljYXRlSW1hZ2UpO1xuICAgICAgICB9IGNhdGNoIChpbWFnZUVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gZGVsZXRlIGNlcnRpZmljYXRlIGltYWdlOicsIGltYWdlRXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGF3YWl0IGRlbGV0ZURvYyhkb2NSZWYpO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygnQ291cnNlIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5OicsIGNvdXJzZUlkKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZVxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBjb3Vyc2U6JywgZXJyb3IpO1xuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gaGFuZGxlRmlyZXN0b3JlRXJyb3IoZXJyb3IpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2VcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLy8gQnVsayBkZWxldGUgY291cnNlc1xuICBzdGF0aWMgYXN5bmMgZGVsZXRlQ291cnNlcyhjb3Vyc2VJZHM6IHN0cmluZ1tdKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IGVycm9yPzogc3RyaW5nOyBkZWxldGVkQ291bnQ/OiBudW1iZXIgfT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIWNvdXJzZUlkcyB8fCBjb3Vyc2VJZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6ICdDb3Vyc2UgSURzIGFyZSByZXF1aXJlZCdcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgYmF0Y2ggPSB3cml0ZUJhdGNoKGRiKTtcbiAgICAgIGxldCBkZWxldGVkQ291bnQgPSAwO1xuXG4gICAgICBmb3IgKGNvbnN0IGNvdXJzZUlkIG9mIGNvdXJzZUlkcykge1xuICAgICAgICBjb25zdCBxID0gcXVlcnkoY29sbGVjdGlvbihkYiwgQ09MTEVDVElPTl9OQU1FKSwgd2hlcmUoJ19pZCcsICc9PScsIGNvdXJzZUlkKSk7XG4gICAgICAgIGNvbnN0IHF1ZXJ5U25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFxdWVyeVNuYXBzaG90LmVtcHR5KSB7XG4gICAgICAgICAgY29uc3QgZG9jUmVmID0gcXVlcnlTbmFwc2hvdC5kb2NzWzBdLnJlZjtcbiAgICAgICAgICBiYXRjaC5kZWxldGUoZG9jUmVmKTtcbiAgICAgICAgICBkZWxldGVkQ291bnQrKztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZGVsZXRlZENvdW50ID09PSAwKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6ICdObyBjb3Vyc2VzIGZvdW5kIHRvIGRlbGV0ZSdcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgYXdhaXQgYmF0Y2guY29tbWl0KCk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRlbGV0ZWRDb3VudFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBidWxrIGRlbGV0aW5nIGNvdXJzZXM6JywgZXJyb3IpO1xuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gaGFuZGxlRmlyZXN0b3JlRXJyb3IoZXJyb3IpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2VcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLy8gVXBsb2FkIGltYWdlIHdpdGggYmV0dGVyIGVycm9yIGhhbmRsaW5nIGFuZCBvcHRpbWl6YXRpb25cbiAvLyBVcGxvYWQgaW1hZ2Ugd2l0aCBiZXR0ZXIgZXJyb3IgaGFuZGxpbmcgYW5kIG9wdGltaXphdGlvblxuc3RhdGljIGFzeW5jIHVwbG9hZEltYWdlKGZpbGU6IEZpbGUsIHBhdGg6IHN0cmluZyk6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyB1cmw/OiBzdHJpbmc7IGVycm9yPzogc3RyaW5nIH0+IHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygnU3RhcnRpbmcgaW1hZ2UgdXBsb2FkIHByb2Nlc3MuLi4nKTtcbiAgICBjb25zb2xlLmxvZygnRmlsZSBkZXRhaWxzOicsIHtcbiAgICAgIG5hbWU6IGZpbGUubmFtZSxcbiAgICAgIHNpemU6IGZpbGUuc2l6ZSxcbiAgICAgIHR5cGU6IGZpbGUudHlwZVxuICAgIH0pO1xuXG4gICAgLy8gVmFsaWRhdGUgZmlsZVxuICAgIGlmICghZmlsZSkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnTm8gZmlsZSBwcm92aWRlZCcgfTtcbiAgICB9XG4gICAgXG4gICAgaWYgKGZpbGUuc2l6ZSA+IDEwICogMTAyNCAqIDEwMjQpIHsgLy8gSW5jcmVhc2VkIHRvIDEwTUIgbGltaXRcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0ZpbGUgc2l6ZSBtdXN0IGJlIGxlc3MgdGhhbiAxME1CJyB9O1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBhbGxvd2VkVHlwZXMgPSBbJ2ltYWdlL2pwZWcnLCAnaW1hZ2UvanBnJywgJ2ltYWdlL3BuZycsICdpbWFnZS93ZWJwJywgJ2ltYWdlL2dpZiddO1xuICAgIGlmICghYWxsb3dlZFR5cGVzLmluY2x1ZGVzKGZpbGUudHlwZSkpIHtcbiAgICAgIHJldHVybiB7IFxuICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICAgIGVycm9yOiBgRmlsZSB0eXBlICR7ZmlsZS50eXBlfSBub3QgYWxsb3dlZC4gT25seSBKUEVHLCBQTkcsIFdlYlAsIGFuZCBHSUYgaW1hZ2VzIGFyZSBhbGxvd2VkYCBcbiAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIC8vIEdlbmVyYXRlIHVuaXF1ZSBmaWxlbmFtZVxuICAgIGNvbnN0IHRpbWVzdGFtcCA9IERhdGUubm93KCk7XG4gICAgY29uc3QgcmFuZG9tU3RyaW5nID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDE1KTtcbiAgICBjb25zdCBmaWxlRXh0ZW5zaW9uID0gZmlsZS5uYW1lLnNwbGl0KCcuJykucG9wKCk/LnRvTG93ZXJDYXNlKCkgfHwgJ2pwZyc7XG4gICAgY29uc3Qgc2FuaXRpemVkRmlsZU5hbWUgPSBmaWxlLm5hbWUucmVwbGFjZSgvW15hLXpBLVowLTkuLV0vZywgJ18nKTtcbiAgICBjb25zdCBmaWxlbmFtZSA9IGAke3RpbWVzdGFtcH1fJHtyYW5kb21TdHJpbmd9XyR7c2FuaXRpemVkRmlsZU5hbWV9YDtcbiAgICBcbiAgICBjb25zb2xlLmxvZygnR2VuZXJhdGVkIGZpbGVuYW1lOicsIGZpbGVuYW1lKTtcbiAgICBcbiAgICAvLyBDcmVhdGUgc3RvcmFnZSByZWZlcmVuY2VcbiAgICBjb25zdCBzdG9yYWdlUmVmID0gcmVmKHN0b3JhZ2UsIGAke3BhdGh9LyR7ZmlsZW5hbWV9YCk7XG4gICAgY29uc29sZS5sb2coJ1N0b3JhZ2UgcmVmZXJlbmNlIGNyZWF0ZWQ6Jywgc3RvcmFnZVJlZi5mdWxsUGF0aCk7XG4gICAgXG4gICAgLy8gVXBsb2FkIHdpdGggbWV0YWRhdGFcbiAgICBjb25zdCBtZXRhZGF0YSA9IHtcbiAgICAgIGNvbnRlbnRUeXBlOiBmaWxlLnR5cGUsXG4gICAgICBjdXN0b21NZXRhZGF0YToge1xuICAgICAgICB1cGxvYWRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIG9yaWdpbmFsTmFtZTogZmlsZS5uYW1lLFxuICAgICAgICB1cGxvYWRlZEJ5OiAnYWRtaW4nXG4gICAgICB9XG4gICAgfTtcbiAgICBcbiAgICBjb25zb2xlLmxvZygnU3RhcnRpbmcgdXBsb2FkIHdpdGggbWV0YWRhdGE6JywgbWV0YWRhdGEpO1xuICAgIFxuICAgIC8vIFBlcmZvcm0gdGhlIHVwbG9hZFxuICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgdXBsb2FkQnl0ZXMoc3RvcmFnZVJlZiwgZmlsZSwgbWV0YWRhdGEpO1xuICAgIGNvbnNvbGUubG9nKCdVcGxvYWQgY29tcGxldGVkLiBHZXR0aW5nIGRvd25sb2FkIFVSTC4uLicpO1xuICAgIFxuICAgIC8vIEdldCBkb3dubG9hZCBVUkxcbiAgICBjb25zdCBkb3dubG9hZFVSTCA9IGF3YWl0IGdldERvd25sb2FkVVJMKHNuYXBzaG90LnJlZik7XG4gICAgY29uc29sZS5sb2coJ0Rvd25sb2FkIFVSTCBvYnRhaW5lZDonLCBkb3dubG9hZFVSTCk7XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICB1cmw6IGRvd25sb2FkVVJMXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0RldGFpbGVkIHVwbG9hZCBlcnJvcjonLCB7XG4gICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgY29kZTogZXJyb3IuY29kZSxcbiAgICAgIHN0YWNrOiBlcnJvci5zdGFjayxcbiAgICAgIGVycm9yOiBlcnJvclxuICAgIH0pO1xuICAgIFxuICAgIC8vIEhhbmRsZSBzcGVjaWZpYyBGaXJlYmFzZSBlcnJvcnNcbiAgICBsZXQgZXJyb3JNZXNzYWdlID0gJ0ZhaWxlZCB0byB1cGxvYWQgaW1hZ2UnO1xuICAgIFxuICAgIGlmIChlcnJvci5jb2RlID09PSAnc3RvcmFnZS91bmF1dGhvcml6ZWQnKSB7XG4gICAgICBlcnJvck1lc3NhZ2UgPSAnUGVybWlzc2lvbiBkZW5pZWQuIFBsZWFzZSBjaGVjayBGaXJlYmFzZSBTdG9yYWdlIHJ1bGVzLic7XG4gICAgfSBlbHNlIGlmIChlcnJvci5jb2RlID09PSAnc3RvcmFnZS9jYW5jZWxlZCcpIHtcbiAgICAgIGVycm9yTWVzc2FnZSA9ICdVcGxvYWQgd2FzIGNhbmNlbGVkLic7XG4gICAgfSBlbHNlIGlmIChlcnJvci5jb2RlID09PSAnc3RvcmFnZS91bmtub3duJykge1xuICAgICAgZXJyb3JNZXNzYWdlID0gJ1Vua25vd24gZXJyb3Igb2NjdXJyZWQgZHVyaW5nIHVwbG9hZC4nO1xuICAgIH0gZWxzZSBpZiAoZXJyb3IuY29kZSA9PT0gJ3N0b3JhZ2UvaW52YWxpZC1mb3JtYXQnKSB7XG4gICAgICBlcnJvck1lc3NhZ2UgPSAnSW52YWxpZCBmaWxlIGZvcm1hdC4nO1xuICAgIH0gZWxzZSBpZiAoZXJyb3IuY29kZSA9PT0gJ3N0b3JhZ2UvaW52YWxpZC1hcmd1bWVudCcpIHtcbiAgICAgIGVycm9yTWVzc2FnZSA9ICdJbnZhbGlkIHVwbG9hZCBhcmd1bWVudC4nO1xuICAgIH0gZWxzZSBpZiAoZXJyb3IubWVzc2FnZSkge1xuICAgICAgZXJyb3JNZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6IGVycm9yTWVzc2FnZVxuICAgIH07XG4gIH1cbn1cbiAgLy8gRGVsZXRlIGltYWdlIGZyb20gc3RvcmFnZVxuICBzdGF0aWMgYXN5bmMgZGVsZXRlSW1hZ2UoaW1hZ2VVcmw6IHN0cmluZyk6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyBlcnJvcj86IHN0cmluZyB9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghaW1hZ2VVcmwgfHwgIWltYWdlVXJsLmluY2x1ZGVzKCdmaXJlYmFzZScpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6ICdJbnZhbGlkIGltYWdlIFVSTCdcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgaW1hZ2VSZWYgPSByZWYoc3RvcmFnZSwgaW1hZ2VVcmwpO1xuICAgICAgYXdhaXQgZGVsZXRlT2JqZWN0KGltYWdlUmVmKTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ0ltYWdlIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5OicsIGltYWdlVXJsKTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZVxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZWxldGluZyBpbWFnZTonLCBlcnJvcik7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBkZWxldGUgaW1hZ2UnXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8vIEdldCBjb3Vyc2VzIGJ5IGNhdGVnb3J5XG4gIHN0YXRpYyBhc3luYyBnZXRDb3Vyc2VzQnlDYXRlZ29yeShjYXRlZ29yeTogc3RyaW5nLCBwYWdlU2l6ZT86IG51bWJlcik6IFByb21pc2U8Q291cnNlc1Jlc3BvbnNlPiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghY2F0ZWdvcnkgfHwgY2F0ZWdvcnkudHJpbSgpID09PSAnJykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiAnQ2F0ZWdvcnkgaXMgcmVxdWlyZWQnXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGxldCBxID0gcXVlcnkoXG4gICAgICAgIGNvbGxlY3Rpb24oZGIsIENPTExFQ1RJT05fTkFNRSksXG4gICAgICAgIHdoZXJlKCdjYXRlZ29yeScsICc9PScsIGNhdGVnb3J5KSxcbiAgICAgICAgd2hlcmUoJ3N0YXR1cycsICc9PScsICdwdWJsaXNoZWQnKSxcbiAgICAgICAgb3JkZXJCeSgnY3JlYXRlZEF0JywgJ2Rlc2MnKVxuICAgICAgKTtcblxuICAgICAgaWYgKHBhZ2VTaXplKSB7XG4gICAgICAgIHEgPSBxdWVyeShxLCBmaXJlc3RvcmVMaW1pdChwYWdlU2l6ZSkpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBxdWVyeVNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKTtcbiAgICAgIFxuICAgICAgY29uc3QgY291cnNlczogQ291cnNlW10gPSBbXTtcbiAgICAgIHF1ZXJ5U25hcHNob3QuZm9yRWFjaCgoZG9jKSA9PiB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSBkb2MuZGF0YSgpO1xuICAgICAgICBjb3Vyc2VzLnB1c2goe1xuICAgICAgICAgIC4uLmRhdGEsXG4gICAgICAgICAgY3JlYXRlZEF0OiBkYXRhLmNyZWF0ZWRBdD8udG9EYXRlKCkgfHwgbmV3IERhdGUoKSxcbiAgICAgICAgICB1cGRhdGVkQXQ6IGRhdGEudXBkYXRlZEF0Py50b0RhdGUoKSB8fCBuZXcgRGF0ZSgpXG4gICAgICAgIH0gYXMgQ291cnNlKTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBkYXRhOiBjb3Vyc2VzXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGNvdXJzZXMgYnkgY2F0ZWdvcnk6JywgZXJyb3IpO1xuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gaGFuZGxlRmlyZXN0b3JlRXJyb3IoZXJyb3IpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2VcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLy8gR2V0IHB1Ymxpc2hlZCBjb3Vyc2VzIG9ubHlcbiAgc3RhdGljIGFzeW5jIGdldFB1Ymxpc2hlZENvdXJzZXMocGFnZVNpemU/OiBudW1iZXIpOiBQcm9taXNlPENvdXJzZXNSZXNwb25zZT4ge1xuICAgIHJldHVybiB0aGlzLmdldEFsbENvdXJzZXMoeyBcbiAgICAgIHN0YXR1czogJ3B1Ymxpc2hlZCcsIFxuICAgICAgcGFnZVNpemU6IHBhZ2VTaXplIHx8IDUwIFxuICAgIH0pO1xuICB9XG5cbiAgLy8gR2V0IGRyYWZ0IGNvdXJzZXMgb25seVxuICBzdGF0aWMgYXN5bmMgZ2V0RHJhZnRDb3Vyc2VzKHBhZ2VTaXplPzogbnVtYmVyKTogUHJvbWlzZTxDb3Vyc2VzUmVzcG9uc2U+IHtcbiAgICByZXR1cm4gdGhpcy5nZXRBbGxDb3Vyc2VzKHsgXG4gICAgICBzdGF0dXM6ICdkcmFmdCcsIFxuICAgICAgcGFnZVNpemU6IHBhZ2VTaXplIHx8IDUwIFxuICAgIH0pO1xuICB9XG5cbiAgLy8gU2VhcmNoIGNvdXJzZXNcbiAgc3RhdGljIGFzeW5jIHNlYXJjaENvdXJzZXMoc2VhcmNoVGVybTogc3RyaW5nLCBvcHRpb25zPzoge1xuICAgIHBhZ2VTaXplPzogbnVtYmVyO1xuICAgIGNhdGVnb3J5Pzogc3RyaW5nO1xuICAgIGxldmVsPzogc3RyaW5nO1xuICAgIHN0YXR1cz86ICdkcmFmdCcgfCAncHVibGlzaGVkJztcbiAgfSk6IFByb21pc2U8Q291cnNlc1Jlc3BvbnNlPiB7XG4gICAgdHJ5IHtcbiAgICAgIGlmICghc2VhcmNoVGVybSB8fCBzZWFyY2hUZXJtLnRyaW0oKSA9PT0gJycpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QWxsQ291cnNlcyhvcHRpb25zKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuZ2V0QWxsQ291cnNlcyh7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIHNlYXJjaFRlcm06IHNlYXJjaFRlcm0udHJpbSgpXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZWFyY2hpbmcgY291cnNlczonLCBlcnJvcik7XG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBoYW5kbGVGaXJlc3RvcmVFcnJvcihlcnJvcik7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IGVycm9yTWVzc2FnZVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvLyBHZXQgY291cnNlIHN0YXRpc3RpY3NcbiAgc3RhdGljIGFzeW5jIGdldENvdXJzZVN0YXRzKCk6IFByb21pc2U8e1xuICAgIHN1Y2Nlc3M6IGJvb2xlYW47XG4gICAgZGF0YT86IHtcbiAgICAgIHRvdGFsQ291cnNlczogbnVtYmVyO1xuICAgICAgcHVibGlzaGVkQ291cnNlczogbnVtYmVyO1xuICAgICAgZHJhZnRDb3Vyc2VzOiBudW1iZXI7XG4gICAgICB0b3RhbFN0dWRlbnRzOiBudW1iZXI7XG4gICAgICB0b3RhbFJldmVudWU6IG51bWJlcjtcbiAgICAgIGNhdGVnb3JpZXM6IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH07XG4gICAgICBsZXZlbHM6IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH07XG4gICAgfTtcbiAgICBlcnJvcj86IHN0cmluZztcbiAgfT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuZ2V0QWxsQ291cnNlcygpO1xuICAgICAgXG4gICAgICBpZiAoIXJlc3BvbnNlLnN1Y2Nlc3MgfHwgIXJlc3BvbnNlLmRhdGEpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogcmVzcG9uc2UuZXJyb3IgfHwgJ0ZhaWxlZCB0byBmZXRjaCBjb3Vyc2VzIGZvciBzdGF0aXN0aWNzJ1xuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjb3Vyc2VzID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgIGNvbnN0IHN0YXRzID0ge1xuICAgICAgICB0b3RhbENvdXJzZXM6IGNvdXJzZXMubGVuZ3RoLFxuICAgICAgICBwdWJsaXNoZWRDb3Vyc2VzOiBjb3Vyc2VzLmZpbHRlcihjID0+IGMuc3RhdHVzID09PSAncHVibGlzaGVkJykubGVuZ3RoLFxuICAgICAgICBkcmFmdENvdXJzZXM6IGNvdXJzZXMuZmlsdGVyKGMgPT4gYy5zdGF0dXMgPT09ICdkcmFmdCcpLmxlbmd0aCxcbiAgICAgICAgdG90YWxTdHVkZW50czogY291cnNlcy5yZWR1Y2UoKHN1bSwgYykgPT4gc3VtICsgKGMuZW5yb2xsZWRTdHVkZW50cyB8fCAwKSwgMCksXG4gICAgICAgIHRvdGFsUmV2ZW51ZTogY291cnNlcy5yZWR1Y2UoKHN1bSwgYykgPT4gc3VtICsgKChjLnByaWNlIHx8IDApICogKGMuZW5yb2xsZWRTdHVkZW50cyB8fCAwKSksIDApLFxuICAgICAgICBjYXRlZ29yaWVzOiB7fSBhcyB7IFtrZXk6IHN0cmluZ106IG51bWJlciB9LFxuICAgICAgICBsZXZlbHM6IHt9IGFzIHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH1cbiAgICAgIH07XG5cbiAgICAgIC8vIENhbGN1bGF0ZSBjYXRlZ29yeSBkaXN0cmlidXRpb25cbiAgICAgIGNvdXJzZXMuZm9yRWFjaChjb3Vyc2UgPT4ge1xuICAgICAgICBpZiAoY291cnNlLmNhdGVnb3J5KSB7XG4gICAgICAgICAgc3RhdHMuY2F0ZWdvcmllc1tjb3Vyc2UuY2F0ZWdvcnldID0gKHN0YXRzLmNhdGVnb3JpZXNbY291cnNlLmNhdGVnb3J5XSB8fCAwKSArIDE7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBDYWxjdWxhdGUgbGV2ZWwgZGlzdHJpYnV0aW9uXG4gICAgICBjb3Vyc2VzLmZvckVhY2goY291cnNlID0+IHtcbiAgICAgICAgaWYgKGNvdXJzZS5sZXZlbCkge1xuICAgICAgICAgIHN0YXRzLmxldmVsc1tjb3Vyc2UubGV2ZWxdID0gKHN0YXRzLmxldmVsc1tjb3Vyc2UubGV2ZWxdIHx8IDApICsgMTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGRhdGE6IHN0YXRzXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGNvdXJzZSBzdGF0aXN0aWNzOicsIGVycm9yKTtcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGhhbmRsZUZpcmVzdG9yZUVycm9yKGVycm9yKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogZXJyb3JNZXNzYWdlXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8vIFVwZGF0ZSBjb3Vyc2Ugc3RhdHVzIChwdWJsaXNoL3VucHVibGlzaClcbiAgc3RhdGljIGFzeW5jIHVwZGF0ZUNvdXJzZVN0YXR1cyhjb3Vyc2VJZDogc3RyaW5nLCBzdGF0dXM6ICdkcmFmdCcgfCAncHVibGlzaGVkJyk6IFByb21pc2U8Q291cnNlUmVzcG9uc2U+IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFjb3Vyc2VJZCB8fCBjb3Vyc2VJZC50cmltKCkgPT09ICcnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6ICdDb3Vyc2UgSUQgaXMgcmVxdWlyZWQnXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGlmICghWydkcmFmdCcsICdwdWJsaXNoZWQnXS5pbmNsdWRlcyhzdGF0dXMpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgZXJyb3I6ICdTdGF0dXMgbXVzdCBiZSBlaXRoZXIgXCJkcmFmdFwiIG9yIFwicHVibGlzaGVkXCInXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLnVwZGF0ZUNvdXJzZShjb3Vyc2VJZCwgeyBcbiAgICAgICAgc3RhdHVzLFxuICAgICAgICBsYXN0VXBkYXRlZDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBjb3Vyc2Ugc3RhdHVzOicsIGVycm9yKTtcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGhhbmRsZUZpcmVzdG9yZUVycm9yKGVycm9yKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogZXJyb3JNZXNzYWdlXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIC8vIER1cGxpY2F0ZSBjb3Vyc2VcbiAgc3RhdGljIGFzeW5jIGR1cGxpY2F0ZUNvdXJzZShjb3Vyc2VJZDogc3RyaW5nLCBuZXdUaXRsZT86IHN0cmluZyk6IFByb21pc2U8Q291cnNlUmVzcG9uc2U+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgb3JpZ2luYWxDb3Vyc2UgPSBhd2FpdCB0aGlzLmdldENvdXJzZUJ5SWQoY291cnNlSWQpO1xuICAgICAgXG4gICAgICBpZiAoIW9yaWdpbmFsQ291cnNlLnN1Y2Nlc3MgfHwgIW9yaWdpbmFsQ291cnNlLmRhdGEpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogb3JpZ2luYWxDb3Vyc2UuZXJyb3IgfHwgJ09yaWdpbmFsIGNvdXJzZSBub3QgZm91bmQnXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNvdXJzZSA9IG9yaWdpbmFsQ291cnNlLmRhdGE7XG4gICAgICBjb25zdCBkdXBsaWNhdGVkQ291cnNlOiBOZXdDb3Vyc2UgPSB7XG4gICAgICAgIC4uLmNvdXJzZSxcbiAgICAgICAgdGl0bGU6IG5ld1RpdGxlIHx8IGAke2NvdXJzZS50aXRsZX0gKENvcHkpYCxcbiAgICAgICAgc2x1ZzogKG5ld1RpdGxlIHx8IGAke2NvdXJzZS50aXRsZX0gKENvcHkpYCkudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMrL2csICctJykucmVwbGFjZSgvW15hLXowLTktXS9nLCAnJyksXG4gICAgICAgIHN0YXR1czogJ2RyYWZ0JyxcbiAgICAgICAgZW5yb2xsZWRTdHVkZW50czogMCxcbiAgICAgICAgcmF0aW5nOiAwLFxuICAgICAgICB0b3RhbFJhdGluZ3M6IDAsXG4gICAgICAgIGxhc3RVcGRhdGVkOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH07XG5cbiAgICAgIC8vIFJlbW92ZSBmaWVsZHMgdGhhdCBzaG91bGRuJ3QgYmUgZHVwbGljYXRlZFxuICAgICAgZGVsZXRlIChkdXBsaWNhdGVkQ291cnNlIGFzIGFueSkuX2lkO1xuICAgICAgZGVsZXRlIChkdXBsaWNhdGVkQ291cnNlIGFzIGFueSkuY3JlYXRlZEF0O1xuICAgICAgZGVsZXRlIChkdXBsaWNhdGVkQ291cnNlIGFzIGFueSkudXBkYXRlZEF0O1xuXG4gICAgICByZXR1cm4gdGhpcy5jcmVhdGVDb3Vyc2UoZHVwbGljYXRlZENvdXJzZSk7XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZHVwbGljYXRpbmcgY291cnNlOicsIGVycm9yKTtcbiAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGhhbmRsZUZpcmVzdG9yZUVycm9yKGVycm9yKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogZXJyb3JNZXNzYWdlXG4gICAgICB9O1xuICAgIH1cbiAgfVxufSJdLCJuYW1lcyI6WyJjb2xsZWN0aW9uIiwiYWRkRG9jIiwidXBkYXRlRG9jIiwiZGVsZXRlRG9jIiwiZ2V0RG9jcyIsInF1ZXJ5Iiwib3JkZXJCeSIsInNlcnZlclRpbWVzdGFtcCIsIndoZXJlIiwid3JpdGVCYXRjaCIsImxpbWl0IiwiZmlyZXN0b3JlTGltaXQiLCJzdGFydEFmdGVyIiwicmVmIiwidXBsb2FkQnl0ZXMiLCJnZXREb3dubG9hZFVSTCIsImRlbGV0ZU9iamVjdCIsImRiIiwic3RvcmFnZSIsImhhbmRsZUZpcmVzdG9yZUVycm9yIiwidjQiLCJ1dWlkdjQiLCJDT0xMRUNUSU9OX05BTUUiLCJjbGVhbkNvdXJzZURhdGEiLCJkYXRhIiwiY2xlYW5lZCIsImtleSIsInZhbHVlIiwiT2JqZWN0IiwiZW50cmllcyIsInVuZGVmaW5lZCIsImluY2x1ZGVzIiwiQXJyYXkiLCJpc0FycmF5IiwiZmlsdGVyIiwiaXRlbSIsInRyaW0iLCJjb25zdHJ1Y3RvciIsInZhbGlkYXRlQ291cnNlRGF0YSIsImNvdXJzZURhdGEiLCJlcnJvcnMiLCJ0aXRsZSIsImxlbmd0aCIsInB1c2giLCJzaG9ydERlc2NyaXB0aW9uIiwiY2F0ZWdvcnkiLCJsZXZlbCIsImxhbmd1YWdlIiwiZHVyYXRpb24iLCJob3VycyIsInByaWNlIiwiaXNOYU4iLCJvcmlnaW5hbFByaWNlIiwiaXNWYWxpZCIsIkNvdXJzZVNlcnZpY2UiLCJjcmVhdGVDb3Vyc2UiLCJ2YWxpZGF0aW9uIiwic3VjY2VzcyIsImVycm9yIiwiam9pbiIsImNvdXJzZUlkIiwiY291cnNlV2l0aE1ldGFkYXRhIiwiX2lkIiwiY3JlYXRlZEF0IiwidXBkYXRlZEF0Iiwic3RhdHVzIiwicmF0aW5nIiwiTnVtYmVyIiwidG90YWxSYXRpbmdzIiwiZW5yb2xsZWRTdHVkZW50cyIsImxlYXJuaW5nT3V0Y29tZXMiLCJmZWF0dXJlcyIsInNraWxscyIsInJlcXVpcmVtZW50cyIsIm1vZHVsZSIsImhpZ2hsaWdodHMiLCJwcm9qZWN0IiwicHJvZ3JhbUZvciIsInNsdWciLCJ0b0xvd2VyQ2FzZSIsInJlcGxhY2UiLCJwcm9ncmFtQnkiLCJsYXN0VXBkYXRlZCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInBheW1lbnRMaW5rIiwiYmFja2dyb3VuZEltYWdlIiwiY2VydGlmaWNhdGVJbWFnZSIsImdsb2JhbFN0YXR1cyIsInN0YXJ0RGF0ZSIsInRvb2xzRGF0YSIsInNlY3Rpb25UaXRsZSIsInRvb2xzQ291bnQiLCJkaXNwbGF5SW1hZ2UiLCJ0b29scyIsImNsZWFuZWREYXRhIiwiY29uc29sZSIsImxvZyIsImRvY1JlZiIsImNyZWF0ZWRDb3Vyc2UiLCJlcnJvck1lc3NhZ2UiLCJnZXRBbGxDb3Vyc2VzIiwib3B0aW9ucyIsInEiLCJwYWdlU2l6ZSIsImxhc3REb2MiLCJxdWVyeVNuYXBzaG90IiwiY291cnNlcyIsImZvckVhY2giLCJkb2MiLCJjb3Vyc2UiLCJ0b0RhdGUiLCJzZWFyY2hUZXJtIiwic2VhcmNoTG93ZXIiLCJtYXRjaGVzU2VhcmNoIiwicGFnaW5hdGlvbiIsInRvdGFsIiwicGFnZSIsInBhZ2VzIiwiZ2V0Q291cnNlQnlJZCIsImVtcHR5IiwiZG9jcyIsImdldENvdXJzZUJ5U2x1ZyIsInVwZGF0ZUNvdXJzZSIsInVwZGF0ZURhdGEiLCJmaWVsZHNVcGRhdGVkIiwia2V5cyIsInVwZGF0ZWRDb3Vyc2VSZXNwb25zZSIsImRlbGV0ZUNvdXJzZSIsImRlbGV0ZUltYWdlIiwiaW1hZ2VFcnJvciIsIndhcm4iLCJkZWxldGVDb3Vyc2VzIiwiY291cnNlSWRzIiwiYmF0Y2giLCJkZWxldGVkQ291bnQiLCJkZWxldGUiLCJjb21taXQiLCJ1cGxvYWRJbWFnZSIsImZpbGUiLCJwYXRoIiwibmFtZSIsInNpemUiLCJ0eXBlIiwiYWxsb3dlZFR5cGVzIiwidGltZXN0YW1wIiwibm93IiwicmFuZG9tU3RyaW5nIiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwic3Vic3RyaW5nIiwiZmlsZUV4dGVuc2lvbiIsInNwbGl0IiwicG9wIiwic2FuaXRpemVkRmlsZU5hbWUiLCJmaWxlbmFtZSIsInN0b3JhZ2VSZWYiLCJmdWxsUGF0aCIsIm1ldGFkYXRhIiwiY29udGVudFR5cGUiLCJjdXN0b21NZXRhZGF0YSIsInVwbG9hZGVkQXQiLCJvcmlnaW5hbE5hbWUiLCJ1cGxvYWRlZEJ5Iiwic25hcHNob3QiLCJkb3dubG9hZFVSTCIsInVybCIsIm1lc3NhZ2UiLCJjb2RlIiwic3RhY2siLCJpbWFnZVVybCIsImltYWdlUmVmIiwiZ2V0Q291cnNlc0J5Q2F0ZWdvcnkiLCJnZXRQdWJsaXNoZWRDb3Vyc2VzIiwiZ2V0RHJhZnRDb3Vyc2VzIiwic2VhcmNoQ291cnNlcyIsImdldENvdXJzZVN0YXRzIiwicmVzcG9uc2UiLCJzdGF0cyIsInRvdGFsQ291cnNlcyIsInB1Ymxpc2hlZENvdXJzZXMiLCJjIiwiZHJhZnRDb3Vyc2VzIiwidG90YWxTdHVkZW50cyIsInJlZHVjZSIsInN1bSIsInRvdGFsUmV2ZW51ZSIsImNhdGVnb3JpZXMiLCJsZXZlbHMiLCJ1cGRhdGVDb3Vyc2VTdGF0dXMiLCJkdXBsaWNhdGVDb3Vyc2UiLCJuZXdUaXRsZSIsIm9yaWdpbmFsQ291cnNlIiwiZHVwbGljYXRlZENvdXJzZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/courseService.ts\n"));

/***/ })

});